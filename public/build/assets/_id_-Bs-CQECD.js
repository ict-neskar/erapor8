import{d as c,a as S}from"./mixins-CyMBM5fU.js";import{r,as as le,G as se,f as B,e as a,i as ie,j as te,o as _,b as e,t as q,m as s,am as oe,c as b,d as u,F as T,h as P,aa as ne,ap as re,a2 as E,aq as de,v as I}from"./main-WcaAB0Vb.js";import{_ as ue}from"./ConfirmDialog-BeQZcop1.js";import{_ as me}from"./AppTextarea-BxCpxr5c.js";import{_ as _e}from"./AppSelect-D2mvpW-q.js";import{i as pe,_ as fe}from"./id-C4wjfVLN.js";import{_ as ge}from"./AppTextField-CpIb7EwY.js";import{u as O,c as ce}from"./createUrl-5K3jXwP3.js";import{$ as M}from"./api-bn4q6wV9.js";import{V as be,c as ke,a as ve,b as A}from"./VCard-B6efkknt.js";import{V as z}from"./VDivider-DIWjfe5J.js";import{V as ye}from"./VTable-Dxydgzys.js";import{V as p,a as i}from"./VRow-e-Ng4Tme.js";import{V as xe}from"./VForm-Ceyv7-oM.js";import"./VDialog-B8hMcs5D.js";import"./VOverlay-Baakzd79.js";import"./forwardRefs-DWGaNmQL.js";import"./scopeId-UpMB3NtI.js";import"./VImg-BR-W7-GF.js";import"./VLabel-6jXlAgoN.js";import"./VTextarea-7487l8Ls.js";/* empty css                   */import"./VField-Bv5GDULG.js";import"./VSelect-D68HqIbk.js";import"./VList-BTYRvNWn.js";import"./ssrBoot-Dq8dOG3X.js";import"./VAvatar-C5PogN-2.js";import"./VMenu-BI4mPtMf.js";import"./VSelectionControl-D1_dFLIC.js";import"./VChip-LzakvH-4.js";import"./VSlideGroup-aRldGfCL.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./index-BxkgbwWS.js";/* empty css              */const Ve={class:"text-center"},je={style:{"vertical-align":"top"}},he={class:"py-2 px-2"},oa={__name:"[id]",async setup(we){let h,F;const U=ie(),G=te(),w=r([]),v=r(!1),{data:m}=([h,F]=le(()=>O(`/penilaian/nilai-sikap/${U.params.id}`)),h=await h,F(),h);se(async()=>{await K(),await R(m.value.budaya_kerja_id),n.value.elemen_id=m.value.elemen_id,n.value.opsi_sikap=m.value.opsi_id});const C=r(!1),K=async()=>{C.value=!0;try{let l=(await O(ce("/referensi/sikap",{query:{sekolah_id:c.sekolah_id,semester_id:S.semester_id}}))).data.value;w.value=l.data,console.log(l)}catch(t){console.error(t)}finally{C.value=!1}},L=(t,l)=>{const d={};return t.filter(j=>{const D=j[l];return d[D]?!1:(d[D]=!0,!0)})},N=r({tingkat:null,rombongan_belajar_id:null,peserta_didik_id:null,anggota_rombel_id:null}),f=r({tingkat:null,rombongan_belajar_id:null,peserta_didik_id:null,tanggal:null,budaya_kerja_id:null,elemen_id:null,opsi_sikap:null,uraian_sikap:null}),y=r({rombel:[],siswa:[],elemen:[]}),g=r({rombel:!1,siswa:!1,elemen:!1}),n=r({opsi:"nilai-sikap",nilai_budaya_kerja_id:U.params.id,semester_id:S.semester_id,user_id:c.user_id,guru_id:c.guru_id,sekolah_id:c.sekolah_id,tanggal:m.value.tanggal,budaya_kerja_id:m.value.budaya_kerja_id,elemen_id:m.value.elemen_id,opsi_sikap:m.value.opsi_sikap,uraian_sikap:m.value.deskripsi}),$=r(!1),x=r(!1),Y=r(""),V=r({color:"",title:"",text:""}),H=r(!1),J=()=>{H.value=!0,N.value={tingkat:null,rombongan_belajar_id:null,peserta_didik_id:null,anggota_rombel_id:null},n.value={opsi:"nilai-sikap",nilai_budaya_kerja_id:null,semester_id:S.semester_id,user_id:c.user_id,guru_id:c.guru_id,sekolah_id:c.sekolah_id,tanggal:null,budaya_kerja_id:null,elemen_id:null,opsi_sikap:null,uraian_sikap:null},f.value={tingkat:null,rombongan_belajar_id:null,peserta_didik_id:null,tanggal:null,budaya_kerja_id:null,elemen_id:null,opsi_sikap:null,uraian_sikap:null},y.value={rombel:[],siswa:[],elemen:[]},g.value={rombel:!1,siswa:!1,elemen:!1},v.value=!1,x.value=!1,V.value={color:"",title:"",text:""}},Q=async t=>{const l={...t,...n.value};await M("/referensi/get-data",{method:"POST",body:l,onResponse({response:d}){let k=d._data;t.data=="rombel"&&(y.value.rombel=k),t.data=="siswa"&&(y.value.siswa=k.data_siswa),t.data=="elemen"&&(y.value.elemen=k)}})},R=async t=>{n.value.elemen_id=null,t&&(g.value.elemen=!0,await Q({data:"elemen",budaya_kerja_id:t}).then(()=>{g.value.elemen=!1}))},W=async()=>{J(),await de(()=>{G.replace("/nilai-akademik/nilai-sikap")})},X=async()=>{v.value=!0;const t={...n.value,...N.value};await M("/penilaian/simpan",{method:"POST",body:t,onResponse({response:l}){let d=l._data;v.value=!1,d.errors?f.value=d.errors:(x.value=!0,V.value=d)}})},Z=r({locale:pe.Indonesian,altFormat:"j F Y",altInput:!0});return(t,l)=>{const d=ge,k=fe,j=_e,D=me,ee=ue;return _(),B(be,{class:"mb-6"},{default:a(()=>[e(ve,{class:"pb-4"},{default:a(()=>[e(ke,null,{default:a(()=>l[7]||(l[7]=[q("Input Nilai Sikap")])),_:1})]),_:1}),e(z),s(C)?(_(),B(A,{key:0,class:"text-center"},{default:a(()=>[e(oe,{size:60,indeterminate:"",color:"error",class:"my-10"})]),_:1})):(_(),b(T,{key:1},[e(ye,null,{default:a(()=>[u("thead",null,[u("tr",null,[(_(!0),b(T,null,P(s(w),o=>(_(),b("th",Ve,I(o.aspek),1))),256))])]),u("tbody",null,[u("tr",null,[(_(!0),b(T,null,P(s(w),o=>(_(),b("td",je,[u("ul",he,[(_(!0),b(T,null,P(L(o.elemen_budaya_kerja,"elemen"),ae=>(_(),b("li",null,I(ae.elemen),1))),256))])]))),256))])])]),_:1}),e(xe,{onSubmit:re(X,["prevent"])},{default:a(()=>[e(A,null,{default:a(()=>[e(p,null,{default:a(()=>[e(i,{cols:"12"},{default:a(()=>[e(p,{"no-gutters":""},{default:a(()=>[e(i,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:a(()=>l[8]||(l[8]=[u("label",{class:"v-label text-body-2 text-high-emphasis",for:"semester_id"},"Tahun Pelajaran",-1)])),_:1}),e(i,{cols:"12",md:"9"},{default:a(()=>[e(d,{id:"semester_id",value:("$semester"in t?t.$semester:s(S)).nama,disabled:""},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(i,{cols:"12"},{default:a(()=>[e(p,{"no-gutters":""},{default:a(()=>[e(i,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:a(()=>l[9]||(l[9]=[u("label",{class:"v-label text-body-2 text-high-emphasis"},"Tingkat Kelas",-1)])),_:1}),e(i,{cols:"12",md:"9"},{default:a(()=>[e(d,{value:`Tingkat ${s(m).anggota_rombel.rombongan_belajar.tingkat}`,disabled:""},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(i,{cols:"12"},{default:a(()=>[e(p,{"no-gutters":""},{default:a(()=>[e(i,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:a(()=>l[10]||(l[10]=[u("label",{class:"v-label text-body-2 text-high-emphasis"},"Rombongan Belajar",-1)])),_:1}),e(i,{cols:"12",md:"9"},{default:a(()=>[e(d,{value:s(m).anggota_rombel.rombongan_belajar.nama,disabled:""},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(i,{cols:"12"},{default:a(()=>[e(p,{"no-gutters":""},{default:a(()=>[e(i,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:a(()=>l[11]||(l[11]=[u("label",{class:"v-label text-body-2 text-high-emphasis"},"Peserta Didik",-1)])),_:1}),e(i,{cols:"12",md:"9"},{default:a(()=>[e(d,{value:s(m).anggota_rombel.peserta_didik.nama,disabled:""},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(i,{cols:"12"},{default:a(()=>[e(p,{"no-gutters":""},{default:a(()=>[e(i,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:a(()=>l[12]||(l[12]=[u("label",{class:"v-label text-body-2 text-high-emphasis",for:"tanggal"},"Tanggal",-1)])),_:1}),e(i,{cols:"12",md:"9"},{default:a(()=>[e(k,{modelValue:s(n).tanggal,"onUpdate:modelValue":l[0]||(l[0]=o=>s(n).tanggal=o),placeholder:"== Pilih Tanggal ==",config:s(Z),"error-messages":s(f).tanggal},null,8,["modelValue","config","error-messages"])]),_:1})]),_:1})]),_:1}),e(i,{cols:"12"},{default:a(()=>[e(p,{"no-gutters":""},{default:a(()=>[e(i,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:a(()=>l[13]||(l[13]=[u("label",{class:"v-label text-body-2 text-high-emphasis",for:"budaya_kerja_id"},"Dimensi/Elemen Sikap",-1)])),_:1}),e(i,{cols:"12",md:"9"},{default:a(()=>[e(p,null,{default:a(()=>[e(i,{cols:"12",md:"4"},{default:a(()=>[e(j,{modelValue:s(n).budaya_kerja_id,"onUpdate:modelValue":[l[1]||(l[1]=o=>s(n).budaya_kerja_id=o),R],placeholder:"== Pilih Dimensi Sikap ==",items:s(w),clearable:"","clear-icon":"tabler-x","item-value":"budaya_kerja_id","item-title":"aspek","error-messages":s(f).budaya_kerja_id},null,8,["modelValue","items","error-messages"])]),_:1}),e(i,{cols:"12",md:"4"},{default:a(()=>[e(j,{modelValue:s(n).elemen_id,"onUpdate:modelValue":l[2]||(l[2]=o=>s(n).elemen_id=o),placeholder:"== Pilih Elemen Sikap ==",items:s(y).elemen,clearable:"","clear-icon":"tabler-x","item-value":"elemen_id","item-title":"elemen","error-messages":s(f).elemen_id,loading:s(g).elemen,disabled:s(g).elemen},null,8,["modelValue","items","error-messages","loading","disabled"])]),_:1}),e(i,{cols:"12",md:"4"},{default:a(()=>[e(j,{modelValue:s(n).opsi_sikap,"onUpdate:modelValue":l[3]||(l[3]=o=>s(n).opsi_sikap=o),placeholder:"== Pilih Opsi Sikap ==",items:[{value:1,title:"Positif"},{value:2,title:"Negatif"}],clearable:"","clear-icon":"tabler-x","error-messages":s(f).opsi_sikap,loading:s(g).elemen,disabled:s(g).elemen},null,8,["modelValue","error-messages","loading","disabled"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(i,{cols:"12"},{default:a(()=>[e(p,{"no-gutters":""},{default:a(()=>[e(i,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:a(()=>l[14]||(l[14]=[u("label",{class:"v-label text-body-2 text-high-emphasis",for:"uraian_sikap"},"Uraian Sikap",-1)])),_:1}),e(i,{cols:"12",md:"9"},{default:a(()=>[e(D,{modelValue:s(n).uraian_sikap,"onUpdate:modelValue":l[4]||(l[4]=o=>s(n).uraian_sikap=o),"error-messages":s(f).uraian_sikap,placeholder:"Uraian Sikap"},null,8,["modelValue","error-messages"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(z),e(A,{class:"d-flex justify-end flex-wrap gap-3 pt-5 overflow-visible"},{default:a(()=>[e(ne,{variant:"elevated",type:"submit",loading:s(v),disabled:s(v)},{default:a(()=>l[15]||(l[15]=[q(" Simpan ")])),_:1},8,["loading","disabled"])]),_:1})]),_:1})],64)),e(ee,{isDialogVisible:s($),"onUpdate:isDialogVisible":l[5]||(l[5]=o=>E($)?$.value=o:null),isNotifVisible:s(x),"onUpdate:isNotifVisible":l[6]||(l[6]=o=>E(x)?x.value=o:null),"confirmation-question":"Apakah Anda yakin?","confirmation-text":s(Y),"confirm-color":s(V).color,"confirm-title":s(V).title,"confirm-msg":s(V).text,onClose:W},null,8,["isDialogVisible","isNotifVisible","confirmation-text","confirm-color","confirm-title","confirm-msg"])]),_:1})}}};export{oa as default};
