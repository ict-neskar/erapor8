import{d as T,a as S,t as Fe}from"./mixins-I8SXeutZ.js";import{_ as Se}from"./ConfirmDialog-B0Bc_YJ5.js";import{_ as Ke}from"./DefaultDialog-CQGbw1pR.js";import{_ as Re}from"./ProfileSiswa-QBpSSY7_.js";import{i as Ie,_ as Be}from"./id-YwIuIv5G.js";import{_ as Ae}from"./TablePagination-fG2MYBNV.js";import{V as Ne}from"./VImg-DYyAcwaz.js";import{V as Ee}from"./VAvatar-B-Z9vLfD.js";import{o as k,c as _,b as t,e as l,d as i,v as C,r as o,G as Oe,w as Z,m as a,a2 as K,a as ze,t as w,aa as re,$ as ue,f as O,am as Qe,y as f,F as z,h as qe}from"./main-DOWoIBhU.js";import{_ as Le}from"./AppTextField-DGISkcON.js";import{_ as Ge}from"./AppSelect-D1gjRk4-.js";import{u as He,c as Je}from"./createUrl-CexWNLWx.js";import{$ as j}from"./api-CAM2bx0j.js";import{V as Me,a as Ye,c as We,b as Xe}from"./VCard-DRBiftP4.js";import{V as ee}from"./VDivider-DgEwy873.js";import{V as Ze}from"./VSpacer-D5BlabPF.js";import{V as ea}from"./VDataTableServer-BNn81j7f.js";import{V as de}from"./VTooltip-DGsh1r8w.js";import{a as d,V as v}from"./VRow-B3Odvqxs.js";import{V as me}from"./VTable-C1nYsmx8.js";import{V as ge}from"./VCheckbox-BmrthuXl.js";import"./VDialog-BP5oy-x4.js";import"./VOverlay-Cnf91z5i.js";import"./forwardRefs-DWGaNmQL.js";import"./DialogCloseBtn-CpiGqbub.js";import"./VLabel-Hm2kl-Y1.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./VList-DWH4RJSa.js";import"./VMenu-DeAbbdJl.js";import"./VSelectionControl-C8KMTZZ4.js";import"./VChip-Tdr48uqn.js";import"./index-BxkgbwWS.js";/* empty css              */import"./filter-CR6gUgAk.js";const aa={class:"d-flex align-center gap-x-4"},ta={class:"d-flex flex-column"},la={class:"text-base"},na={class:"text-sm"},sa={__name:"ProfilePtk",props:{item:{type:Object,required:!0}},setup(h){return(ae,m)=>(k(),_("div",aa,[t(Ee,{size:"34",variant:h.item.photo?void 0:"tonal",color:h.item.photo?void 0:"success"},{default:l(()=>[t(Ne,{src:h.item.photo},null,8,["src"])]),_:1},8,["variant","color"]),i("div",ta,[i("h6",la,C(h.item.nama_lengkap),1),i("div",na,C(h.item.email),1)])]))}},ia={class:"me-3 d-flex gap-3"},oa={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},ra={style:{"inline-size":"15.625rem"}},ua={key:0,class:"text-center"},da={key:0,class:"text-center"},ma={class:"text-center"},ga={class:"text-center"},Ha={__name:"perencanaan",setup(h){const ae=o({locale:Ie.Indonesian,altFormat:"j F Y",altInput:!0}),m=o({page:1,itemsPerPage:10,searchQuery:"",sortby:"updated_at",sortbydesc:"DESC"}),pe=[{key:"paket_ukk",title:"Paket Kompetensi",sortable:!1},{key:"guru_internal",title:"Penguji Internal",sortable:!1},{key:"guru_eksternal",title:"Penguji Eksternal",sortable:!1},{key:"pd_count",title:"Jml PD",sortable:!1,align:"center"},{key:"actions",title:"Aksi",align:"center",sortable:!1,nowrap:!0}],te=o([]),Q=o(0),q=o(!1);Oe(async()=>{await L()}),Z(m,async()=>{await L()},{deep:!0}),Z(()=>m.value.searchQuery,()=>{m.value.page=1});const ke=s=>{var e,r;m.value.sortby=(e=s[0])==null?void 0:e.key,m.value.sortbydesc=(r=s[0])==null?void 0:r.order},L=async()=>{q.value=!0;try{let e=(await He(Je("/ukk",{query:{user_id:T.user_id,guru_id:T.guru_id,sekolah_id:T.sekolah_id,semester_id:S.semester_id,periode_aktif:S.nama,q:m.value.searchQuery,page:m.value.page,per_page:m.value.itemsPerPage,sortby:m.value.sortby,sortbydesc:m.value.sortbydesc}}))).data;te.value=e.value.data.data,Q.value=e.value.data.total}catch(s){console.error(s)}finally{q.value=!1}},R=o(!1),$=o({color:null,title:null,text:null});o({tingkat:null,rombongan_belajar_id:null,pembelajaran_id:null});const U=o(!1),I=o(!1),D=o(!1),B=o(!1),G=o(!1),V=o(!1),H=o(""),F={semester_id:S.semester_id,user_id:T.user_id,guru_id:T.guru_id,sekolah_id:T.sekolah_id,periode_aktif:S.nama},u=o({tingkat:null,rombongan_belajar_id:null,jurusan_id:null,penguji_internal:null,penguji_eksternal:null,paket_ukk_id:null,tanggal:null,selected:[]}),b=o({tingkat:null,rombongan_belajar_id:null,penguji_internal:null,penguji_eksternal:null,paket_ukk_id:null,tanggal:null}),c=o(),le=o(),J=o(),A=o(),ne=async(s,e)=>{J.value=e.rencana_ukk_id,c.value=s,s=="detil"?(H.value="Detil Perencanaan Penilaian UKK",await j("/ukk/show",{method:"POST",body:{rencana_ukk_id:J.value},onResponse({response:r}){let p=r._data;V.value=!0,A.value=p.rencana,y.value=p.data_siswa}})):(R.value=!0,le.value="Tindakan ini tidak dapat dikembalikan!")},M=o([]),Y=o([]),W=o([]),X=o([]),y=o([]),x=o(!1),ce=()=>{x.value?u.value.selected=y.value.map(s=>`${s.peserta_didik_id}#${s.anggota_rombel.anggota_rombel_id}`):u.value.selected=[]},N=o(!1);Z(()=>u.value.selected,s=>{s.length===y.value.length?x.value=!0:(N.value=!0,x.value=!1)});const fe=o(),_e=()=>{c.value="add",V.value=!0,H.value="Tambah Perencanaan Penilaian UKK"},be=async s=>{s&&await j("/ukk/hapus",{method:"POST",body:{data:"rencana",rencana_ukk_id:J.value},onResponse({response:e}){let r=e._data;V.value=!1,U.value=!0,$.value=r}})},ve=async()=>{await L()},Ve=()=>{u.value={tingkat:null,rombongan_belajar_id:null,jurusan_id:null,penguji_internal:null,penguji_eksternal:null,paket_ukk_id:null,tanggal:null,selected:[]},b.value={tingkat:null,rombongan_belajar_id:null,penguji_internal:null,penguji_eksternal:null,paket_ukk_id:null,tanggal:null},M.value=[],Y.value=[],W.value=[],X.value=[],y.value=[],x.value=!1},ye=async s=>{if(s){const r={...{data:"rencana"},...F,...u.value};await j("/ukk/save",{method:"POST",body:r,onResponse({response:p}){let g=p._data;g.errors?b.value=g.errors:(Ve(),V.value=!1,U.value=!0,$.value=g)}})}},xe=async s=>{if(s){I.value=!0;const r={...{data:"rombel",mapping:1},...F,...u.value};await j("/referensi/get-data",{method:"POST",body:r,onResponse({response:p}){let g=p._data;M.value=g,I.value=!1}})}},Pe=async s=>{if(s){D.value=!0;const r={...{data:"penguji-ukk"},...F,...u.value};await j("/referensi/get-data",{method:"POST",body:r,onResponse({response:p}){let g=p._data;u.value.jurusan_id=g.rombel.jurusan_sp.jurusan_id,Y.value=g.internal,W.value=g.eksternal,D.value=!1}})}},je=async s=>{if(s){B.value=!0;const r={...{data:"paket-ukk"},...F,...u.value};await j("/referensi/get-data",{method:"POST",body:r,onResponse({response:p}){let g=p._data;X.value=g,B.value=!1}})}},he=async s=>{if(s){G.value=!0;const r={...{data:"siswa-ukk"},...F,...u.value};await j("/referensi/get-data",{method:"POST",body:r,onResponse({response:p}){let g=p._data;fe.value=g.rencana_ukk,y.value=g.data_siswa,G.value=!1}})}},De=s=>{var e="";if(s.nilai_ukk&&s.nilai_ukk.nilai){var r=s.nilai_ukk.nilai;r>=70?e="Kompeten":e="Belum Kompeten"}return e},se=s=>{var e=null;return s.nilai_ukk.nilai&&(e=`/cetak/sertifikat/${s.nilai_ukk.anggota_rombel_id}/${s.nilai_ukk.rencana_ukk_id}`),e};return(s,e)=>{const r=Ge,p=Le,g=sa,ie=ze("IconBtn"),Te=Ae,we=Be,Ce=Re,$e=Ke,Ue=Se;return k(),_("section",null,[t(Me,{class:"mb-6"},{default:l(()=>[t(Ye,{class:"pb-4"},{default:l(()=>[t(We,null,{default:l(()=>e[15]||(e[15]=[w("Rencana Penilaian UKK")])),_:1})]),_:1}),t(ee),t(Xe,{class:"d-flex flex-wrap gap-4"},{default:l(()=>[i("div",ia,[t(r,{modelValue:a(m).itemsPerPage,"onUpdate:modelValue":e[0]||(e[0]=n=>a(m).itemsPerPage=n),items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"}],style:{"inline-size":"6.25rem"}},null,8,["modelValue"])]),t(Ze),i("div",oa,[i("div",ra,[t(p,{modelValue:a(m).searchQuery,"onUpdate:modelValue":e[1]||(e[1]=n=>a(m).searchQuery=n),placeholder:"Cari Data"},null,8,["modelValue"])]),t(re,{"prepend-icon":"tabler-plus",onClick:_e},{default:l(()=>e[16]||(e[16]=[w(" Tambah Data ")])),_:1})])]),_:1}),t(ee),t(ea,{items:a(te),"server-items-length":a(Q),headers:pe,options:a(m),loading:a(q),"loading-text":"Loading...","onUpdate:sortBy":ke},{"item.paket_ukk":l(({item:n})=>[w(C(n.paket_ukk.nama_paket_id),1)]),"item.guru_internal":l(({item:n})=>[t(g,{item:n.guru_internal},null,8,["item"])]),"item.guru_eksternal":l(({item:n})=>[t(g,{item:n.guru_eksternal},null,8,["item"])]),"item.actions":l(({item:n})=>[t(ie,{onClick:P=>ne("detil",n)},{default:l(()=>[t(de,{activator:"parent",location:"top"},{default:l(()=>e[17]||(e[17]=[w(" Detil Data ")])),_:1}),t(ue,{icon:"tabler-file-search"})]),_:2},1032,["onClick"]),t(ie,{onClick:P=>ne("hapus",n)},{default:l(()=>[t(de,{activator:"parent",location:"top"},{default:l(()=>e[18]||(e[18]=[w(" Hapus Data ")])),_:1}),t(ue,{icon:"tabler-trash",color:"error"})]),_:2},1032,["onClick"])]),bottom:l(()=>[t(Te,{page:a(m).page,"onUpdate:page":e[2]||(e[2]=n=>a(m).page=n),"items-per-page":a(m).itemsPerPage,"total-items":a(Q)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items","server-items-length","options","loading"])]),_:1}),t($e,{isDialogVisible:a(V),"onUpdate:isDialogVisible":e[12]||(e[12]=n=>K(V)?V.value=n:null),"dialog-title":a(H),errors:a(b),isSubmitBtn:a(c)=="add",onConfirm:ye},{content:l(()=>[a(c)=="add"?(k(),O(v,{key:0},{default:l(()=>[t(d,{cols:"12"},{default:l(()=>[t(v,{"no-gutters":""},{default:l(()=>[t(d,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>e[19]||(e[19]=[i("label",{class:"v-label text-body-2 text-high-emphasis",for:"semester_id"},"Tahun Pelajaran",-1)])),_:1}),t(d,{cols:"12",md:"9"},{default:l(()=>[t(p,{id:"semester_id",value:("$semester"in s?s.$semester:a(S)).nama,disabled:""},null,8,["value"])]),_:1})]),_:1})]),_:1}),t(d,{cols:"12"},{default:l(()=>[t(v,{"no-gutters":""},{default:l(()=>[t(d,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>e[20]||(e[20]=[i("label",{class:"v-label text-body-2 text-high-emphasis",for:"tingkat"},"Tingkat Kelas",-1)])),_:1}),t(d,{cols:"12",md:"9"},{default:l(()=>[t(r,{modelValue:a(u).tingkat,"onUpdate:modelValue":[e[3]||(e[3]=n=>a(u).tingkat=n),xe],placeholder:"== Pilih Tingkat kelas ==",items:"tingkatKelas"in s?s.tingkatKelas:a(Fe),clearable:"","clear-icon":"tabler-x","error-messages":a(b).tingkat},null,8,["modelValue","items","error-messages"])]),_:1})]),_:1})]),_:1}),t(d,{cols:"12"},{default:l(()=>[t(v,{"no-gutters":""},{default:l(()=>[t(d,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>e[21]||(e[21]=[i("label",{class:"v-label text-body-2 text-high-emphasis",for:"rombongan_belajar_id"},"Rombongan Belajar",-1)])),_:1}),t(d,{cols:"12",md:"9"},{default:l(()=>[t(r,{modelValue:a(u).rombongan_belajar_id,"onUpdate:modelValue":[e[4]||(e[4]=n=>a(u).rombongan_belajar_id=n),Pe],placeholder:"== Pilih Rombongan Belajar == ",items:a(M),clearable:"","clear-icon":"tabler-x","item-value":"rombongan_belajar_id","item-title":"nama",loading:a(I),disabled:a(I),"error-messages":a(b).rombongan_belajar_id},null,8,["modelValue","items","loading","disabled","error-messages"])]),_:1})]),_:1})]),_:1}),t(d,{cols:"12"},{default:l(()=>[t(v,{"no-gutters":""},{default:l(()=>[t(d,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>e[22]||(e[22]=[i("label",{class:"v-label text-body-2 text-high-emphasis",for:"penguji_internal"},"Penguji Internal",-1)])),_:1}),t(d,{cols:"12",md:"9"},{default:l(()=>[t(r,{modelValue:a(u).penguji_internal,"onUpdate:modelValue":e[5]||(e[5]=n=>a(u).penguji_internal=n),placeholder:"== Pilih Penguji Internal ==",items:a(Y),clearable:"","clear-icon":"tabler-x","item-value":"guru_id","item-title":"nama_lengkap",loading:a(D),disabled:a(D),"error-messages":a(b).penguji_internal},null,8,["modelValue","items","loading","disabled","error-messages"])]),_:1})]),_:1})]),_:1}),t(d,{cols:"12"},{default:l(()=>[t(v,{"no-gutters":""},{default:l(()=>[t(d,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>e[23]||(e[23]=[i("label",{class:"v-label text-body-2 text-high-emphasis",for:"penguji_eksternal"},"Penguji Eksternal",-1)])),_:1}),t(d,{cols:"12",md:"9"},{default:l(()=>[t(r,{modelValue:a(u).penguji_eksternal,"onUpdate:modelValue":e[6]||(e[6]=n=>a(u).penguji_eksternal=n),placeholder:"== Pilih Penguji Eksternal ==",items:a(W),clearable:"","clear-icon":"tabler-x","item-value":"guru_id","item-title":"nama_lengkap",loading:a(D),disabled:a(D),"error-messages":a(b).penguji_eksternal},null,8,["modelValue","items","loading","disabled","error-messages"])]),_:1})]),_:1})]),_:1}),t(d,{cols:"12"},{default:l(()=>[t(v,{"no-gutters":""},{default:l(()=>[t(d,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>e[24]||(e[24]=[i("label",{class:"v-label text-body-2 text-high-emphasis",for:"tanggal"},"Tanggal Sertifikat",-1)])),_:1}),t(d,{cols:"12",md:"9"},{default:l(()=>[t(we,{modelValue:a(u).tanggal,"onUpdate:modelValue":[e[7]||(e[7]=n=>a(u).tanggal=n),je],placeholder:"== Pilih Tanggal Sertifikat ==",config:a(ae)},null,8,["modelValue","config"])]),_:1})]),_:1})]),_:1}),t(d,{cols:"12"},{default:l(()=>[t(v,{"no-gutters":""},{default:l(()=>[t(d,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>e[25]||(e[25]=[i("label",{class:"v-label text-body-2 text-high-emphasis",for:"paket_ukk_id"},"Paket Kompetensi",-1)])),_:1}),t(d,{cols:"12",md:"9"},{default:l(()=>[t(r,{modelValue:a(u).paket_ukk_id,"onUpdate:modelValue":[e[8]||(e[8]=n=>a(u).paket_ukk_id=n),he],placeholder:"== Pilih Paket Kompetensi ==",items:a(X),clearable:"","clear-icon":"tabler-x","item-value":"paket_ukk_id","item-title":"nama_paket_id",loading:a(B),disabled:a(B),"error-messages":a(b).paket_ukk_id},null,8,["modelValue","items","loading","disabled","error-messages"])]),_:1})]),_:1})]),_:1}),a(G)?(k(),O(d,{key:0,cols:"12",class:"text-center"},{default:l(()=>[t(Qe,{size:60,indeterminate:"",color:"error",class:"my-10"})]),_:1})):f("",!0)]),_:1})):f("",!0)]),table:l(()=>[a(c)=="detil"?(k(),O(me,{key:0,class:"text-no-wrap"},{default:l(()=>{var n,P,E,oe;return[i("tbody",null,[i("tr",null,[e[26]||(e[26]=i("td",null,"Paket UKK",-1)),i("td",null,C((P=(n=a(A))==null?void 0:n.paket_ukk)==null?void 0:P.nama_paket_id),1)]),i("tr",null,[e[27]||(e[27]=i("td",null,"Penguji Internal",-1)),i("td",null,[t(g,{item:(E=a(A))==null?void 0:E.guru_internal},null,8,["item"])])]),i("tr",null,[e[28]||(e[28]=i("td",null,"Penguji Eksternal",-1)),i("td",null,[t(g,{item:(oe=a(A))==null?void 0:oe.guru_eksternal},null,8,["item"])])])])]}),_:1})):f("",!0),a(y).length?(k(),_(z,{key:1},[t(ee),t(me,{class:"text-no-wrap","fixed-header":!0},{default:l(()=>[i("thead",null,[i("tr",null,[a(c)=="add"?(k(),_("th",ua,[t(ge,{indeterminate:a(N),"onUpdate:indeterminate":e[9]||(e[9]=n=>K(N)?N.value=n:null),modelValue:a(x),"onUpdate:modelValue":e[10]||(e[10]=n=>K(x)?x.value=n:null),onChange:ce},null,8,["indeterminate","modelValue"])])):f("",!0),e[32]||(e[32]=i("th",null,"Nama Peserta Didik",-1)),a(c)=="detil"?(k(),_(z,{key:1},[e[29]||(e[29]=i("th",{class:"text-center"},"Nilai",-1)),e[30]||(e[30]=i("th",{class:"text-center"},"Kesimpulan",-1)),e[31]||(e[31]=i("th",{class:"text-center"},"Cetak",-1))],64)):f("",!0)])]),i("tbody",null,[(k(!0),_(z,null,qe(a(y),n=>{var P;return k(),_("tr",null,[a(c)=="add"?(k(),_("td",da,[t(ge,{modelValue:a(u).selected,"onUpdate:modelValue":e[11]||(e[11]=E=>a(u).selected=E),value:`${n.peserta_didik_id}#${n.anggota_rombel.anggota_rombel_id}`},null,8,["modelValue","value"])])):f("",!0),i("td",null,[t(Ce,{item:n},null,8,["item"])]),a(c)=="detil"?(k(),_(z,{key:1},[i("td",ma,C((P=n.nilai_ukk)==null?void 0:P.nilai),1),i("td",null,C(De(n)),1),i("td",ga,[se(n)?(k(),O(re,{key:0,"prepend-icon":"tabler-printer",color:"success",size:"small",href:se(n),target:"_blank"},{default:l(()=>e[33]||(e[33]=[w("Cetak")])),_:2},1032,["href"])):f("",!0)])],64)):f("",!0)])}),256))])]),_:1})],64)):f("",!0)]),_:1},8,["isDialogVisible","dialog-title","errors","isSubmitBtn"]),t(Ue,{isDialogVisible:a(R),"onUpdate:isDialogVisible":e[13]||(e[13]=n=>K(R)?R.value=n:null),isNotifVisible:a(U),"onUpdate:isNotifVisible":e[14]||(e[14]=n=>K(U)?U.value=n:null),"confirmation-question":"Apakah Anda yakin?","confirmation-text":a(le),"confirm-color":a($).color,"confirm-title":a($).title,"confirm-msg":a($).text,onConfirm:be,onClose:ve},null,8,["isDialogVisible","isNotifVisible","confirmation-text","confirm-color","confirm-title","confirm-msg"])])}}};export{Ha as default};
