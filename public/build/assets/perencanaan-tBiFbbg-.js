import{d as B,a as N,t as ma}from"./mixins-RGhIXACJ.js";import{_ as pa}from"./ConfirmDialog-08WhPDIW.js";import{_ as ga}from"./DefaultDialog-DPMyDRYz.js";import{i as _a,_ as fa}from"./id-BDFJfywR.js";import{_ as ba}from"./AppAutocomplete-eFrO9XcG.js";import{_ as ka}from"./TablePagination-DYayjDmr.js";import{_ as ca}from"./AppTextField-5FBXgyoS.js";import{_ as va}from"./AppSelect-CJR4JKz4.js";import{u as Va,c as ya}from"./createUrl-Ba6GRlYQ.js";import{$ as A}from"./api-cKcsNrGa.js";import{V as xa,a as Pa,c as ja,b as Da}from"./VCard-D_lTQokD.js";import{r as p,G as ha,w as G,c as H,b as a,e as t,m as l,a2 as L,F as Y,a as Ta,o as C,aa as z,t as k,v as R,$ as w,d as b,f as W,h as Ca,y as X}from"./main-C3sapBSz.js";import{V as Z}from"./VDivider-CVqQjHI4.js";import{V as g,a as o}from"./VRow-Bxui0UIi.js";import{V as wa}from"./VDataTableServer-TbH6b-7n.js";import{V as Ua}from"./VTooltip-nWVFCeQf.js";import{V as Sa}from"./VMenu-IW7ayEFB.js";import{V as Ia,a as aa,b as ea}from"./VList-CnXl5Ste.js";import{V as $a}from"./VCheckbox-BnISEQaN.js";import"./VDialog-DsNVV9VZ.js";import"./VOverlay-D8CESORm.js";import"./forwardRefs-DWGaNmQL.js";import"./scopeId-BWav40DR.js";import"./VImg-BMjvK6WQ.js";import"./DialogCloseBtn-8zKVCm3d.js";import"./VField-DMGA2emL.js";import"./VLabel-BoDcd68p.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./VSelect-kJg0Kcsb.js";import"./VSelectionControl-CUiD9u5E.js";import"./VAvatar-BdK8wC9P.js";import"./VChip-C7bzxhaf.js";import"./VSlideGroup-CL7KHkCg.js";import"./filter-D3h6iiDO.js";/* empty css                   */import"./index-BxkgbwWS.js";/* empty css              */import"./VTable-BCYREMx6.js";import"./ssrBoot-BE7yGWEF.js";const Ve={__name:"perencanaan",setup(Ka){const r=p({itemsPerPage:10,searchQuery:null,page:1,sortby:"updated_at",sortbydesc:"DESC",rombongan_belajar_id:null}),la=n=>{var e,f;r.value.sortby=(e=n[0])==null?void 0:e.key,r.value.sortbydesc=(f=n[0])==null?void 0:f.order},F=p([]),U=p(0),u=p({table:!1,rombel:!1,dudi:!1,akt_pd:!1}),ta=[{key:"rombongan_belajar",title:"Kelas",sortable:!1},{key:"dudi",title:"DUDI",sortable:!1,align:"center"},{key:"pks",title:"PKS",sortable:!1,align:"center"},{key:"tanggal_mulai_str",title:"Tanggal Mulai",sortable:!0,align:"center"},{key:"tanggal_selesai_str",title:"Tanggal Selesai",sortable:!1,align:"center"},{key:"pd_pkl_count",title:"JML Peserta",sortable:!1,align:"center"},{key:"actions",title:"Aksi",sortable:!1,align:"center"}];ha(async()=>{await S()}),G(r,async()=>{await S()},{deep:!0}),G(()=>r.value.searchQuery,()=>{r.value.page=1});const c=p({user_id:B.user_id,guru_id:B.guru_id,sekolah_id:B.sekolah_id,semester_id:N.semester_id,periode_aktif:N.nama}),S=async()=>{u.value.table=!0;try{let e=(await Va(ya("/praktik-kerja-lapangan",{query:{user_id:c.value.user_id,guru_id:c.value.guru_id,sekolah_id:c.value.sekolah_id,semester_id:c.value.semester_id,periode_aktif:c.value.nama,q:r.value.searchQuery,page:r.value.page,per_page:r.value.itemsPerPage,sortby:r.value.sortby,sortbydesc:r.value.sortbydesc}}))).data;F.value=e.value.data.data,U.value=e.value.data.total}catch(n){console.error(n)}finally{u.value.table=!1}},i=p({aksi:null,pkl_id:null,tingkat:null,rombongan_belajar_id:null,dudi_id:null,akt_pd_id:null,tanggal_mulai:null,tanggal_selesai:null,instruktur:null,nip:null,tp_id:[]}),_=p({tingkat:null,rombongan_belajar_id:null,dudi_id:null,akt_pd_id:null,tanggal_mulai:null,tanggal_selesai:null,instruktur:null}),m=p({rombel:[],dudi:[],akt_pd:[],tp:[]}),P=p(!1),v=p(!1),V=p(!1),j=p(!1),y=p({color:null,title:null,text:null}),D=p(),ia=()=>{i.value.aksi="add",v.value=!0,D.value="Tambah Perencanaan Penilaian PKL"},I=async(n,e)=>{i.value.aksi=n,i.value.pkl_id=e.pkl_id,n=="hapus"?j.value=!0:await x({data:"detil"}).then(()=>{v.value=!0}),n=="edit"&&(D.value="Edit Perencanaan Penilaian PKL"),n=="detil"&&(D.value="Detil Perencanaan Penilaian PKL")},$=()=>{i.value={aksi:null,pkl_id:null,tingkat:null,rombongan_belajar_id:null,dudi_id:null,akt_pd_id:null,tanggal_mulai:null,tanggal_selesai:null,instruktur:null,nip:null,tp_id:[]},_.value={tingkat:null,rombongan_belajar_id:null,dudi_id:null,akt_pd_id:null,tanggal_mulai:null,tanggal_selesai:null,instruktur:null},m.value={rombel:[],dudi:[],akt_pd:[],tp:[]},P.value=!1},sa=async n=>{if(n){const e={...c.value,...i.value};await A("/praktik-kerja-lapangan/save",{method:"POST",body:e,onResponse({response:f}){let d=f._data;d.errors?_.value=d.errors:($(),v.value=!1,V.value=!0,y.value=d)}})}else $()},x=async n=>{const e={...n,...c.value,...i.value};await A("/praktik-kerja-lapangan/get-data",{method:"POST",body:e,async onResponse({response:f}){let d=f._data;n.data=="rombel"&&(m.value.rombel=d),n.data=="dudi"&&(m.value.dudi=d),n.data=="akt-pd"&&(m.value.akt_pd=d),n.data=="tp"&&(m.value.tp=d,d.length&&(P.value=!0)),n.data=="detil"&&(i.value.tingkat=d.rombongan_belajar.tingkat,i.value.tanggal_mulai=d.tanggal_mulai,i.value.tanggal_selesai=d.tanggal_selesai,i.value.instruktur=d.instruktur,i.value.nip=d.nip,d.tp_pkl.forEach(K=>{i.value.tp_id.push(K.tp_id)}),P.value=!0,await M(d.rombongan_belajar.tingkat),i.value.rombongan_belajar_id=d.rombongan_belajar_id,await E(d.rombongan_belajar_id),i.value.dudi_id=d.dudi.dudi_id,await Q(d.dudi.dudi_id),i.value.akt_pd_id=d.akt_pd_id,await q(d.akt_pd_id))}})},M=async n=>{i.value.rombongan_belajar_id=null,i.value.dudi_id=null,i.value.akt_pd_id=null,m.value.rombel=[],m.value.dudi=[],m.value.akt_pd=[],n&&(u.value.rombel=!0,await x({data:"rombel",tingkat:n}).then(()=>{u.value.rombel=!1}))},E=async n=>{i.value.dudi_id=null,i.value.akt_pd_id=null,m.value.dudi=[],m.value.akt_pd=[],n&&(u.value.dudi=!0,await x({data:"dudi",tingkat:n}).then(()=>{u.value.dudi=!1}))},Q=async n=>{i.value.akt_pd_id=null,m.value.tp=[],n&&(u.value.akt_pd=!0,await x({data:"akt-pd",tingkat:n}).then(()=>{u.value.akt_pd=!1}))},q=async n=>{n&&(u.value.body=!0,await x({data:"tp",tingkat:n}).then(()=>{u.value.body=!1}))},O=p({locale:_a.Indonesian,altFormat:"j F Y",altInput:!0}),na=async n=>{n&&await A("/praktik-kerja-lapangan/save",{method:"POST",body:{aksi:"hapus",pkl_id:pklID.value},onResponse({response:e}){let f=e._data;v.value=!1,V.value=!0,y.value=f}})},oa=async()=>{await S().then(()=>{$()})};return(n,e)=>{const f=va,d=ca,K=Ta("IconBtn"),da=ka,h=ba,J=fa,ra=ga,ua=pa;return C(),H(Y,null,[a(xa,{class:"mb-6"},{default:t(()=>[a(Pa,{class:"pb-4"},{append:t(()=>[a(z,{"prepend-icon":"tabler-plus",onClick:ia},{default:t(()=>e[16]||(e[16]=[k(" Tambah Data ")])),_:1})]),default:t(()=>[a(ja,null,{default:t(()=>e[15]||(e[15]=[k("Rencana Penilaian PKL")])),_:1})]),_:1}),a(Z),a(Da,null,{default:t(()=>[a(g,null,{default:t(()=>[a(o,{cols:"12",md:"4"},{default:t(()=>[a(f,{modelValue:l(r).itemsPerPage,"onUpdate:modelValue":e[0]||(e[0]=s=>l(r).itemsPerPage=s),items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"}]},null,8,["modelValue"])]),_:1}),a(o,{cols:"12",md:"4","offset-md":"4"},{default:t(()=>[a(d,{modelValue:l(r).searchQuery,"onUpdate:modelValue":e[1]||(e[1]=s=>l(r).searchQuery=s),placeholder:"Cari Data"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(Z),a(wa,{items:l(F),"server-items-length":l(U),headers:ta,options:l(r),loading:l(u).table,"loading-text":"Loading...","onUpdate:sortBy":la},{"item.rombongan_belajar":t(({item:s})=>[k(R(s.rombongan_belajar.nama),1)]),"item.dudi":t(({item:s})=>[k(R(s.akt_pd.dudi.nama),1)]),"item.pks":t(({item:s})=>[k(R(s.akt_pd.judul_akt_pd),1)]),"item.actions":t(({item:s})=>[a(K,{onClick:T=>I("detil",s)},{default:t(()=>[a(Ua,{activator:"parent",location:"top"},{default:t(()=>e[17]||(e[17]=[k(" Detil Data ")])),_:1}),a(w,{icon:"tabler-search"})]),_:2},1032,["onClick"]),a(z,{icon:"",variant:"text",color:"medium-emphasis"},{default:t(()=>[a(w,{icon:"tabler-dots-vertical"}),a(Sa,{activator:"parent"},{default:t(()=>[a(Ia,null,{default:t(()=>[a(aa,{onClick:T=>I("edit",s)},{prepend:t(()=>[a(w,{icon:"tabler-pencil"})]),default:t(()=>[a(ea,null,{default:t(()=>e[18]||(e[18]=[k("Ubah Data")])),_:1})]),_:2},1032,["onClick"]),a(aa,{onClick:T=>I("hapus",s)},{prepend:t(()=>[a(w,{icon:"tabler-trash"})]),default:t(()=>[a(ea,null,{default:t(()=>e[19]||(e[19]=[k("Hapus Data")])),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),bottom:t(()=>[a(da,{page:l(r).page,"onUpdate:page":e[2]||(e[2]=s=>l(r).page=s),"items-per-page":l(r).itemsPerPage,"total-items":l(U)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items","server-items-length","options","loading"])]),_:1}),a(ra,{isDialogVisible:l(v),"onUpdate:isDialogVisible":e[12]||(e[12]=s=>L(v)?v.value=s:null),"dialog-title":l(D),errors:l(_),isSubmitBtn:l(i).aksi=="add"||l(i).aksi=="edit",onConfirm:sa},{content:t(()=>[a(g,null,{default:t(()=>[a(o,{cols:"12"},{default:t(()=>[a(g,{"no-gutters":""},{default:t(()=>[a(o,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:t(()=>e[20]||(e[20]=[b("label",{class:"v-label text-body-2 text-high-emphasis",for:"semester_id"},"Tahun Pelajaran",-1)])),_:1}),a(o,{cols:"12",md:"9"},{default:t(()=>[a(d,{id:"semester_id",value:("$semester"in n?n.$semester:l(N)).nama,disabled:""},null,8,["value"])]),_:1})]),_:1})]),_:1}),a(o,{cols:"12"},{default:t(()=>[a(g,{"no-gutters":""},{default:t(()=>[a(o,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:t(()=>e[21]||(e[21]=[b("label",{class:"v-label text-body-2 text-high-emphasis",for:"tingkat"},"Tingkat Kelas",-1)])),_:1}),a(o,{cols:"12",md:"9"},{default:t(()=>[a(h,{modelValue:l(i).tingkat,"onUpdate:modelValue":[e[3]||(e[3]=s=>l(i).tingkat=s),M],placeholder:"== Pilih Tingkat kelas ==",items:"tingkatKelas"in n?n.tingkatKelas:l(ma),clearable:"","clear-icon":"tabler-x","error-messages":l(_).tingkat,disabled:l(i).aksi=="detil"},null,8,["modelValue","items","error-messages","disabled"])]),_:1})]),_:1})]),_:1}),a(o,{cols:"12"},{default:t(()=>[a(g,{"no-gutters":""},{default:t(()=>[a(o,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:t(()=>e[22]||(e[22]=[b("label",{class:"v-label text-body-2 text-high-emphasis",for:"rombongan_belajar_id"},"Rombongan Belajar",-1)])),_:1}),a(o,{cols:"12",md:"9"},{default:t(()=>[a(h,{modelValue:l(i).rombongan_belajar_id,"onUpdate:modelValue":[e[4]||(e[4]=s=>l(i).rombongan_belajar_id=s),E],placeholder:"== Pilih Rombongan Belajar == ",items:l(m).rombel,clearable:"","clear-icon":"tabler-x","item-value":"rombongan_belajar_id","item-title":"nama",loading:l(u).rombel,disabled:l(u).rombel||l(i).aksi=="detil","error-messages":l(_).rombongan_belajar_id},null,8,["modelValue","items","loading","disabled","error-messages"])]),_:1})]),_:1})]),_:1}),a(o,{cols:"12"},{default:t(()=>[a(g,{"no-gutters":""},{default:t(()=>[a(o,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:t(()=>e[23]||(e[23]=[b("label",{class:"v-label text-body-2 text-high-emphasis",for:"dudi_id"},"DUDI",-1)])),_:1}),a(o,{cols:"12",md:"9"},{default:t(()=>[a(h,{modelValue:l(i).dudi_id,"onUpdate:modelValue":[e[5]||(e[5]=s=>l(i).dudi_id=s),Q],placeholder:"== Pilih DUDI == ",items:l(m).dudi,clearable:"","clear-icon":"tabler-x","item-value":"dudi_id","item-title":"nama",loading:l(u).dudi,disabled:l(u).dudi||l(i).aksi=="detil","error-messages":l(_).dudi_id},null,8,["modelValue","items","loading","disabled","error-messages"])]),_:1})]),_:1})]),_:1}),a(o,{cols:"12"},{default:t(()=>[a(g,{"no-gutters":""},{default:t(()=>[a(o,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:t(()=>e[24]||(e[24]=[b("label",{class:"v-label text-body-2 text-high-emphasis",for:"akt_pd_id"},"Perjanjian Kerja Sama (PKS)",-1)])),_:1}),a(o,{cols:"12",md:"9"},{default:t(()=>[a(h,{modelValue:l(i).akt_pd_id,"onUpdate:modelValue":[e[6]||(e[6]=s=>l(i).akt_pd_id=s),q],placeholder:"== Pilih Perjanjian Kerja Sama (PKS) == ",items:l(m).akt_pd,clearable:"","clear-icon":"tabler-x","item-value":"akt_pd_id","item-title":"judul_akt_pd",loading:l(u).akt_pd,disabled:l(u).akt_pd||l(i).aksi=="detil","error-messages":l(_).akt_pd_id},null,8,["modelValue","items","loading","disabled","error-messages"])]),_:1})]),_:1})]),_:1}),a(o,{cols:"12"},{default:t(()=>[a(g,{"no-gutters":""},{default:t(()=>[a(o,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:t(()=>e[25]||(e[25]=[b("label",{class:"v-label text-body-2 text-high-emphasis",for:"tanggal_mulai"},"Tanggal Mulai",-1)])),_:1}),a(o,{cols:"12",md:"9"},{default:t(()=>[a(J,{modelValue:l(i).tanggal_mulai,"onUpdate:modelValue":e[7]||(e[7]=s=>l(i).tanggal_mulai=s),placeholder:"== Pilih Tanggal Mulai ==",config:l(O),"error-messages":l(_).tanggal_mulai,disabled:l(i).aksi=="detil"},null,8,["modelValue","config","error-messages","disabled"])]),_:1})]),_:1})]),_:1}),a(o,{cols:"12"},{default:t(()=>[a(g,{"no-gutters":""},{default:t(()=>[a(o,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:t(()=>e[26]||(e[26]=[b("label",{class:"v-label text-body-2 text-high-emphasis",for:"tanggal_mulai"},"Tanggal Selesai",-1)])),_:1}),a(o,{cols:"12",md:"9"},{default:t(()=>[a(J,{modelValue:l(i).tanggal_selesai,"onUpdate:modelValue":e[8]||(e[8]=s=>l(i).tanggal_selesai=s),placeholder:"== Pilih Tanggal Selesai ==",config:l(O),"error-messages":l(_).tanggal_selesai,disabled:l(i).aksi=="detil"},null,8,["modelValue","config","error-messages","disabled"])]),_:1})]),_:1})]),_:1}),a(o,{cols:"12"},{default:t(()=>[a(g,{"no-gutters":""},{default:t(()=>[a(o,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:t(()=>e[27]||(e[27]=[b("label",{class:"v-label text-body-2 text-high-emphasis",for:"instruktur"},"Instruktur",-1)])),_:1}),a(o,{cols:"12",md:"9"},{default:t(()=>[a(d,{modelValue:l(i).instruktur,"onUpdate:modelValue":e[9]||(e[9]=s=>l(i).instruktur=s),placeholder:"Nama Instruktur","error-messages":l(_).instruktur,disabled:l(i).aksi=="detil"},null,8,["modelValue","error-messages","disabled"])]),_:1})]),_:1})]),_:1}),a(o,{cols:"12"},{default:t(()=>[a(g,{"no-gutters":""},{default:t(()=>[a(o,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:t(()=>e[28]||(e[28]=[b("label",{class:"v-label text-body-2 text-high-emphasis",for:"nip"},"NIP",-1)])),_:1}),a(o,{cols:"12",md:"9"},{default:t(()=>[a(d,{modelValue:l(i).nip,"onUpdate:modelValue":e[10]||(e[10]=s=>l(i).nip=s),placeholder:"NIP Instruktur (Jika ada)",disabled:l(i).aksi=="detil"},null,8,["modelValue","disabled"])]),_:1})]),_:1})]),_:1}),l(P)?(C(),W(o,{key:0,cols:"12"},{default:t(()=>[a(g,{"no-gutters":""},{default:t(()=>[a(o,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:t(()=>e[29]||(e[29]=[b("label",{class:"v-label text-body-2 text-high-emphasis",for:"tp"},"Tujuan Pembelajaran",-1)])),_:1}),a(o,{cols:"12",md:"9"},{default:t(()=>[l(m).tp?(C(!0),H(Y,{key:0},Ca(l(m).tp,s=>(C(),W($a,{key:s.tp_id,modelValue:l(i).tp_id,"onUpdate:modelValue":e[11]||(e[11]=T=>l(i).tp_id=T),label:s.deskripsi,value:s.tp_id,disabled:l(i).aksi=="detil"},null,8,["modelValue","label","value","disabled"]))),128)):X("",!0)]),_:1})]),_:1})]),_:1})):X("",!0)]),_:1})]),_:1},8,["isDialogVisible","dialog-title","errors","isSubmitBtn"]),a(ua,{isDialogVisible:l(j),"onUpdate:isDialogVisible":e[13]||(e[13]=s=>L(j)?j.value=s:null),isNotifVisible:l(V),"onUpdate:isNotifVisible":e[14]||(e[14]=s=>L(V)?V.value=s:null),"confirmation-question":"Apakah Anda yakin?","confirmation-text":"Tindakan ini tidak dapat dikembalikan!","confirm-color":l(y).color,"confirm-title":l(y).title,"confirm-msg":l(y).text,onConfirm:na,onClose:oa},null,8,["isDialogVisible","isNotifVisible","confirm-color","confirm-title","confirm-msg"])],64)}}};export{Ve as default};
