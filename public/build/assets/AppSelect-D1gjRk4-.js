import{a3 as q,av as we,a6 as te,ae as ee,Y as x,a7 as le,aS as Se,b as d,q as O,a4 as xe,bN as Ie,w as $,F as j,bC as Re,aO as F,bx as de,r as z,bp as Pe,bw as se,bO as _e,ap as Ce,ag as re,aJ as Be,aN as De,aK as Oe,Z as Fe,bo as Ee,G as Le,aR as X,be as Me,a_ as $e,$ as fe,bP as He,aj as Ne,t as Ue,bQ as me,bB as ve,bR as pe,bS as ze,o as he,c as qe,m as Z,f as Ke,y as je,a9 as We,h as Ye,e as Ge,z as Je,bT as ge,bU as Ve,x as Qe}from"./main-DOWoIBhU.js";import{b as Xe,a as Ze}from"./VLabel-Hm2kl-Y1.js";import{m as et,V as be}from"./AppTextField-DGISkcON.js";import{f as tt}from"./forwardRefs-DWGaNmQL.js";import{m as lt,u as nt,V as at,a as ye}from"./VList-DWH4RJSa.js";import{m as ot}from"./VImg-DYyAcwaz.js";import{g as st,a as ut}from"./VOverlay-Cnf91z5i.js";import{V as rt}from"./VMenu-DeAbbdJl.js";import{m as it,V as ke}from"./VSelectionControl-C8KMTZZ4.js";import{V as ct}from"./VAvatar-B-Z9vLfD.js";import{V as dt}from"./VChip-Tdr48uqn.js";const ft=q({indeterminate:Boolean,indeterminateIcon:{type:we,default:"$checkboxIndeterminate"},...it({falseIcon:"$checkboxOff",trueIcon:"$checkboxOn"})},"VCheckboxBtn"),mt=te()({name:"VCheckboxBtn",props:ft(),emits:{"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,i){let{slots:l}=i;const u=ee(e,"indeterminate"),o=ee(e,"modelValue");function f(a){u.value&&(u.value=!1)}const v=x(()=>u.value?e.indeterminateIcon:e.falseIcon),s=x(()=>u.value?e.indeterminateIcon:e.trueIcon);return le(()=>{const a=Se(ke.filterProps(e),["modelValue"]);return d(ke,O(a,{modelValue:o.value,"onUpdate:modelValue":[p=>o.value=p,f],class:["v-checkbox-btn",e.class],style:e.style,type:"checkbox",falseIcon:v.value,trueIcon:s.value,"aria-checked":u.value?"mixed":void 0}),l)}),{}}}),vt=q({renderless:Boolean,...xe()},"VVirtualScrollItem"),pt=te()({name:"VVirtualScrollItem",inheritAttrs:!1,props:vt(),emits:{"update:height":e=>!0},setup(e,i){let{attrs:l,emit:u,slots:o}=i;const{resizeRef:f,contentRect:v}=Ie(void 0,"border");$(()=>{var s;return(s=v.value)==null?void 0:s.height},s=>{s!=null&&u("update:height",s)}),le(()=>{var s,a;return e.renderless?d(j,null,[(s=o.default)==null?void 0:s.call(o,{itemRef:f})]):d("div",O({ref:f,class:["v-virtual-scroll__item",e.class],style:e.style},l),[(a=o.default)==null?void 0:a.call(o)])})}}),ht=-1,gt=1,ue=100,Vt=q({itemHeight:{type:[Number,String],default:null},height:[Number,String]},"virtual");function bt(e,i){const l=Re(),u=F(0);de(()=>{u.value=parseFloat(e.itemHeight||0)});const o=F(0),f=F(Math.ceil((parseInt(e.height)||l.height.value)/(u.value||16))||1),v=F(0),s=F(0),a=z(),p=z();let R=0;const{resizeRef:B,contentRect:c}=Ie();de(()=>{B.value=a.value});const b=x(()=>{var t;return a.value===document.documentElement?l.height.value:((t=c.value)==null?void 0:t.height)||parseInt(e.height)||0}),E=x(()=>!!(a.value&&p.value&&b.value&&u.value));let P=Array.from({length:i.value.length}),h=Array.from({length:i.value.length});const y=F(0);let w=-1;function L(t){return P[t]||u.value}const C=_e(()=>{const t=performance.now();h[0]=0;const n=i.value.length;for(let m=1;m<=n-1;m++)h[m]=(h[m-1]||0)+L(m-1);y.value=Math.max(y.value,performance.now()-t)},y),W=$(E,t=>{t&&(W(),R=p.value.offsetTop,C.immediate(),_(),~w&&Ce(()=>{re&&window.requestAnimationFrame(()=>{Q(w),w=-1})}))});Pe(()=>{C.clear()});function ne(t,n){const m=P[t],g=u.value;u.value=g?Math.min(u.value,n):n,(m!==n||g!==u.value)&&(P[t]=n,C())}function S(t){return t=se(t,0,i.value.length-1),h[t]||0}function Y(t){return yt(h,t)}let H=0,M=0,K=0;$(b,(t,n)=>{n&&(_(),t<n&&requestAnimationFrame(()=>{M=0,_()}))});function G(){if(!a.value||!p.value)return;const t=a.value.scrollTop,n=performance.now();n-K>500?(M=Math.sign(t-H),R=p.value.offsetTop):M=t-H,H=t,K=n,_()}function N(){!a.value||!p.value||(M=0,K=0,_())}let J=-1;function _(){cancelAnimationFrame(J),J=requestAnimationFrame(ae)}function ae(){if(!a.value||!b.value)return;const t=H-R,n=Math.sign(M),m=Math.max(0,t-ue),g=se(Y(m),0,i.value.length),T=t+b.value+ue,r=se(Y(T)+1,g+1,i.value.length);if((n!==ht||g<o.value)&&(n!==gt||r>f.value)){const V=S(o.value)-S(g),k=S(r)-S(f.value);Math.max(V,k)>ue?(o.value=g,f.value=r):(g<=0&&(o.value=g),r>=i.value.length&&(f.value=r))}v.value=S(o.value),s.value=S(i.value.length)-S(f.value)}function Q(t){const n=S(t);!a.value||t&&!n?w=t:a.value.scrollTop=n}const oe=x(()=>i.value.slice(o.value,f.value).map((t,n)=>({raw:t,index:n+o.value})));return $(i,()=>{P=Array.from({length:i.value.length}),h=Array.from({length:i.value.length}),C.immediate(),_()},{deep:!0}),{calculateVisibleItems:_,containerRef:a,markerRef:p,computedItems:oe,paddingTop:v,paddingBottom:s,scrollToIndex:Q,handleScroll:G,handleScrollend:N,handleItemResize:ne}}function yt(e,i){let l=e.length-1,u=0,o=0,f=null,v=-1;if(e[l]<i)return l;for(;u<=l;)if(o=u+l>>1,f=e[o],f>i)l=o-1;else if(f<i)v=o,u=o+1;else return f===i?o:u;return v}const kt=q({items:{type:Array,default:()=>[]},renderless:Boolean,...Vt(),...xe(),...Be()},"VVirtualScroll"),wt=te()({name:"VVirtualScroll",props:kt(),setup(e,i){let{slots:l}=i;const u=De("VVirtualScroll"),{dimensionStyles:o}=Oe(e),{calculateVisibleItems:f,containerRef:v,markerRef:s,handleScroll:a,handleScrollend:p,handleItemResize:R,scrollToIndex:B,paddingTop:c,paddingBottom:b,computedItems:E}=bt(e,Fe(e,"items"));return Ee(()=>e.renderless,()=>{function P(){var w,L;const y=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";v.value===document.documentElement?(document[y]("scroll",a,{passive:!0}),document[y]("scrollend",p)):((w=v.value)==null||w[y]("scroll",a,{passive:!0}),(L=v.value)==null||L[y]("scrollend",p))}Le(()=>{v.value=st(u.vnode.el,!0),P(!0)}),Pe(P)}),le(()=>{const P=E.value.map(h=>d(pt,{key:h.index,renderless:e.renderless,"onUpdate:height":y=>R(h.index,y)},{default:y=>{var w;return(w=l.default)==null?void 0:w.call(l,{item:h.raw,index:h.index,...y})}}));return e.renderless?d(j,null,[d("div",{ref:s,class:"v-virtual-scroll__spacer",style:{paddingTop:X(c.value)}},null),P,d("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:X(b.value)}},null)]):d("div",{ref:v,class:["v-virtual-scroll",e.class],onScrollPassive:a,onScrollend:p,style:[o.value,e.style]},[d("div",{ref:s,class:"v-virtual-scroll__container",style:{paddingTop:X(c.value),paddingBottom:X(b.value)}},[P])])}),{calculateVisibleItems:f,scrollToIndex:B}}});function St(e,i){const l=F(!1);let u;function o(s){cancelAnimationFrame(u),l.value=!0,u=requestAnimationFrame(()=>{u=requestAnimationFrame(()=>{l.value=!1})})}async function f(){await new Promise(s=>requestAnimationFrame(s)),await new Promise(s=>requestAnimationFrame(s)),await new Promise(s=>requestAnimationFrame(s)),await new Promise(s=>{if(l.value){const a=$(l,()=>{a(),s()})}else s()})}async function v(s){var R,B;if(s.key==="Tab"&&((R=i.value)==null||R.focus()),!["PageDown","PageUp","Home","End"].includes(s.key))return;const a=(B=e.value)==null?void 0:B.$el;if(!a)return;(s.key==="Home"||s.key==="End")&&a.scrollTo({top:s.key==="Home"?0:a.scrollHeight,behavior:"smooth"}),await f();const p=a.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(s.key==="PageDown"||s.key==="Home"){const c=a.getBoundingClientRect().top;for(const b of p)if(b.getBoundingClientRect().top>=c){b.focus();break}}else{const c=a.getBoundingClientRect().bottom;for(const b of[...p].reverse())if(b.getBoundingClientRect().bottom<=c){b.focus();break}}}return{onScrollPassive:o,onKeydown:v}}const xt=q({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:we,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,...lt({itemChildren:!1})},"Select"),It=q({...xt(),...Se(et({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...ot({transition:{component:ut}})},"VSelect"),Pt=te()({name:"VSelect",props:It(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,i){let{slots:l}=i;const{t:u}=Me(),o=z(),f=z(),v=z(),s=ee(e,"menu"),a=x({get:()=>s.value,set:t=>{var n;s.value&&!t&&((n=f.value)!=null&&n.Î¨openChildren.size)||(s.value=t)}}),{items:p,transformIn:R,transformOut:B}=nt(e),c=ee(e,"modelValue",[],t=>R(t===null?[null]:$e(t)),t=>{const n=B(t);return e.multiple?n:n[0]??null}),b=x(()=>typeof e.counterValue=="function"?e.counterValue(c.value):typeof e.counterValue=="number"?e.counterValue:c.value.length),E=Xe(e),P=x(()=>c.value.map(t=>t.value)),h=F(!1),y=x(()=>a.value?e.closeText:e.openText);let w="",L;const C=x(()=>e.hideSelected?p.value.filter(t=>!c.value.some(n=>e.valueComparator(n,t))):p.value),W=x(()=>e.hideNoData&&!C.value.length||E.isReadonly.value||E.isDisabled.value),ne=x(()=>{var t;return{...e.menuProps,activatorProps:{...((t=e.menuProps)==null?void 0:t.activatorProps)||{},"aria-haspopup":"listbox"}}}),S=z(),Y=St(S,o);function H(t){e.openOnClear&&(a.value=!0)}function M(){W.value||(a.value=!a.value)}function K(t){me(t)&&G(t)}function G(t){var T,r;if(!t.key||E.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(t.key)&&t.preventDefault(),["Enter","ArrowDown"," "].includes(t.key)&&(a.value=!0),["Escape","Tab"].includes(t.key)&&(a.value=!1),t.key==="Home"?(T=S.value)==null||T.focus("first"):t.key==="End"&&((r=S.value)==null||r.focus("last"));const n=1e3;if(e.multiple||!me(t))return;const m=performance.now();m-L>n&&(w=""),w+=t.key.toLowerCase(),L=m;const g=p.value.find(V=>V.title.toLowerCase().startsWith(w));if(g!==void 0){c.value=[g];const V=C.value.indexOf(g);re&&window.requestAnimationFrame(()=>{var k;V>=0&&((k=v.value)==null||k.scrollToIndex(V))})}}function N(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!t.props.disabled)if(e.multiple){const m=c.value.findIndex(T=>e.valueComparator(T.value,t.value)),g=n??!~m;if(~m){const T=g?[...c.value,t]:[...c.value];T.splice(m,1),c.value=T}else g&&(c.value=[...c.value,t])}else{const m=n!==!1;c.value=m?[t]:[],Ce(()=>{a.value=!1})}}function J(t){var n;(n=S.value)!=null&&n.$el.contains(t.relatedTarget)||(a.value=!1)}function _(){var t;e.eager&&((t=v.value)==null||t.calculateVisibleItems())}function ae(){var t;h.value&&((t=o.value)==null||t.focus())}function Q(t){h.value=!0}function oe(t){if(t==null)c.value=[];else if(ve(o.value,":autofill")||ve(o.value,":-webkit-autofill")){const n=p.value.find(m=>m.title===t);n&&N(n)}else o.value&&(o.value.value="")}return $(a,()=>{if(!e.hideSelected&&a.value&&c.value.length){const t=C.value.findIndex(n=>c.value.some(m=>e.valueComparator(m.value,n.value)));re&&window.requestAnimationFrame(()=>{var n;t>=0&&((n=v.value)==null||n.scrollToIndex(t))})}}),$(()=>e.items,(t,n)=>{a.value||h.value&&!n.length&&t.length&&(a.value=!0)}),le(()=>{const t=!!(e.chips||l.chip),n=!!(!e.hideNoData||C.value.length||l["prepend-item"]||l["append-item"]||l["no-data"]),m=c.value.length>0,g=be.filterProps(e),T=m||!h.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return d(be,O({ref:o},g,{modelValue:c.value.map(r=>r.props.value).join(", "),"onUpdate:modelValue":oe,focused:h.value,"onUpdate:focused":r=>h.value=r,validationValue:c.externalValue,counterValue:b.value,dirty:m,class:["v-select",{"v-select--active-menu":a.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":c.value.length,"v-select--selection-slot":!!l.selection},e.class],style:e.style,inputmode:"none",placeholder:T,"onClick:clear":H,"onMousedown:control":M,onBlur:J,onKeydown:G,"aria-label":u(y.value),title:u(y.value)}),{...l,default:()=>d(j,null,[d(rt,O({ref:f,modelValue:a.value,"onUpdate:modelValue":r=>a.value=r,activator:"parent",contentClass:"v-select__content",disabled:W.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:_,onAfterLeave:ae},ne.value),{default:()=>[n&&d(at,O({ref:S,selected:P.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:r=>r.preventDefault(),onKeydown:K,onFocusin:Q,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},Y,e.listProps),{default:()=>{var r,V,k;return[(r=l["prepend-item"])==null?void 0:r.call(l),!C.value.length&&!e.hideNoData&&(((V=l["no-data"])==null?void 0:V.call(l))??d(ye,{title:u(e.noDataText)},null)),d(wt,{ref:v,renderless:!0,items:C.value},{default:D=>{var ce;let{item:A,index:U,itemRef:I}=D;const ie=O(A.props,{ref:I,key:U,onClick:()=>N(A,null)});return((ce=l.item)==null?void 0:ce.call(l,{item:A,index:U,props:ie}))??d(ye,O(ie,{role:"option"}),{prepend:Te=>{let{isSelected:Ae}=Te;return d(j,null,[e.multiple&&!e.hideSelected?d(mt,{key:A.value,modelValue:Ae,ripple:!1,tabindex:"-1"},null):void 0,A.props.prependAvatar&&d(ct,{image:A.props.prependAvatar},null),A.props.prependIcon&&d(fe,{icon:A.props.prependIcon},null)])}})}}),(k=l["append-item"])==null?void 0:k.call(l)]}})]}),c.value.map((r,V)=>{function k(I){I.stopPropagation(),I.preventDefault(),N(r,!1)}const D={"onClick:close":k,onKeydown(I){I.key!=="Enter"&&I.key!==" "||(I.preventDefault(),I.stopPropagation(),k(I))},onMousedown(I){I.preventDefault(),I.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},A=t?!!l.chip:!!l.selection,U=A?He(t?l.chip({item:r,index:V,props:D}):l.selection({item:r,index:V})):void 0;if(!(A&&!U))return d("div",{key:r.value,class:"v-select__selection"},[t?l.chip?d(Ne,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:r.title}}},{default:()=>[U]}):d(dt,O({key:"chip",closable:e.closableChips,size:"small",text:r.title,disabled:r.props.disabled},D),null):U??d("span",{class:"v-select__selection-text"},[r.title,e.multiple&&V<c.value.length-1&&d("span",{class:"v-select__selection-comma"},[Ue(",")])])])})]),"append-inner":function(){var D;for(var r=arguments.length,V=new Array(r),k=0;k<r;k++)V[k]=arguments[k];return d(j,null,[(D=l["append-inner"])==null?void 0:D.call(l,...V),e.menuIcon?d(fe,{class:"v-select__menu-icon",icon:e.menuIcon},null):void 0])}})}),tt({isFocused:h,menu:a,select:N},o)}}),Mt=Object.assign({name:"AppSelect",inheritAttrs:!1},{__name:"AppSelect",setup(e){const i=x(()=>{const o=pe().id,f=ze();return o?`app-select-${o}`:f}),l=x(()=>pe().label);return(u,o)=>(he(),qe("div",{class:Qe(["app-select flex-grow-1",u.$attrs.class])},[Z(l)?(he(),Ke(Ze,{key:0,for:Z(i),class:"mb-1 text-body-2",style:{"line-height":"15px"},text:Z(l)},null,8,["for","text"])):je("",!0),d(Pt,ge(Ve({...u.$attrs,class:null,label:void 0,variant:"outlined",id:Z(i),menuProps:{contentClass:["app-inner-list","app-select__content","v-select__content",u.$attrs.multiple!==void 0?"v-list-select-multiple":""]}})),We({_:2},[Ye(u.$slots,(f,v)=>({name:v,fn:Ge(s=>[Je(u.$slots,v,ge(Ve(s||{})))])}))]),1040)],2))}});export{mt as V,Mt as _,xt as a,wt as b,Pt as c,ft as m,St as u};
