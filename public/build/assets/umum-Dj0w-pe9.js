import{r as b}from"./validators-CXK_eVNV.js";import{r as i,G as W,c as J,b as t,e as n,m as l,a2 as N,o as m,f as g,am as O,ap as E,d as z,$ as j,aa as Z,t as G}from"./main-BUumBu6a.js";import{_ as H}from"./AlertDialog-D3FX3nmh.js";import{_ as Y}from"./AppTextField-BkZ8OLsx.js";import{i as Q,_ as X}from"./id-Di9BqqWb.js";import{_ as ee}from"./AppSelect-DwS2KVgh.js";import{u as ae,c as le}from"./createUrl-C1_Sm4N7.js";import{d as R,a as B}from"./mixins-CKlf8GuV.js";import{$ as F}from"./api-DGas9VfV.js";import{V as te,b as I}from"./VCard-BpJLDfhD.js";import{V as oe}from"./VDivider-BnEsdsgF.js";import{V as re}from"./VForm-DjKeRf84.js";import{V as h,a as d}from"./VRow-D5VnEZ_i.js";import{V as _}from"./VFileInput-Cc1nStw0.js";import{V as ne}from"./VImg-D2Juqgex.js";import"./VDialog-BEKtFyZX.js";import"./VOverlay-Bb4CDEq4.js";import"./forwardRefs-DWGaNmQL.js";import"./scopeId-CDzN2yrl.js";import"./VLabel-BS4UTjHC.js";/* empty css                   */import"./VField-BQoKA9XH.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./VSelect-CUZzVBlY.js";import"./VList-DzyT1C46.js";import"./ssrBoot-BYz6_xqb.js";import"./VAvatar-Ba-Ggnm6.js";import"./VMenu-CW6Pdemc.js";import"./VSelectionControl-C5g1YuyM.js";import"./VChip-BQa_6tD-.js";import"./VSlideGroup-DCwY19Ye.js";import"./index-BxkgbwWS.js";/* empty css              */const Ce={__name:"umum",setup(de){const c=i(),e=i({semester_id:void 0,tanggal_rapor:void 0,tanggal_rapor_kelas_akhir:void 0,zona:void 0,kepala_sekolah:void 0,jabatan:void 0,rombel_4_tahun:[],url_dapodik:void 0,token_dapodik:void 0,photo:void 0,bg_login:void 0,ttd_kepsek:void 0,ttd_tinggi:void 0,ttd_lebar:void 0,ttd_top:void 0,ttd_left:void 0});W(async()=>{await V()});const S=i([]),T=i([]),U=i([]),K=i(!0),k=i(!1),f=i({color:"",title:"",text:""}),D=i(),y=i(),V=async()=>{try{let a=(await ae(le("/setting",{query:{sekolah_id:R.sekolah_id,semester_id:B.semester_id}}))).data.value;S.value=a.semester,T.value=a.data_guru,U.value=a.data_rombel,D.value=a.bg_login,y.value=a.ttd_kepsek,e.value.semester_id=a.semester_id,e.value.tanggal_rapor=a.tanggal_rapor,e.value.tanggal_rapor_kelas_akhir=a.tanggal_rapor_kelas_akhir,e.value.zona=a.zona,e.value.kepala_sekolah=a.kepala_sekolah,e.value.jabatan=a.jabatan,e.value.rombel_4_tahun=a.rombel_4_tahun,e.value.url_dapodik=a.url_dapodik,e.value.token_dapodik=a.token_dapodik,e.value.ttd_tinggi=a.ttd_tinggi,e.value.ttd_lebar=a.ttd_lebar,e.value.ttd_top=a.ttd_top,e.value.ttd_left=a.ttd_left,a.logo_sekolah&&(P.value=a.logo_sekolah)}catch(r){console.error(r)}finally{K.value=!1}},M=i([{value:"Asia/Jakarta",title:"Waktu Indonesia Barat (WIB)"},{value:"Asia/Makassar",title:"Waktu Indonesia Tengah (WITA)"},{value:"Asia/Jayapura",title:"Waktu Indonesia Timur (WIT)"}]),$=i([{value:"Kepala Sekolah",title:"Kepala Sekolah"},{value:"Plt. Kepala Sekolah",title:"PLT Kepala Sekolah"},{value:"Plh. Kepala Sekolah",title:"PLH Kepala Sekolah"}]),P=i("/images/logo/tutwuri.png"),w=()=>{var r;(r=c.value)==null||r.validate().then(({valid:a})=>{a&&x()})},u=i({jabatan:void 0,semester_id:void 0,zona:void 0,photo:void 0,bg_login:void 0,ttd_kepsek:void 0,ttd_lebar:void 0,ttd_tinggi:void 0,ttd_top:void 0,ttd_left:void 0}),x=async()=>{const r=new FormData;r.append("photo",e.value.photo?e.value.photo:""),r.append("bg_login",e.value.bg_login?e.value.bg_login:""),r.append("ttd_kepsek",e.value.ttd_kepsek?e.value.ttd_kepsek:""),r.append("ttd_lebar",e.value.ttd_lebar?e.value.ttd_lebar:""),r.append("ttd_tinggi",e.value.ttd_tinggi?e.value.ttd_tinggi:""),r.append("ttd_top",e.value.ttd_top?e.value.ttd_top:""),r.append("ttd_left",e.value.ttd_left?e.value.ttd_left:""),r.append("semester_id",e.value.semester_id),r.append("sekolah_id",R.sekolah_id),r.append("semester_aktif",B.semester_id),r.append("tanggal_rapor_pts",e.value.tanggal_rapor_pts?e.value.tanggal_rapor_pts:""),r.append("tanggal_rapor",e.value.tanggal_rapor?e.value.tanggal_rapor:""),r.append("tanggal_rapor_kelas_akhir",e.value.tanggal_rapor_kelas_akhir?e.value.tanggal_rapor_kelas_akhir:""),r.append("zona",e.value.zona?e.value.zona:""),r.append("kepala_sekolah",e.value.kepala_sekolah?e.value.kepala_sekolah:""),r.append("jabatan",e.value.jabatan?e.value.jabatan:""),r.append("rombel_4_tahun",JSON.stringify(e.value.rombel_4_tahun)),r.append("url_dapodik",e.value.url_dapodik?e.value.url_dapodik:""),r.append("token_dapodik",e.value.token_dapodik?e.value.token_dapodik:""),await F("/setting/update",{method:"POST",body:r,onResponse({request:a,response:p,options:v}){let s=p._data;s.errors?u.value=s.errors:(k.value=!0,f.value={color:s.color,title:s.title,text:s.text})}})},C=()=>{V(),e.value.photo=null,e.value.bg_login=null},q=i({locale:Q.Indonesian,altFormat:"j F Y",altInput:!0}),A=async r=>{await F("/setting/reset-setting",{method:"POST",body:{data:r},onResponse(){V()}})};return(r,a)=>{const p=ee,v=X,s=Y,L=H;return m(),J("section",null,[t(te,{title:"Pengaturan Umum"},{default:n(()=>[t(oe),l(K)?(m(),g(I,{key:0,class:"text-center"},{default:n(()=>[t(O,{size:60,indeterminate:"",color:"error"})]),_:1})):(m(),g(I,{key:1},{default:n(()=>[t(re,{ref_key:"refVForm",ref:c,onSubmit:E(w,["prevent"])},{default:n(()=>[t(h,null,{default:n(()=>[t(d,{cols:"7"},{default:n(()=>[t(h,null,{default:n(()=>[t(d,{cols:"12",md:"6"},{default:n(()=>[t(p,{modelValue:l(e).semester_id,"onUpdate:modelValue":a[0]||(a[0]=o=>l(e).semester_id=o),items:l(S),rules:["requiredValidator"in r?r.requiredValidator:l(b)],placeholder:"== Pilih Semester ==",label:"Periode Aktif",name:"semester_id","item-title":"nama","item-value":"semester_id",require:""},null,8,["modelValue","items","rules"])]),_:1}),t(d,{cols:"12",md:"6"},{default:n(()=>[t(v,{modelValue:l(e).tanggal_rapor,"onUpdate:modelValue":a[1]||(a[1]=o=>l(e).tanggal_rapor=o),label:"Tanggal Rapor Semester",placeholder:"== Pilih Tanggal Rapor Semester ==",config:l(q)},null,8,["modelValue","config"])]),_:1}),t(d,{cols:"12",md:"6"},{default:n(()=>[t(v,{modelValue:l(e).tanggal_rapor_kelas_akhir,"onUpdate:modelValue":a[2]||(a[2]=o=>l(e).tanggal_rapor_kelas_akhir=o),label:"Tanggal Rapor Kelas Akhir",placeholder:"== Pilih Tanggal Rapor Kelas Akhir ==",config:l(q)},null,8,["modelValue","config"])]),_:1}),t(d,{cols:"12",md:"6"},{default:n(()=>[t(p,{modelValue:l(e).zona,"onUpdate:modelValue":a[3]||(a[3]=o=>l(e).zona=o),items:l(M),rules:["requiredValidator"in r?r.requiredValidator:l(b)],placeholder:"== Pilih Zona Waktu ==",label:"Zona Waktu",name:"zona",require:""},null,8,["modelValue","items","rules"])]),_:1}),t(d,{cols:"12",md:"6"},{default:n(()=>[t(p,{modelValue:l(e).kepala_sekolah,"onUpdate:modelValue":a[4]||(a[4]=o=>l(e).kepala_sekolah=o),items:l(T),rules:["requiredValidator"in r?r.requiredValidator:l(b)],placeholder:"== Pilih Kepala Sekolah ==",label:"Kepala Sekolah",name:"kepala_sekolah","item-title":"nama_lengkap","item-value":"guru_id",require:""},null,8,["modelValue","items","rules"])]),_:1}),t(d,{cols:"12",md:"6"},{default:n(()=>[t(p,{modelValue:l(e).jabatan,"onUpdate:modelValue":a[5]||(a[5]=o=>l(e).jabatan=o),items:l($),rules:["requiredValidator"in r?r.requiredValidator:l(b)],placeholder:"== Pilih Semester ==",label:"Jabatan Kepala Sekolah",name:"jabatan",require:""},null,8,["modelValue","items","rules"])]),_:1}),t(d,{cols:"12",md:"6"},{default:n(()=>[t(p,{modelValue:l(e).rombel_4_tahun,"onUpdate:modelValue":a[6]||(a[6]=o=>l(e).rombel_4_tahun=o),chips:"",multiple:"","closable-chips":"",items:l(U),placeholder:"== Pilih Rombel 4 Tahun ==",label:"Rombel 4 Tahun",name:"rombel_4_tahun","item-title":"nama","item-value":"rombongan_belajar_id",require:""},null,8,["modelValue","items"])]),_:1}),t(d,{cols:"12",md:"6"},{default:n(()=>[t(s,{modelValue:l(e).url_dapodik,"onUpdate:modelValue":a[7]||(a[7]=o=>l(e).url_dapodik=o),label:"URL Dapodik",placeholder:"Contoh: http://localhost:5774 (tanpa garis miring di akhir!)"},null,8,["modelValue"])]),_:1}),t(d,{cols:"12",md:"6"},{default:n(()=>[t(s,{modelValue:l(e).token_dapodik,"onUpdate:modelValue":a[8]||(a[8]=o=>l(e).token_dapodik=o),label:"Token Web Services Dapodik",placeholder:"Token Web Services Dapodik"},null,8,["modelValue"])]),_:1}),t(d,{cols:"12",md:"6"},{default:n(()=>[a[21]||(a[21]=z("label",{class:"v-label text-body-2 text-high-emphasis",for:"ttd_kepsek"},"Scan TTD Kepala Sekolah",-1)),l(y)?(m(),g(_,{key:0,id:"ttd_kepsek",modelValue:l(e).ttd_kepsek,"onUpdate:modelValue":a[10]||(a[10]=o=>l(e).ttd_kepsek=o),"error-messages":l(u).ttd_kepsek,accept:"image/*",label:"Unggah Scan TTD Kepala Sekolah"},{append:n(()=>[t(j,{icon:"tabler-trash",color:"error",size:"26",onClick:a[9]||(a[9]=o=>A("ttd_kepsek"))})]),_:1},8,["modelValue","error-messages"])):(m(),g(_,{key:1,id:"ttd_kepsek",modelValue:l(e).ttd_kepsek,"onUpdate:modelValue":a[11]||(a[11]=o=>l(e).ttd_kepsek=o),"error-messages":l(u).ttd_kepsek,accept:"image/*",label:"Unggah Scan TTD Kepala Sekolah"},null,8,["modelValue","error-messages"]))]),_:1}),t(d,{cols:"12",md:"6"},{default:n(()=>[t(s,{modelValue:l(e).ttd_tinggi,"onUpdate:modelValue":a[12]||(a[12]=o=>l(e).ttd_tinggi=o),label:"Ukuran Tinggi Scan TTD Kepala Sekolah",placeholder:"Ukuran Tinggi Scan TTD Kepala Sekolah","error-messages":l(u).ttd_tinggi},null,8,["modelValue","error-messages"])]),_:1}),t(d,{cols:"12",md:"6"},{default:n(()=>[t(s,{modelValue:l(e).ttd_lebar,"onUpdate:modelValue":a[13]||(a[13]=o=>l(e).ttd_lebar=o),label:"Ukuran Lebar Scan TTD Kepala Sekolah",placeholder:"Ukuran Lebar Scan TTD Kepala Sekolah","error-messages":l(u).ttd_lebar},null,8,["modelValue","error-messages"])]),_:1}),t(d,{cols:"12",md:"6"},{default:n(()=>[t(s,{modelValue:l(e).ttd_top,"onUpdate:modelValue":a[14]||(a[14]=o=>l(e).ttd_top=o),label:"Minus Margin Atas Scan TTD Kepala Sekolah",placeholder:"Minus Margin Atas Scan TTD Kepala Sekolah","error-messages":l(u).ttd_top},null,8,["modelValue","error-messages"])]),_:1}),t(d,{cols:"12",md:"6"},{default:n(()=>[t(s,{modelValue:l(e).ttd_left,"onUpdate:modelValue":a[15]||(a[15]=o=>l(e).ttd_left=o),label:"Minus Margin Kiri Scan TTD Kepala Sekolah",placeholder:"Minus Margin Kiri Scan TTD Kepala Sekolah","error-messages":l(u).ttd_left},null,8,["modelValue","error-messages"])]),_:1}),t(d,{cols:"12",class:"d-flex gap-4"},{default:n(()=>[t(Z,{type:"submit"},{default:n(()=>a[22]||(a[22]=[G(" Simpan ")])),_:1})]),_:1})]),_:1})]),_:1}),t(d,{cols:"5"},{default:n(()=>[t(h,null,{default:n(()=>[t(d,{cols:"12"},{default:n(()=>[t(ne,{alt:"Logo Sekolah",src:l(P),cover:"",class:"w-80 mx-auto mb-10"},null,8,["src"]),t(_,{modelValue:l(e).photo,"onUpdate:modelValue":a[16]||(a[16]=o=>l(e).photo=o),"error-messages":l(u).photo,accept:"image/*",label:"Unggah Logo Sekolah"},null,8,["modelValue","error-messages"])]),_:1}),t(d,{cols:"12"},{default:n(()=>[a[23]||(a[23]=z("label",{class:"v-label text-body-2 text-high-emphasis",for:"bg_login"},"Kustom Background (Laman Login & Register)",-1)),l(D)?(m(),g(_,{key:0,id:"bg_login",modelValue:l(e).bg_login,"onUpdate:modelValue":a[18]||(a[18]=o=>l(e).bg_login=o),"error-messages":l(u).bg_login,accept:"image/*",label:"Unggah Kustom Background"},{append:n(()=>[t(j,{icon:"tabler-trash",color:"error",size:"26",onClick:a[17]||(a[17]=o=>A("bg_login"))})]),_:1},8,["modelValue","error-messages"])):(m(),g(_,{key:1,id:"bg_login",modelValue:l(e).bg_login,"onUpdate:modelValue":a[19]||(a[19]=o=>l(e).bg_login=o),"error-messages":l(u).bg_login,accept:"image/*",label:"Unggah Kustom Background"},null,8,["modelValue","error-messages"]))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1}))]),_:1}),t(L,{isDialogVisible:l(k),"onUpdate:isDialogVisible":a[20]||(a[20]=o=>N(k)?k.value=o:null),"confirm-color":l(f).color,"confirm-title":l(f).title,"confirm-msg":l(f).text,onConfirm:C},null,8,["isDialogVisible","confirm-color","confirm-title","confirm-msg"])])}}};export{Ce as default};
