import{_ as L}from"./AnggotaRombelDialog-Cxk0-xBe.js";import{_ as Q}from"./TablePagination-JNfKiGBV.js";import{_ as h}from"./AppTextField-BKZKkx6u.js";import{_ as j}from"./AppSelect-DUbA14E0.js";import{u as N,c as q}from"./createUrl-DGqWtwj4.js";import{d as I,a as z}from"./mixins-DrrH0Fyo.js";import{$ as F}from"./api-BUKC6v0J.js";import{V as G,a as K,c as M,b as O}from"./VCard-C9hi6mjk.js";import{V as A}from"./VDivider-HmDD39Wz.js";import{V as H,a as x}from"./VRow-DfcmxFBv.js";import{V as J}from"./VDataTableServer-DUm-lMBM.js";import{V as W}from"./VBadge-tr7eIhl8.js";import{r as n,G as X,w as C,c as Y,b as l,e as r,m as t,a2 as _,o as Z,t as f,v as ee,aa as $,$ as ae}from"./main-BLua-Hcg.js";import"./ConfirmDialog-DyhpdMWt.js";import"./VDialog-C-WyAZXd.js";import"./VOverlay-DLkk1BCg.js";import"./forwardRefs-DWGaNmQL.js";import"./VImg-DwvF1z1X.js";import"./VSpacer-Dj43k9d-.js";/* empty css              */import"./VAvatar-zoFn7cuv.js";import"./VTable-rYr8aSBv.js";import"./VLabel-SCoY3Kbe.js";import"./VList-BJMDW3PL.js";import"./VMenu-DzbcMjTl.js";import"./VSelectionControl-7bPQOZnl.js";import"./VChip-BrDdQYGD.js";import"./index-BxkgbwWS.js";const Ue={__name:"ekstrakurikuler",setup(te){const o=n({page:1,itemsPerPage:10,searchQuery:"",selectedRole:null,sortby:"nama_ekskul",sortbydesc:"ASC"}),w=[{title:"Nama Ekstrakurikuler",key:"nama_ekskul"},{title:"Nama Pembina",key:"guru",sortable:!1},{title:"Prasarana",key:"alamat_ekskul"},{title:"Anggota Ekskul",key:"anggota",align:"center",sortable:!1},{title:"Aksi",key:"sinkron",align:"center",sortable:!1}],y=n([]),k=n(0),b=n(!1);X(async()=>{await V()}),C(o,async()=>{await V()},{deep:!0}),C(()=>o.value.searchQuery,()=>{o.value.page=1});const T=s=>{var e,i;o.value.sortby=(e=s[0])==null?void 0:e.key,o.value.sortbydesc=(i=s[0])==null?void 0:i.order},V=async()=>{b.value=!0;try{let e=(await N(q("/referensi/ekstrakurikuler",{query:{sekolah_id:I.sekolah_id,semester_id:z.semester_id,q:o.value.searchQuery,page:o.value.page,per_page:o.value.itemsPerPage,sortby:o.value.sortby,sortbydesc:o.value.sortbydesc}}))).data;y.value=e.value.data.data,k.value=e.value.data.total}catch(s){console.error(s)}finally{b.value=!1}},m=n(!1),u=n(!1),D=n(""),d=n([]),g=n(),p=n([]),S=async s=>{g.value=s,p.value[s]=!0,u.value=!0,g.value=s,m.value=!0,await F("/referensi/rombongan-belajar/anggota-rombel",{method:"POST",body:{rombongan_belajar_id:g.value},onResponse({request:e,response:i,options:P}){let c=i._data;D.value=`Anggota Ekstrakurikuler Kelas ${c.rombel.nama}`,d.value=c.data,u.value=!1,p.value[s]=!1}})},v=n([]),U=async s=>{v.value[s]=!0,console.log(s)},B=async()=>{getAnggota(g.value)};return(s,e)=>{const i=j,P=h,c=Q,R=L;return Z(),Y("section",null,[l(G,{class:"mb-6"},{default:r(()=>[l(K,{class:"pb-4"},{default:r(()=>[l(M,null,{default:r(()=>e[6]||(e[6]=[f("Data Ekstrakurikuler")])),_:1})]),_:1}),l(A),l(O,null,{default:r(()=>[l(H,null,{default:r(()=>[l(x,{cols:"12",md:"4",class:"d-flex align-items-center"},{default:r(()=>[l(i,{modelValue:t(o).itemsPerPage,"onUpdate:modelValue":e[0]||(e[0]=a=>t(o).itemsPerPage=a),items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"}]},null,8,["modelValue"])]),_:1}),l(x,{cols:"12",md:"4","offset-md":"4",class:"d-flex gap-4"},{default:r(()=>[l(P,{modelValue:t(o).searchQuery,"onUpdate:modelValue":e[1]||(e[1]=a=>t(o).searchQuery=a),placeholder:"Cari Data"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(A),l(J,{class:"text-no-wrap",items:t(y),"server-items-length":t(k),headers:w,options:t(o),loading:t(b),"loading-text":"Loading...","onUpdate:sortBy":T},{"item.guru":r(({item:a})=>[f(ee(a.guru.nama_lengkap),1)]),"item.anggota":r(({item:a})=>[l(W,{content:a.rombongan_belajar.anggota_rombel_count,color:"success"},{default:r(()=>[l($,{loading:t(p)[a.rombongan_belajar_id],disabled:t(p)[a.rombongan_belajar_id],onClick:E=>S(a.rombongan_belajar_id),size:"x-small"},{default:r(()=>e[7]||(e[7]=[f(" Detil ")])),_:2},1032,["loading","disabled","onClick"])]),_:2},1032,["content"])]),"item.sinkron":r(({item:a})=>[l($,{color:"error",onClick:E=>U(a.ekstrakurikuler_id),size:"x-small",loading:t(v)[a.ekstrakurikuler_id],disabled:t(v)[a.ekstrakurikuler_id]},{default:r(()=>[l(ae,{start:"",icon:"tabler-refresh"}),e[8]||(e[8]=f("Sinkron Anggta "))]),_:2},1032,["onClick","loading","disabled"])]),bottom:r(()=>[l(c,{page:t(o).page,"onUpdate:page":e[2]||(e[2]=a=>t(o).page=a),"items-per-page":t(o).itemsPerPage,"total-items":t(k)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items","server-items-length","options","loading"])]),_:1}),l(R,{isDialogVisible:t(m),"onUpdate:isDialogVisible":e[3]||(e[3]=a=>_(m)?m.value=a:null),isLoading:t(u),"onUpdate:isLoading":e[4]||(e[4]=a=>_(u)?u.value=a:null),"dialog-title":t(D),listData:t(d),"onUpdate:listData":e[5]||(e[5]=a=>_(d)?d.value=a:null),onRefresh:B},null,8,["isDialogVisible","isLoading","dialog-title","listData"])])}}};export{Ue as default};
