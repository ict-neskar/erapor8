import{d as L,a as N,t as _a}from"./mixins-CToSDW15.js";import{_ as fa}from"./ConfirmDialog-CY_9uydO.js";import{_ as ba}from"./DefaultDialog-ct8vRYC4.js";import{i as ka,_ as ca}from"./id-CEZ8tx1o.js";import{_ as va}from"./AppAutocomplete-CoTPRzAH.js";import{_ as Va}from"./TablePagination-dMOcUnKX.js";import{_ as ya}from"./AppTextField-BYQvWqvk.js";import{_ as Pa}from"./AppSelect-DbfGRlpP.js";import{u as xa,c as ja}from"./createUrl-jHsYqGLm.js";import{$ as R}from"./api-CqoQuUrQ.js";import{V as Da,a as ha,c as Ta,b as Ca}from"./VCard-CHmpSx-c.js";import{r as p,G as wa,w as Y,c as W,b as e,e as t,m as l,a2 as A,F as X,a as Ua,o as C,aa as Z,t as k,v as F,$ as w,d as g,b$ as Sa,c0 as $a,f as aa,h as Ia,y as ea}from"./main-BpmS5yjl.js";import{V as la}from"./VDivider-gWeRf3Xl.js";import{V as _,a as o}from"./VRow-BacuoGYF.js";import{V as Ka}from"./VDataTableServer-BiJbO0Ws.js";import{V as Ba}from"./VTooltip-Cu9ADd9l.js";import{V as La}from"./VMenu-RpUw0xGr.js";import{V as Na,a as M,b as ta}from"./VList-CAazeH9Z.js";import{V as Ra}from"./VCheckbox-d5A3z2DE.js";import"./VDialog-DmAehLsX.js";import"./VOverlay-yY7p8is2.js";import"./forwardRefs-DWGaNmQL.js";import"./scopeId-DiP191uI.js";import"./VImg-1iDcvPVu.js";import"./DialogCloseBtn-C7kHu8Gc.js";import"./VField-Cktymv3Q.js";import"./VLabel-D6Y69236.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./VSelect-D2E-ncti.js";import"./VSelectionControl-Bjw4k3ug.js";import"./VAvatar-CwdAusxZ.js";import"./VChip-Ce3c0jwR.js";import"./VSlideGroup-ZqIn0ESw.js";import"./filter-B41lvxns.js";/* empty css                   */import"./index-BxkgbwWS.js";/* empty css              */import"./VTable-DH5oZuZ_.js";import"./ssrBoot-C9ygE__7.js";const Aa=["innerHTML"],he={__name:"perencanaan",setup(Fa){const r=p({itemsPerPage:10,searchQuery:null,page:1,sortby:"updated_at",sortbydesc:"DESC",rombongan_belajar_id:null}),ia=n=>{var a,b;r.value.sortby=(a=n[0])==null?void 0:a.key,r.value.sortbydesc=(b=n[0])==null?void 0:b.order},E=p([]),U=p(0),u=p({table:!1,rombel:!1,dudi:!1,akt_pd:!1}),sa=[{key:"rombongan_belajar",title:"Kelas",sortable:!1},{key:"dudi",title:"DUDI",sortable:!1,align:"center"},{key:"pks",title:"PKS",sortable:!1,align:"center"},{key:"tanggal_mulai_str",title:"Tanggal Mulai",sortable:!0,align:"center"},{key:"tanggal_selesai_str",title:"Tanggal Selesai",sortable:!1,align:"center"},{key:"pd_pkl_count",title:"JML Peserta",sortable:!1,align:"center"},{key:"actions",title:"Aksi",sortable:!1,align:"center"}];wa(async()=>{await S()}),Y(r,async()=>{await S()},{deep:!0}),Y(()=>r.value.searchQuery,()=>{r.value.page=1});const v=p({user_id:L.user_id,guru_id:L.guru_id,sekolah_id:L.sekolah_id,semester_id:N.semester_id,periode_aktif:N.nama}),S=async()=>{u.value.table=!0;try{let a=(await xa(ja("/praktik-kerja-lapangan",{query:{user_id:v.value.user_id,guru_id:v.value.guru_id,sekolah_id:v.value.sekolah_id,semester_id:v.value.semester_id,periode_aktif:v.value.nama,q:r.value.searchQuery,page:r.value.page,per_page:r.value.itemsPerPage,sortby:r.value.sortby,sortbydesc:r.value.sortbydesc}}))).data;E.value=a.value.data.data,U.value=a.value.data.total}catch(n){console.error(n)}finally{u.value.table=!1}},i=p({aksi:null,pkl_id:null,tingkat:null,rombongan_belajar_id:null,dudi_id:null,akt_pd_id:null,tanggal_mulai:null,tanggal_selesai:null,instruktur:null,nip:null,tp_id:[]}),f=p({tingkat:null,rombongan_belajar_id:null,dudi_id:null,akt_pd_id:null,tanggal_mulai:null,tanggal_selesai:null,instruktur:null}),m=p({rombel:[],dudi:[],akt_pd:[],tp:[]}),j=p(!1),V=p(!1),y=p(!1),D=p(!1),P=p({color:null,title:null,text:null}),h=p(),Q=p(),na=()=>{i.value.aksi="add",V.value=!0,h.value="Tambah Perencanaan Penilaian PKL"},$=async(n,a)=>{i.value.aksi=n,i.value.pkl_id=a.pkl_id,Q.value=a.pkl_id,n=="hapus"?D.value=!0:await x({data:"detil"}).then(()=>{V.value=!0}),n=="edit"&&(h.value="Edit Perencanaan Penilaian PKL"),n=="detil"&&(h.value="Detil Perencanaan Penilaian PKL")},I=()=>{i.value={aksi:null,pkl_id:null,tingkat:null,rombongan_belajar_id:null,dudi_id:null,akt_pd_id:null,tanggal_mulai:null,tanggal_selesai:null,instruktur:null,nip:null,tp_id:[]},f.value={tingkat:null,rombongan_belajar_id:null,dudi_id:null,akt_pd_id:null,tanggal_mulai:null,tanggal_selesai:null,instruktur:null},m.value={rombel:[],dudi:[],akt_pd:[],tp:[]},j.value=!1},oa=async n=>{if(n){const a={...v.value,...i.value};await R("/praktik-kerja-lapangan/save",{method:"POST",body:a,onResponse({response:b}){let d=b._data;d.errors?f.value=d.errors:(I(),V.value=!1,y.value=!0,P.value=d)}})}else I()},x=async n=>{const a={...n,...v.value,...i.value};await R("/praktik-kerja-lapangan/get-data",{method:"POST",body:a,async onResponse({response:b}){let d=b._data;n.data=="rombel"&&(m.value.rombel=d),n.data=="dudi"&&(m.value.dudi=d),n.data=="akt-pd"&&(m.value.akt_pd=d),n.data=="tp"&&(m.value.tp=d,d.length&&(j.value=!0)),n.data=="detil"&&(i.value.tingkat=d.rombongan_belajar.tingkat,i.value.tanggal_mulai=d.tanggal_mulai,i.value.tanggal_selesai=d.tanggal_selesai,i.value.instruktur=d.instruktur,i.value.nip=d.nip,d.tp_pkl.forEach(K=>{i.value.tp_id.push(K.tp_id)}),j.value=!0,await q(d.rombongan_belajar.tingkat),i.value.rombongan_belajar_id=d.rombongan_belajar_id,await H(d.rombongan_belajar_id),i.value.dudi_id=d.dudi.dudi_id,await O(d.dudi.dudi_id),i.value.akt_pd_id=d.akt_pd_id,await J(d.akt_pd_id))}})},q=async n=>{i.value.rombongan_belajar_id=null,i.value.dudi_id=null,i.value.akt_pd_id=null,m.value.rombel=[],m.value.dudi=[],m.value.akt_pd=[],n&&(u.value.rombel=!0,await x({data:"rombel",tingkat:n}).then(()=>{u.value.rombel=!1}))},H=async n=>{i.value.dudi_id=null,i.value.akt_pd_id=null,m.value.dudi=[],m.value.akt_pd=[],n&&(u.value.dudi=!0,await x({data:"dudi",tingkat:n}).then(()=>{u.value.dudi=!1}))},O=async n=>{i.value.akt_pd_id=null,m.value.tp=[],n&&(u.value.akt_pd=!0,await x({data:"akt-pd",tingkat:n}).then(()=>{u.value.akt_pd=!1}))},J=async n=>{n&&(u.value.body=!0,await x({data:"tp",tingkat:n}).then(()=>{u.value.body=!1}))},z=p({locale:ka.Indonesian,altFormat:"j F Y",altInput:!0}),da=async n=>{n&&await R("/praktik-kerja-lapangan/save",{method:"POST",body:{aksi:"hapus",pkl_id:Q.value},onResponse({response:a}){let b=a._data;V.value=!1,y.value=!0,P.value=b}})},ra=async()=>{await S().then(()=>{I()})},ua=n=>n.map(a=>a.nama_lengkap).join("<br>");return(n,a)=>{const b=Pa,d=ya,K=Ua("IconBtn"),ma=Va,T=va,G=ca,pa=ba,ga=fa;return C(),W(X,null,[e(Da,{class:"mb-6"},{default:t(()=>[e(ha,{class:"pb-4"},{append:t(()=>[e(Z,{"prepend-icon":"tabler-plus",onClick:na},{default:t(()=>a[16]||(a[16]=[k(" Tambah Data ")])),_:1})]),default:t(()=>[e(Ta,null,{default:t(()=>a[15]||(a[15]=[k("Rencana Penilaian PKL")])),_:1})]),_:1}),e(la),e(Ca,null,{default:t(()=>[e(_,null,{default:t(()=>[e(o,{cols:"12",md:"4"},{default:t(()=>[e(b,{modelValue:l(r).itemsPerPage,"onUpdate:modelValue":a[0]||(a[0]=s=>l(r).itemsPerPage=s),items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"}]},null,8,["modelValue"])]),_:1}),e(o,{cols:"12",md:"4","offset-md":"4"},{default:t(()=>[e(d,{modelValue:l(r).searchQuery,"onUpdate:modelValue":a[1]||(a[1]=s=>l(r).searchQuery=s),placeholder:"Cari Data"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(la),e(Ka,{items:l(E),"server-items-length":l(U),headers:sa,options:l(r),loading:l(u).table,"loading-text":"Loading...","onUpdate:sortBy":ia},{"item.rombongan_belajar":t(({item:s})=>[k(F(s.rombongan_belajar.nama),1)]),"item.dudi":t(({item:s})=>[k(F(s.akt_pd.dudi.nama),1)]),"item.pks":t(({item:s})=>[k(F(s.akt_pd.judul_akt_pd),1)]),"item.actions":t(({item:s})=>[e(K,{onClick:c=>$("detil",s)},{default:t(()=>[e(Ba,{activator:"parent",location:"top"},{default:t(()=>a[17]||(a[17]=[k(" Detil Data ")])),_:1}),e(w,{icon:"tabler-search"})]),_:2},1032,["onClick"]),e(Z,{icon:"",variant:"text",color:"medium-emphasis"},{default:t(()=>[e(w,{icon:"tabler-dots-vertical"}),e(La,{activator:"parent"},{default:t(()=>[e(Na,null,{default:t(()=>[e(M,{onClick:c=>$("edit",s)},{prepend:t(()=>[e(w,{icon:"tabler-pencil"})]),default:t(()=>[e(ta,null,{default:t(()=>a[18]||(a[18]=[k("Ubah Data")])),_:1})]),_:2},1032,["onClick"]),e(M,{onClick:c=>$("hapus",s)},{prepend:t(()=>[e(w,{icon:"tabler-trash"})]),default:t(()=>[e(ta,null,{default:t(()=>a[19]||(a[19]=[k("Hapus Data")])),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),bottom:t(()=>[e(ma,{page:l(r).page,"onUpdate:page":a[2]||(a[2]=s=>l(r).page=s),"items-per-page":l(r).itemsPerPage,"total-items":l(U)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items","server-items-length","options","loading"])]),_:1}),e(pa,{isDialogVisible:l(V),"onUpdate:isDialogVisible":a[12]||(a[12]=s=>A(V)?V.value=s:null),"dialog-title":l(h),errors:l(f),isSubmitBtn:l(i).aksi=="add"||l(i).aksi=="edit",onConfirm:oa},{content:t(()=>[e(_,null,{default:t(()=>[e(o,{cols:"12"},{default:t(()=>[e(_,{"no-gutters":""},{default:t(()=>[e(o,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:t(()=>a[20]||(a[20]=[g("label",{class:"v-label text-body-2 text-high-emphasis",for:"semester_id"},"Tahun Pelajaran",-1)])),_:1}),e(o,{cols:"12",md:"9"},{default:t(()=>[e(d,{id:"semester_id",value:("$semester"in n?n.$semester:l(N)).nama,disabled:""},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(o,{cols:"12"},{default:t(()=>[e(_,{"no-gutters":""},{default:t(()=>[e(o,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:t(()=>a[21]||(a[21]=[g("label",{class:"v-label text-body-2 text-high-emphasis",for:"tingkat"},"Tingkat Kelas",-1)])),_:1}),e(o,{cols:"12",md:"9"},{default:t(()=>[e(T,{modelValue:l(i).tingkat,"onUpdate:modelValue":[a[3]||(a[3]=s=>l(i).tingkat=s),q],placeholder:"== Pilih Tingkat kelas ==",items:"tingkatKelas"in n?n.tingkatKelas:l(_a),clearable:"","clear-icon":"tabler-x","error-messages":l(f).tingkat,disabled:l(i).aksi=="detil"},null,8,["modelValue","items","error-messages","disabled"])]),_:1})]),_:1})]),_:1}),e(o,{cols:"12"},{default:t(()=>[e(_,{"no-gutters":""},{default:t(()=>[e(o,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:t(()=>a[22]||(a[22]=[g("label",{class:"v-label text-body-2 text-high-emphasis",for:"rombongan_belajar_id"},"Rombongan Belajar",-1)])),_:1}),e(o,{cols:"12",md:"9"},{default:t(()=>[e(T,{modelValue:l(i).rombongan_belajar_id,"onUpdate:modelValue":[a[4]||(a[4]=s=>l(i).rombongan_belajar_id=s),H],placeholder:"== Pilih Rombongan Belajar == ",items:l(m).rombel,clearable:"","clear-icon":"tabler-x","item-value":"rombongan_belajar_id","item-title":"nama",loading:l(u).rombel,disabled:l(u).rombel||l(i).aksi=="detil","error-messages":l(f).rombongan_belajar_id},null,8,["modelValue","items","loading","disabled","error-messages"])]),_:1})]),_:1})]),_:1}),e(o,{cols:"12"},{default:t(()=>[e(_,{"no-gutters":""},{default:t(()=>[e(o,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:t(()=>a[23]||(a[23]=[g("label",{class:"v-label text-body-2 text-high-emphasis",for:"dudi_id"},"DUDI",-1)])),_:1}),e(o,{cols:"12",md:"9"},{default:t(()=>[e(T,{modelValue:l(i).dudi_id,"onUpdate:modelValue":[a[5]||(a[5]=s=>l(i).dudi_id=s),O],placeholder:"== Pilih DUDI == ",items:l(m).dudi,clearable:"","clear-icon":"tabler-x","item-value":"dudi_id","item-title":"nama",loading:l(u).dudi,disabled:l(u).dudi||l(i).aksi=="detil","error-messages":l(f).dudi_id},null,8,["modelValue","items","loading","disabled","error-messages"])]),_:1})]),_:1})]),_:1}),e(o,{cols:"12"},{default:t(()=>[e(_,{"no-gutters":""},{default:t(()=>[e(o,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:t(()=>a[24]||(a[24]=[g("label",{class:"v-label text-body-2 text-high-emphasis",for:"akt_pd_id"},"Perjanjian Kerja Sama (PKS)",-1)])),_:1}),e(o,{cols:"12",md:"9"},{default:t(()=>[e(T,{modelValue:l(i).akt_pd_id,"onUpdate:modelValue":[a[6]||(a[6]=s=>l(i).akt_pd_id=s),J],placeholder:"== Pilih Perjanjian Kerja Sama (PKS) == ",items:l(m).akt_pd,clearable:"","clear-icon":"tabler-x","item-value":"akt_pd_id","item-title":"judul_akt_pd",loading:l(u).akt_pd,disabled:l(u).akt_pd||l(i).aksi=="detil","error-messages":l(f).akt_pd_id},{item:t(({props:s,item:c})=>[e(M,Sa($a(s)),{subtitle:t(({subtitle:B})=>a[25]||(a[25]=[k(" Pembimbing:"),g("br",null,null,-1)])),default:t(()=>{var B;return[g("span",{innerHTML:ua((B=c==null?void 0:c.raw)==null?void 0:B.pembimbing)},null,8,Aa)]}),_:2},1040)]),_:1},8,["modelValue","items","loading","disabled","error-messages"])]),_:1})]),_:1})]),_:1}),e(o,{cols:"12"},{default:t(()=>[e(_,{"no-gutters":""},{default:t(()=>[e(o,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:t(()=>a[26]||(a[26]=[g("label",{class:"v-label text-body-2 text-high-emphasis",for:"tanggal_mulai"},"Tanggal Mulai",-1)])),_:1}),e(o,{cols:"12",md:"9"},{default:t(()=>[e(G,{modelValue:l(i).tanggal_mulai,"onUpdate:modelValue":a[7]||(a[7]=s=>l(i).tanggal_mulai=s),placeholder:"== Pilih Tanggal Mulai ==",config:l(z),"error-messages":l(f).tanggal_mulai,disabled:l(i).aksi=="detil"},null,8,["modelValue","config","error-messages","disabled"])]),_:1})]),_:1})]),_:1}),e(o,{cols:"12"},{default:t(()=>[e(_,{"no-gutters":""},{default:t(()=>[e(o,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:t(()=>a[27]||(a[27]=[g("label",{class:"v-label text-body-2 text-high-emphasis",for:"tanggal_mulai"},"Tanggal Selesai",-1)])),_:1}),e(o,{cols:"12",md:"9"},{default:t(()=>[e(G,{modelValue:l(i).tanggal_selesai,"onUpdate:modelValue":a[8]||(a[8]=s=>l(i).tanggal_selesai=s),placeholder:"== Pilih Tanggal Selesai ==",config:l(z),"error-messages":l(f).tanggal_selesai,disabled:l(i).aksi=="detil"},null,8,["modelValue","config","error-messages","disabled"])]),_:1})]),_:1})]),_:1}),e(o,{cols:"12"},{default:t(()=>[e(_,{"no-gutters":""},{default:t(()=>[e(o,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:t(()=>a[28]||(a[28]=[g("label",{class:"v-label text-body-2 text-high-emphasis",for:"instruktur"},"Instruktur",-1)])),_:1}),e(o,{cols:"12",md:"9"},{default:t(()=>[e(d,{modelValue:l(i).instruktur,"onUpdate:modelValue":a[9]||(a[9]=s=>l(i).instruktur=s),placeholder:"Nama Instruktur","error-messages":l(f).instruktur,disabled:l(i).aksi=="detil"},null,8,["modelValue","error-messages","disabled"])]),_:1})]),_:1})]),_:1}),e(o,{cols:"12"},{default:t(()=>[e(_,{"no-gutters":""},{default:t(()=>[e(o,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:t(()=>a[29]||(a[29]=[g("label",{class:"v-label text-body-2 text-high-emphasis",for:"nip"},"NIP",-1)])),_:1}),e(o,{cols:"12",md:"9"},{default:t(()=>[e(d,{modelValue:l(i).nip,"onUpdate:modelValue":a[10]||(a[10]=s=>l(i).nip=s),placeholder:"NIP Instruktur (Jika ada)",disabled:l(i).aksi=="detil"},null,8,["modelValue","disabled"])]),_:1})]),_:1})]),_:1}),l(j)?(C(),aa(o,{key:0,cols:"12"},{default:t(()=>[e(_,{"no-gutters":""},{default:t(()=>[e(o,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:t(()=>a[30]||(a[30]=[g("label",{class:"v-label text-body-2 text-high-emphasis",for:"tp"},"Tujuan Pembelajaran",-1)])),_:1}),e(o,{cols:"12",md:"9"},{default:t(()=>[l(m).tp?(C(!0),W(X,{key:0},Ia(l(m).tp,s=>(C(),aa(Ra,{key:s.tp_id,modelValue:l(i).tp_id,"onUpdate:modelValue":a[11]||(a[11]=c=>l(i).tp_id=c),label:s.deskripsi,value:s.tp_id,disabled:l(i).aksi=="detil"},null,8,["modelValue","label","value","disabled"]))),128)):ea("",!0)]),_:1})]),_:1})]),_:1})):ea("",!0)]),_:1})]),_:1},8,["isDialogVisible","dialog-title","errors","isSubmitBtn"]),e(ga,{isDialogVisible:l(D),"onUpdate:isDialogVisible":a[13]||(a[13]=s=>A(D)?D.value=s:null),isNotifVisible:l(y),"onUpdate:isNotifVisible":a[14]||(a[14]=s=>A(y)?y.value=s:null),"confirmation-question":"Apakah Anda yakin?","confirmation-text":"Tindakan ini tidak dapat dikembalikan!","confirm-color":l(P).color,"confirm-title":l(P).title,"confirm-msg":l(P).text,onConfirm:da,onClose:ra},null,8,["isDialogVisible","isNotifVisible","confirm-color","confirm-title","confirm-msg"])],64)}}};export{he as default};
