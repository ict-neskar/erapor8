import{_ as w}from"./TablePagination-BGwk3hCt.js";import{_ as C}from"./ProfilePtk-DkyGpB06.js";import{_ as D}from"./AppTextField-BTba3qr2.js";import{_ as x}from"./AppSelect-Cd9HFhsW.js";import{d,a as g}from"./mixins-B3UHDqO3.js";import{u as T,c as $}from"./createUrl-Ck_LlMGD.js";import{V as A,c as Q,a as S,b as U}from"./VCard-2_qp3Vvc.js";import{V as B}from"./VDivider-DOshNxjC.js";import{V as j,a as f}from"./VRow-90jB0EEo.js";import{V as E}from"./VDataTableServer-B7CylN9o.js";import{r as m,G as N,w as b,f as q,e as o,o as F,b as t,t as k,m as r,v as G}from"./main-BLR2YNPc.js";import"./VImg-C5whf5xb.js";import"./VAvatar-BZJqyIb4.js";import"./VLabel-QfOIbUGb.js";/* empty css                   */import"./VField-BZSU_Yhz.js";import"./forwardRefs-DWGaNmQL.js";import"./VSelect-DTXlVIl9.js";import"./VList-DhBNZzgQ.js";import"./ssrBoot-Cfszeb4X.js";import"./VOverlay-CiGj4qAf.js";import"./scopeId-LkyyTvVZ.js";import"./VMenu-IOUSI9rL.js";import"./VSelectionControl-Cco01M7z.js";import"./VChip-CM7CTnjc.js";import"./VSlideGroup-CtUoo4jB.js";import"./index-BxkgbwWS.js";/* empty css              */import"./VTable-DC5yuf29.js";import"./filter-95PybUkX.js";const ke={__name:"nilai-ekskul",setup(J){const e=m({itemsPerPage:10,searchQuery:null,page:1,sortby:"updated_at",sortbydesc:"DESC",rombongan_belajar_id:null}),v=i=>{var a,n;e.value.sortby=(a=i[0])==null?void 0:a.key,e.value.sortbydesc=(n=i[0])==null?void 0:n.order};m([]);const _=m([]),u=m(0),p=m(!1),y=[{key:"nama_ekskul",title:"Nama Ekstrakurikuler",sortable:!1},{key:"pembina",title:"Guru Pembina",sortable:!1},{key:"anggota_rombel_count",title:"Jumlah Anggota",sortable:!1,align:"center"},{key:"dinilai",title:"Jml Anggota Dinilai",sortable:!1,align:"center"}];N(async()=>{await c()}),b(e,async()=>{await c()},{deep:!0}),b(()=>e.value.searchQuery,()=>{e.value.page=1});const l=m({user_id:d.user_id,guru_id:d.guru_id,sekolah_id:d.sekolah_id,semester_id:g.semester_id,periode_aktif:g.nama,data:"nilai-ekskul"}),c=async()=>{p.value=!0;try{let a=(await T($("/monitoring",{query:{user_id:l.value.user_id,guru_id:l.value.guru_id,sekolah_id:l.value.sekolah_id,semester_id:l.value.semester_id,periode_aktif:l.value.nama,data:l.value.data,q:e.value.searchQuery,page:e.value.page,per_page:e.value.itemsPerPage,sortby:e.value.sortby,sortbydesc:e.value.sortbydesc,rombongan_belajar_id:e.value.rombongan_belajar_id}}))).data.value;_.value=a.data,u.value=a.total}catch(i){console.error(i)}finally{p.value=!1}};return(i,a)=>{const n=x,V=D,P=C,h=w;return F(),q(A,{class:"mb-6"},{default:o(()=>[t(S,{class:"pb-4"},{default:o(()=>[t(Q,null,{default:o(()=>a[3]||(a[3]=[k("Monitoring Â» Penilaian Ekstrakurikuler")])),_:1})]),_:1}),t(B),t(U,null,{default:o(()=>[t(j,null,{default:o(()=>[t(f,{cols:"12",md:"4"},{default:o(()=>[t(n,{modelValue:r(e).itemsPerPage,"onUpdate:modelValue":a[0]||(a[0]=s=>r(e).itemsPerPage=s),items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"}]},null,8,["modelValue"])]),_:1}),t(f,{cols:"12",md:"4","offset-md":"4"},{default:o(()=>[t(V,{modelValue:r(e).searchQuery,"onUpdate:modelValue":a[1]||(a[1]=s=>r(e).searchQuery=s),placeholder:"Cari Data"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(E,{items:r(_),"server-items-length":r(u),headers:y,options:r(e),loading:r(p),"loading-text":"Loading...","onUpdate:sortBy":v},{"item.nama_ekskul":o(({item:s})=>[k(G(s.nama),1)]),"item.pembina":o(({item:s})=>[t(P,{item:s.wali_kelas},null,8,["item"])]),bottom:o(()=>[t(h,{page:r(e).page,"onUpdate:page":a[2]||(a[2]=s=>r(e).page=s),"items-per-page":r(e).itemsPerPage,"total-items":r(u)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items","server-items-length","options","loading"])]),_:1})}}};export{ke as default};
