import{_ as Z}from"./ConfirmDialog-B0Bc_YJ5.js";import{_ as ee}from"./AppTextarea-wLIHAzmS.js";import{_ as ae}from"./AppSelect-D1gjRk4-.js";import{i as le,_ as ie}from"./id-YwIuIv5G.js";import{_ as te}from"./DefaultForm-B0O35sh_.js";import{r,G as se,f as A,e as t,j as ne,o as _,b as l,t as R,m as a,am as oe,c,d as g,F as T,h as P,a2 as b,aa as re,ao as ue,ap as de,v as B}from"./main-DOWoIBhU.js";import{u as me,c as pe}from"./createUrl-CexWNLWx.js";import{d as k,a as N}from"./mixins-I8SXeutZ.js";import{$ as q}from"./api-CAM2bx0j.js";import{V as _e,c as fe,a as ge,b as $}from"./VCard-DRBiftP4.js";import{V as E}from"./VDivider-DgEwy873.js";import{V as ce}from"./VTable-C1nYsmx8.js";import{V as j,a as u}from"./VRow-B3Odvqxs.js";import{V as be}from"./VForm-BTJ1vPX0.js";import"./VDialog-BP5oy-x4.js";import"./VOverlay-Cnf91z5i.js";import"./forwardRefs-DWGaNmQL.js";import"./VImg-DYyAcwaz.js";import"./VLabel-Hm2kl-Y1.js";import"./AppTextField-DGISkcON.js";import"./VList-DWH4RJSa.js";import"./VAvatar-B-Z9vLfD.js";import"./VMenu-DeAbbdJl.js";import"./VSelectionControl-C8KMTZZ4.js";import"./VChip-Tdr48uqn.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./AppAutocomplete-Cj-BYPX6.js";import"./filter-CR6gUgAk.js";import"./index-BxkgbwWS.js";/* empty css              */const ke={class:"text-center"},ve={style:{"vertical-align":"top"}},ye={class:"py-2 px-2"},Xe={__name:"input-nilai",setup(Ve){const I=ne(),D=r([]),y=r(!1);se(async()=>{await M()});const h=r(!1),M=async()=>{h.value=!0;try{let e=(await me(pe("/referensi/sikap",{query:{sekolah_id:k.sekolah_id,semester_id:N.semester_id}}))).data.value;D.value=e.data,console.log(e)}catch(s){console.error(s)}finally{h.value=!1}},O=(s,e)=>{const p={};return s.filter(w=>{const U=w[e];return p[U]?!1:(p[U]=!0,!0)})},d=r({tingkat:null,rombongan_belajar_id:null,peserta_didik_id:null,anggota_rombel_id:null}),m=r({tingkat:null,rombongan_belajar_id:null,peserta_didik_id:null,tanggal:null,budaya_kerja_id:null,elemen_id:null,opsi_sikap:null,uraian_sikap:null}),f=r({rombel:[],siswa:[],elemen:[]}),n=r({rombel:!1,siswa:!1,elemen:!1}),o=r({opsi:"nilai-sikap",nilai_budaya_kerja_id:null,semester_id:N.semester_id,user_id:k.user_id,guru_id:k.guru_id,sekolah_id:k.sekolah_id,tanggal:null,budaya_kerja_id:null,elemen_id:null,opsi_sikap:null,uraian_sikap:null}),F=r(!1),V=r(!1),z=r(""),x=r({color:"",title:"",text:""}),S=r(!1),G=()=>{S.value=!0,d.value={tingkat:null,rombongan_belajar_id:null,peserta_didik_id:null,anggota_rombel_id:null},o.value={opsi:"nilai-sikap",semester_id:N.semester_id,user_id:k.user_id,guru_id:k.guru_id,sekolah_id:k.sekolah_id,tanggal:null,budaya_kerja_id:null,elemen_id:null,opsi_sikap:null,uraian_sikap:null},m.value={tingkat:null,rombongan_belajar_id:null,peserta_didik_id:null,tanggal:null,budaya_kerja_id:null,elemen_id:null,opsi_sikap:null,uraian_sikap:null},f.value={rombel:[],siswa:[],elemen:[]},n.value={rombel:!1,siswa:!1,elemen:!1},y.value=!1,V.value=!1,x.value={color:"",title:"",text:""}},C=async s=>{const e={...s,...o.value};await q("/referensi/get-data",{method:"POST",body:e,onResponse({response:p}){let v=p._data;s.data=="rombel"&&(f.value.rombel=v),s.data=="siswa"&&(f.value.siswa=v.data_siswa),s.data=="elemen"&&(f.value.elemen=v)}})},L=async s=>{d.value.rombongan_belajar_id=null,d.value.pembelajaran_id=null,d.value.mata_pelajaran_id=null,s&&(n.value.rombel=!0,await C({data:"rombel",nilai:1,tingkat:s}).then(()=>{n.value.rombel=!1}))},Y=async s=>{d.value.peserta_didik_id=null,d.value.anggota_rombel_id=null,s&&(n.value.siswa=!0,await C({data:"siswa",rombongan_belajar_id:s}).then(()=>{n.value.siswa=!1}))},H=async s=>{o.value.elemen_id=null,s&&(n.value.elemen=!0,await C({data:"elemen",budaya_kerja_id:s}).then(()=>{n.value.elemen=!1})),console.log("changeDimensi")},J=async()=>{G(),await de(()=>{I.replace("/nilai-akademik/nilai-sikap")})},K=async()=>{y.value=!0;const s={...o.value,...d.value};await q("/penilaian/simpan",{method:"POST",body:s,onResponse({response:e}){let p=e._data;y.value=!1,p.errors?m.value=p.errors:(V.value=!0,x.value=p)}})},Q=r({locale:le.Indonesian,altFormat:"j F Y",altInput:!0});return(s,e)=>{const p=te,v=ie,w=ae,U=ee,W=Z;return _(),A(_e,{class:"mb-6"},{default:t(()=>[l(ge,{class:"pb-4"},{default:t(()=>[l(fe,null,{default:t(()=>e[12]||(e[12]=[R("Input Nilai Sikap")])),_:1})]),_:1}),l(E),a(h)?(_(),A($,{key:0,class:"text-center"},{default:t(()=>[l(oe,{size:60,indeterminate:"",color:"error",class:"my-10"})]),_:1})):(_(),c(T,{key:1},[l(ce,null,{default:t(()=>[g("thead",null,[g("tr",null,[(_(!0),c(T,null,P(a(D),i=>(_(),c("th",ke,B(i.aspek),1))),256))])]),g("tbody",null,[g("tr",null,[(_(!0),c(T,null,P(a(D),i=>(_(),c("td",ve,[g("ul",ye,[(_(!0),c(T,null,P(O(i.elemen_budaya_kerja,"elemen"),X=>(_(),c("li",null,B(X.elemen),1))),256))])]))),256))])])]),_:1}),l(be,{onSubmit:ue(K,["prevent"])},{default:t(()=>[l($,null,{default:t(()=>[l(j,null,{default:t(()=>[l(p,{form:a(d),"onUpdate:form":e[0]||(e[0]=i=>b(d)?d.value=i:null),errors:a(m),"onUpdate:errors":e[1]||(e[1]=i=>b(m)?m.value=i:null),arrayData:a(f),"onUpdate:arrayData":e[2]||(e[2]=i=>b(f)?f.value=i:null),loading:a(n),"onUpdate:loading":e[3]||(e[3]=i=>b(n)?n.value=i:null),resetForm:a(S),"onUpdate:resetForm":e[4]||(e[4]=i=>b(S)?S.value=i:null),showMapel:!1,showPd:!0,onTingkat:L,onRombongan_belajar_id:Y},null,8,["form","errors","arrayData","loading","resetForm"]),l(u,{cols:"12"},{default:t(()=>[l(j,{"no-gutters":""},{default:t(()=>[l(u,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:t(()=>e[13]||(e[13]=[g("label",{class:"v-label text-body-2 text-high-emphasis",for:"tanggal"},"Tanggal",-1)])),_:1}),l(u,{cols:"12",md:"9"},{default:t(()=>[l(v,{modelValue:a(o).tanggal,"onUpdate:modelValue":e[5]||(e[5]=i=>a(o).tanggal=i),placeholder:"== Pilih Tanggal ==",config:a(Q),"error-messages":a(m).tanggal},null,8,["modelValue","config","error-messages"])]),_:1})]),_:1})]),_:1}),l(u,{cols:"12"},{default:t(()=>[l(j,{"no-gutters":""},{default:t(()=>[l(u,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:t(()=>e[14]||(e[14]=[g("label",{class:"v-label text-body-2 text-high-emphasis",for:"budaya_kerja_id"},"Dimensi/Elemen Sikap",-1)])),_:1}),l(u,{cols:"12",md:"9"},{default:t(()=>[l(j,null,{default:t(()=>[l(u,{cols:"12",md:"4"},{default:t(()=>[l(w,{modelValue:a(o).budaya_kerja_id,"onUpdate:modelValue":[e[6]||(e[6]=i=>a(o).budaya_kerja_id=i),H],placeholder:"== Pilih Dimensi Sikap ==",items:a(D),clearable:"","clear-icon":"tabler-x","item-value":"budaya_kerja_id","item-title":"aspek","error-messages":a(m).budaya_kerja_id},null,8,["modelValue","items","error-messages"])]),_:1}),l(u,{cols:"12",md:"4"},{default:t(()=>[l(w,{modelValue:a(o).elemen_id,"onUpdate:modelValue":e[7]||(e[7]=i=>a(o).elemen_id=i),placeholder:"== Pilih Elemen Sikap ==",items:a(f).elemen,clearable:"","clear-icon":"tabler-x","item-value":"elemen_id","item-title":"elemen","error-messages":a(m).elemen_id,loading:a(n).elemen,disabled:a(n).elemen},null,8,["modelValue","items","error-messages","loading","disabled"])]),_:1}),l(u,{cols:"12",md:"4"},{default:t(()=>[l(w,{modelValue:a(o).opsi_sikap,"onUpdate:modelValue":e[8]||(e[8]=i=>a(o).opsi_sikap=i),placeholder:"== Pilih Opsi Sikap ==",items:[{value:1,title:"Positif"},{value:2,title:"Negatif"}],clearable:"","clear-icon":"tabler-x","error-messages":a(m).opsi_sikap,loading:a(n).elemen,disabled:a(n).elemen},null,8,["modelValue","error-messages","loading","disabled"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(u,{cols:"12"},{default:t(()=>[l(j,{"no-gutters":""},{default:t(()=>[l(u,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:t(()=>e[15]||(e[15]=[g("label",{class:"v-label text-body-2 text-high-emphasis",for:"uraian_sikap"},"Uraian Sikap",-1)])),_:1}),l(u,{cols:"12",md:"9"},{default:t(()=>[l(U,{modelValue:a(o).uraian_sikap,"onUpdate:modelValue":e[9]||(e[9]=i=>a(o).uraian_sikap=i),"error-messages":a(m).uraian_sikap,placeholder:"Uraian Sikap"},null,8,["modelValue","error-messages"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(E),l($,{class:"d-flex justify-end flex-wrap gap-3 pt-5 overflow-visible"},{default:t(()=>[l(re,{variant:"elevated",type:"submit",loading:a(y),disabled:a(y)},{default:t(()=>e[16]||(e[16]=[R(" Simpan ")])),_:1},8,["loading","disabled"])]),_:1})]),_:1})],64)),l(W,{isDialogVisible:a(F),"onUpdate:isDialogVisible":e[10]||(e[10]=i=>b(F)?F.value=i:null),isNotifVisible:a(V),"onUpdate:isNotifVisible":e[11]||(e[11]=i=>b(V)?V.value=i:null),"confirmation-question":"Apakah Anda yakin?","confirmation-text":a(z),"confirm-color":a(x).color,"confirm-title":a(x).title,"confirm-msg":a(x).text,onClose:J},null,8,["isDialogVisible","isNotifVisible","confirmation-text","confirm-color","confirm-title","confirm-msg"])]),_:1})}}};export{Xe as default};
