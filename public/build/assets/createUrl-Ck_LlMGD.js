import{bI as o,a8 as a,at as h,Y as i,bJ as l}from"./main-BLR2YNPc.js";import{s as f}from"./index-BxkgbwWS.js";const b=o({baseUrl:"/api",fetchOptions:{headers:{Accept:"application/json"}},options:{refetch:!0,async beforeFetch({options:r}){const e=a("accessToken").value;return e&&(r.headers={...r.headers,Authorization:`Bearer ${e}`}),{options:r}},afterFetch(r){const{data:e,response:u}=r;let t=null;try{t=h(e)}catch(s){console.error(s)}return{data:t,response:u}},onFetchError(r){const{response:e}=r;e.status===401&&(a("userAbilityRules").value=null,a("userData").value=null,a("accessToken").value=null,a("sekolah").value=null,a("semester").value=null,a("roles").value=null,a("profilePhotoPath").value=null,window.location.replace("/login"))}}}),m=(r,e)=>i(()=>{if(!(e!=null&&e.query))return l(r);const u=l(r),t=l(e==null?void 0:e.query),s=Object.fromEntries(Object.entries(t).map(([c,n])=>[c,l(n)]));return`${u}${s?`?${f(s)}`:""}`});export{m as c,b as u};
