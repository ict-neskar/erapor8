import{_ as J}from"./AlertDialog-zblyg3Lv.js";import{_ as M}from"./DialogCloseBtn-Dnf62vfE.js";import{_ as W}from"./TablePagination-CHyoUaXL.js";import{_ as O}from"./AppTextField-ByX_d8Fu.js";import{_ as X}from"./AppSelect-Cgh_yFIL.js";import{r as p,G as Y,w as $,o as Z,f as ee,e as l,b as e,d,m as o,v as V,aa as P,a2 as N,ao as le,t as T}from"./main-mJ4grY_1.js";import{u as U,c as A}from"./createUrl-B7F4S3LC.js";import{d as S,a as B}from"./mixins-DyiT8LKv.js";import{$ as ae}from"./api-DY3HI8Y7.js";import{b as D,V as L,a as te,c as se}from"./VCard-8hK8qPdX.js";import{V as oe}from"./VSpacer-C_g6PVXO.js";import{V as w}from"./VDivider-B79LGQs3.js";import{V as de}from"./VDataTableServer-DgQmgtCH.js";import{V as ie}from"./VAvatar-stc9ON8V.js";import{V as ne}from"./VImg-D3Cnwq1n.js";import{V as re}from"./VDialog-Btk1DTC-.js";import{V as ue}from"./VForm-RR7bjU9j.js";import{V as r,a as s}from"./VRow-Dpp8ZYcA.js";const me={class:"d-flex gap-2 align-center"},pe={class:"d-flex align-center flex-wrap gap-4"},fe={class:"d-flex align-center gap-x-4"},ge={class:"d-flex flex-column"},ce={class:"text-base"},_e={class:"text-sm"},Be={__name:"Ptk",props:{data:{type:String,required:!0}},setup(I){const R=I,j=[{title:"Nama",key:"nama",sortable:!0},{title:"NIK",key:"nik",align:"center",sortable:!0},{title:"L/P",key:"jenis_kelamin",align:"center",sortable:!0},{title:"Tempat, Tanggal Lahir",key:"tempat_tanggal_lahir",sortable:!1},{title:"detil",key:"detil",align:"center",sortable:!1}],i=p({page:1,itemsPerPage:10,searchQuery:"",sortby:"nama",sortbydesc:"ASC"}),x=p(!1),C=p([]),_=p(0),G=m=>{var t,f;i.value.sortby=(t=m[0])==null?void 0:t.key,i.value.sortbydesc=(f=m[0])==null?void 0:f.order},y=async()=>{x.value=!0;try{let t=(await U(A("/referensi/ptk",{query:{jenis_gtk:R.data,sekolah_id:S.sekolah_id,semester_id:B.semester_id,periode_aktif:B.nama,q:i.value.searchQuery,page:i.value.page,per_page:i.value.itemsPerPage,sortby:i.value.sortby,sortbydesc:i.value.sortbydesc}}))).data.value;C.value=t.data.data,_.value=t.data.total}catch(m){console.error(m)}finally{x.value=!1}};Y(async()=>{await y()}),$(i,async()=>{await y()},{deep:!0}),$(()=>i.value.searchQuery,()=>{i.value.page=1});const g=p(!1),b=p(!1),v=p({color:null,title:null,text:null}),h=p([]),K=p(""),u=p({}),c=p({guru_id:null,gelar_depan:null,gelar_belakang:null,sekolah_id:S.sekolah_id}),Q=async m=>{c.value.guru_id=m,h.value[m]=!0;try{let f=(await U(A(`/referensi/ptk/detil/${m}`))).data.value;K.value=`Detil PTK (${f.ptk.nama_lengkap})`,u.value=f.ptk,c.value.gelar_depan=f.ptk.gelar_depan,c.value.gelar_belakang=f.ptk.gelar_belakang}catch(t){console.error(t)}finally{h.value[m]=!1,g.value=!0}},q=async()=>{await ae("/referensi/ptk/update",{method:"POST",body:c.value,onResponse({request:m,response:t,options:f}){let n=t._data;g.value=!1,v.value=n,b.value=!0}})},z=async()=>{await y()};return(m,t)=>{const f=X,n=O,F=W,E=M,H=J;return Z(),ee(L,null,{default:l(()=>[e(D,{class:"d-flex flex-wrap gap-4"},{default:l(()=>[d("div",me,[e(f,{modelValue:o(i).itemsPerPage,"onUpdate:modelValue":t[0]||(t[0]=a=>o(i).itemsPerPage=a),items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"}],style:{"inline-size":"15.5rem"}},null,8,["modelValue"])]),e(oe),d("div",pe,[e(n,{modelValue:o(i).searchQuery,"onUpdate:modelValue":t[1]||(t[1]=a=>o(i).searchQuery=a),placeholder:"Cari data",style:{"inline-size":"15.625rem"}},null,8,["modelValue"])])]),_:1}),e(w),e(de,{page:o(i).page,"onUpdate:page":t[3]||(t[3]=a=>o(i).page=a),"items-per-page":o(i).itemsPerPage,"items-per-page-options":[{value:10,title:"10"},{value:20,title:"20"},{value:50,title:"50"}],items:o(C),"server-items-length":o(_),"items-length":o(_),headers:j,"items-per-page-text":"Item",class:"text-no-wrap",options:o(i),loading:o(x),"loading-text":"Loading...","onUpdate:sortBy":G},{"item.nama":l(({item:a})=>[d("div",fe,[e(ie,{size:"34",variant:a.photo?void 0:"tonal",color:a.photo?void 0:"success"},{default:l(()=>[e(ne,{src:a.photo},null,8,["src"])]),_:2},1032,["variant","color"]),d("div",ge,[d("h6",ce,V(a.nama_lengkap),1),d("div",_e,V(a.email),1)])])]),"item.detil":l(({item:a})=>[e(P,{loading:o(h)[a.guru_id],disabled:o(h)[a.guru_id],color:"warning",icon:"tabler-eye",onClick:k=>Q(a.guru_id)},null,8,["loading","disabled","onClick"])]),bottom:l(()=>[e(F,{page:o(i).page,"onUpdate:page":t[2]||(t[2]=a=>o(i).page=a),"items-per-page":o(i).itemsPerPage,"total-items":o(_)},null,8,["page","items-per-page","total-items"])]),_:1},8,["page","items-per-page","items","server-items-length","items-length","options","loading"]),e(re,{modelValue:o(g),"onUpdate:modelValue":t[8]||(t[8]=a=>N(g)?g.value=a:null),width:"700",scrollable:"","content-class":"scrollable-dialog"},{default:l(()=>[e(E,{onClick:t[4]||(t[4]=a=>g.value=!o(g))}),e(ue,{onSubmit:le(q,["prevent"])},{default:l(()=>[e(L,null,{default:l(()=>[e(te,{class:"pb-5"},{default:l(()=>[e(se,null,{default:l(()=>[T(V(o(K)),1)]),_:1})]),_:1}),e(w),e(D,null,{default:l(()=>[e(r,null,{default:l(()=>[e(s,{cols:"12"},{default:l(()=>[e(r,{"no-gutters":""},{default:l(()=>[e(s,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>t[10]||(t[10]=[d("label",{class:"v-label text-body-2 text-high-emphasis",for:"nama"},"Nama Lengkap",-1)])),_:1}),e(s,{cols:"12",md:"9"},{default:l(()=>{var a;return[e(n,{id:"nama",value:(a=o(u))==null?void 0:a.nama_lengkap,placeholder:"Nama Lengkap","persistent-placeholder":"",disabled:""},null,8,["value"])]}),_:1})]),_:1})]),_:1}),e(s,{cols:"12"},{default:l(()=>[e(r,{"no-gutters":""},{default:l(()=>[e(s,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>t[11]||(t[11]=[d("label",{class:"v-label text-body-2 text-high-emphasis",for:"gelar_depan"},"Gelar Depan",-1)])),_:1}),e(s,{cols:"12",md:"9"},{default:l(()=>[e(n,{id:"gelar_depan",modelValue:o(c).gelar_depan,"onUpdate:modelValue":t[5]||(t[5]=a=>o(c).gelar_depan=a),placeholder:"Gelar Depan","persistent-placeholder":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(s,{cols:"12"},{default:l(()=>[e(r,{"no-gutters":""},{default:l(()=>[e(s,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>t[12]||(t[12]=[d("label",{class:"v-label text-body-2 text-high-emphasis",for:"gelar_belakang"},"Gelar Belakang",-1)])),_:1}),e(s,{cols:"12",md:"9"},{default:l(()=>[e(n,{id:"gelar_belakang",modelValue:o(c).gelar_belakang,"onUpdate:modelValue":t[6]||(t[6]=a=>o(c).gelar_belakang=a),placeholder:"Gelar Belakang","persistent-placeholder":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(s,{cols:"12"},{default:l(()=>[e(r,{"no-gutters":""},{default:l(()=>[e(s,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>t[13]||(t[13]=[d("label",{class:"v-label text-body-2 text-high-emphasis",for:"nuptk"},"NUPTK",-1)])),_:1}),e(s,{cols:"12",md:"9"},{default:l(()=>{var a;return[e(n,{id:"nama",value:(a=o(u))==null?void 0:a.nuptk,placeholder:"NUPTK","persistent-placeholder":"",disabled:""},null,8,["value"])]}),_:1})]),_:1})]),_:1}),e(s,{cols:"12"},{default:l(()=>[e(r,{"no-gutters":""},{default:l(()=>[e(s,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>t[14]||(t[14]=[d("label",{class:"v-label text-body-2 text-high-emphasis",for:"nip"},"NIP",-1)])),_:1}),e(s,{cols:"12",md:"9"},{default:l(()=>{var a;return[e(n,{id:"nama",value:(a=o(u))==null?void 0:a.nip,placeholder:"NIP","persistent-placeholder":"",disabled:""},null,8,["value"])]}),_:1})]),_:1})]),_:1}),e(s,{cols:"12"},{default:l(()=>[e(r,{"no-gutters":""},{default:l(()=>[e(s,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>t[15]||(t[15]=[d("label",{class:"v-label text-body-2 text-high-emphasis",for:"nik"},"NIK",-1)])),_:1}),e(s,{cols:"12",md:"9"},{default:l(()=>{var a;return[e(n,{id:"nama",value:(a=o(u))==null?void 0:a.nik,placeholder:"NIK","persistent-placeholder":"",disabled:""},null,8,["value"])]}),_:1})]),_:1})]),_:1}),e(s,{cols:"12"},{default:l(()=>[e(r,{"no-gutters":""},{default:l(()=>[e(s,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>t[16]||(t[16]=[d("label",{class:"v-label text-body-2 text-high-emphasis",for:"jenis_kelamin"},"Jenis Kelamin",-1)])),_:1}),e(s,{cols:"12",md:"9"},{default:l(()=>{var a;return[e(n,{id:"nama",value:(a=o(u))==null?void 0:a.jenis_kelamin_str,placeholder:"Jenis Kelamin","persistent-placeholder":"",disabled:""},null,8,["value"])]}),_:1})]),_:1})]),_:1}),e(s,{cols:"12"},{default:l(()=>[e(r,{"no-gutters":""},{default:l(()=>[e(s,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>t[17]||(t[17]=[d("label",{class:"v-label text-body-2 text-high-emphasis",for:"tempat_lahir"},"Tempat Lahir",-1)])),_:1}),e(s,{cols:"12",md:"9"},{default:l(()=>{var a;return[e(n,{id:"nama",value:(a=o(u))==null?void 0:a.tempat_lahir,placeholder:"Tempat Lahir","persistent-placeholder":"",disabled:""},null,8,["value"])]}),_:1})]),_:1})]),_:1}),e(s,{cols:"12"},{default:l(()=>[e(r,{"no-gutters":""},{default:l(()=>[e(s,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>t[18]||(t[18]=[d("label",{class:"v-label text-body-2 text-high-emphasis",for:"tanggal_lahir_indo"},"Tanggal Lahir",-1)])),_:1}),e(s,{cols:"12",md:"9"},{default:l(()=>{var a;return[e(n,{id:"nama",value:(a=o(u))==null?void 0:a.tanggal_lahir_indo,placeholder:"Tanggal Lahir","persistent-placeholder":"",disabled:""},null,8,["value"])]}),_:1})]),_:1})]),_:1}),e(s,{cols:"12"},{default:l(()=>[e(r,{"no-gutters":""},{default:l(()=>[e(s,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>t[19]||(t[19]=[d("label",{class:"v-label text-body-2 text-high-emphasis",for:"agama_id"},"Agama",-1)])),_:1}),e(s,{cols:"12",md:"9"},{default:l(()=>{var a,k;return[e(n,{id:"nama",value:(k=(a=o(u))==null?void 0:a.agama)==null?void 0:k.nama,placeholder:"Agama","persistent-placeholder":"",disabled:""},null,8,["value"])]}),_:1})]),_:1})]),_:1}),e(s,{cols:"12"},{default:l(()=>[e(r,{"no-gutters":""},{default:l(()=>[e(s,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>t[20]||(t[20]=[d("label",{class:"v-label text-body-2 text-high-emphasis",for:"alamat"},"Alamat",-1)])),_:1}),e(s,{cols:"12",md:"9"},{default:l(()=>{var a;return[e(n,{id:"nama",value:(a=o(u))==null?void 0:a.alamat,placeholder:"Alamat","persistent-placeholder":"",disabled:""},null,8,["value"])]}),_:1})]),_:1})]),_:1}),e(s,{cols:"12"},{default:l(()=>[e(r,{"no-gutters":""},{default:l(()=>[e(s,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>t[21]||(t[21]=[d("label",{class:"v-label text-body-2 text-high-emphasis",for:"rt"},"RT",-1)])),_:1}),e(s,{cols:"12",md:"9"},{default:l(()=>{var a;return[e(n,{id:"nama",value:(a=o(u))==null?void 0:a.rt,placeholder:"RT","persistent-placeholder":"",disabled:""},null,8,["value"])]}),_:1})]),_:1})]),_:1}),e(s,{cols:"12"},{default:l(()=>[e(r,{"no-gutters":""},{default:l(()=>[e(s,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>t[22]||(t[22]=[d("label",{class:"v-label text-body-2 text-high-emphasis",for:"rw"},"RW",-1)])),_:1}),e(s,{cols:"12",md:"9"},{default:l(()=>{var a;return[e(n,{id:"nama",value:(a=o(u))==null?void 0:a.rw,placeholder:"RW","persistent-placeholder":"",disabled:""},null,8,["value"])]}),_:1})]),_:1})]),_:1}),e(s,{cols:"12"},{default:l(()=>[e(r,{"no-gutters":""},{default:l(()=>[e(s,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>t[23]||(t[23]=[d("label",{class:"v-label text-body-2 text-high-emphasis",for:"desa_kelurahan"},"Desa/Kelurahan",-1)])),_:1}),e(s,{cols:"12",md:"9"},{default:l(()=>{var a;return[e(n,{id:"nama",value:(a=o(u))==null?void 0:a.desa_kelurahan,placeholder:"Desa/Kelurahan","persistent-placeholder":"",disabled:""},null,8,["value"])]}),_:1})]),_:1})]),_:1}),e(s,{cols:"12"},{default:l(()=>[e(r,{"no-gutters":""},{default:l(()=>[e(s,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>t[24]||(t[24]=[d("label",{class:"v-label text-body-2 text-high-emphasis",for:"kecamatan"},"Kecamatan",-1)])),_:1}),e(s,{cols:"12",md:"9"},{default:l(()=>{var a;return[e(n,{id:"nama",value:(a=o(u))==null?void 0:a.kecamatan,placeholder:"Kecamatan","persistent-placeholder":"",disabled:""},null,8,["value"])]}),_:1})]),_:1})]),_:1}),e(s,{cols:"12"},{default:l(()=>[e(r,{"no-gutters":""},{default:l(()=>[e(s,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>t[25]||(t[25]=[d("label",{class:"v-label text-body-2 text-high-emphasis",for:"kode_pos"},"Kodepos",-1)])),_:1}),e(s,{cols:"12",md:"9"},{default:l(()=>{var a;return[e(n,{id:"nama",value:(a=o(u))==null?void 0:a.kode_pos,placeholder:"Kodepos","persistent-placeholder":"",disabled:""},null,8,["value"])]}),_:1})]),_:1})]),_:1}),e(s,{cols:"12"},{default:l(()=>[e(r,{"no-gutters":""},{default:l(()=>[e(s,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>t[26]||(t[26]=[d("label",{class:"v-label text-body-2 text-high-emphasis",for:"no_hp"},"Telp/HP",-1)])),_:1}),e(s,{cols:"12",md:"9"},{default:l(()=>{var a;return[e(n,{id:"nama",value:(a=o(u))==null?void 0:a.no_hp,placeholder:"Telp/HP","persistent-placeholder":"",disabled:""},null,8,["value"])]}),_:1})]),_:1})]),_:1}),e(s,{cols:"12"},{default:l(()=>[e(r,{"no-gutters":""},{default:l(()=>[e(s,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>t[27]||(t[27]=[d("label",{class:"v-label text-body-2 text-high-emphasis",for:"email"},"Email",-1)])),_:1}),e(s,{cols:"12",md:"9"},{default:l(()=>{var a;return[e(n,{id:"nama",value:(a=o(u))==null?void 0:a.email,placeholder:"Email","persistent-placeholder":"",disabled:""},null,8,["value"])]}),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(w),e(D,{class:"d-flex justify-end flex-wrap gap-3 pt-5 overflow-visible"},{default:l(()=>[e(P,{color:"secondary",variant:"tonal",onClick:t[7]||(t[7]=a=>g.value=!1)},{default:l(()=>t[28]||(t[28]=[T(" Tutup ")])),_:1}),e(P,{type:"submit"},{default:l(()=>t[29]||(t[29]=[T(" Perbaharui ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(H,{isDialogVisible:o(b),"onUpdate:isDialogVisible":t[9]||(t[9]=a=>N(b)?b.value=a:null),"confirm-color":o(v).color,"confirm-title":o(v).title,"confirm-msg":o(v).text,onConfirm:z},null,8,["isDialogVisible","confirm-color","confirm-title","confirm-msg"])]),_:1})}}};export{Be as _};
