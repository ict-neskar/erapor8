import{_ as ge}from"./ConfirmDialog-D2Ym9elI.js";import{_ as ve}from"./DefaultDialog-BxMmzk9l.js";import{_ as ke}from"./AppTextarea-CWGwBsCJ.js";import{_ as ye}from"./DefaultForm-KxOP50KX.js";import{_ as Ve}from"./TablePagination-DmP15-SC.js";import{_ as je}from"./AppTextField-BkZ8OLsx.js";import{_ as De}from"./AppSelect-DwS2KVgh.js";import{u as Pe,c as xe}from"./createUrl-C1_Sm4N7.js";import{d as V,a as Q}from"./mixins-CKlf8GuV.js";import{$ as h}from"./api-DGas9VfV.js";import{V as Ce,c as Te,a as Ue,b as we}from"./VCard-BpJLDfhD.js";import{r as n,G as he,w as G,f as H,e as o,a as $e,o as y,b as l,aa as Se,t as j,m as a,v as x,$ as J,a9 as Be,d as m,c as C,h as W,F as O,a2 as b,y as X,am as Fe,x as Ne}from"./main-BUumBu6a.js";import{V as Y}from"./VDivider-BnEsdsgF.js";import{V as T,a as f}from"./VRow-D5VnEZ_i.js";import{V as Z}from"./VTooltip-CEfZsqvI.js";import{V as Re}from"./VDataTableServer-ndkNIZXv.js";import{V as Ae}from"./VTable-BUsnUoL5.js";import{V as Ee}from"./VCheckbox-C8cyx8Ap.js";import"./VDialog-BEKtFyZX.js";import"./VOverlay-Bb4CDEq4.js";import"./forwardRefs-DWGaNmQL.js";import"./scopeId-CDzN2yrl.js";import"./VImg-D2Juqgex.js";import"./DialogCloseBtn-CS20NWEk.js";import"./VLabel-BS4UTjHC.js";import"./VTextarea-B6eEthks.js";/* empty css                   */import"./VField-BQoKA9XH.js";import"./AppAutocomplete-BLSewVUM.js";import"./VSelect-CUZzVBlY.js";import"./VList-DzyT1C46.js";import"./ssrBoot-BYz6_xqb.js";import"./VAvatar-Ba-Ggnm6.js";import"./VMenu-CW6Pdemc.js";import"./VSelectionControl-C5g1YuyM.js";import"./VChip-BQa_6tD-.js";import"./VSlideGroup-DCwY19Ye.js";import"./filter-Bl82YR7N.js";import"./index-BxkgbwWS.js";/* empty css              */const Ke={key:0,class:"text-center"},Ie={style:{"vertical-align":"top"},class:"py-2"},Qe={style:{"vertical-align":"top"},class:"py-2"},Oe={style:{"vertical-align":"top"},class:"py-2"},qe={style:{"vertical-align":"top"},class:"py-2"},$a={__name:"perencanaan",setup(ze){const i=n({itemsPerPage:10,searchQuery:null,page:1,sortby:"updated_at",sortbydesc:"DESC"}),ee=r=>{var e,p;i.value.sortby=(e=r[0])==null?void 0:e.key,i.value.sortbydesc=(p=r[0])==null?void 0:p.order},q=n([]),$=n(0),S=n(!1),ae=[{key:"rombongan_belajar",title:"Kelas",sortable:!1},{key:"pembelajaran",title:"Tema",sortable:!1},{key:"nama",title:"Nama Projek",sortable:!0},{key:"deskripsi",title:"Deskripsi",sortable:!0},{key:"no_urut",title:"No. Urut",sortable:!1,align:"center"},{key:"aspek_budaya_kerja_count",title:"Jml Sub Elemen",sortable:!1,align:"center"},{key:"actions",title:"Aksi",sortable:!1,align:"center"}];he(async()=>{await B()}),G(i,async()=>{await B()},{deep:!0}),G(()=>i.value.searchQuery,()=>{i.value.page=1});const B=async()=>{S.value=!0;try{let e=(await Pe(xe("/projek",{query:{user_id:V.user_id,guru_id:V.guru_id,sekolah_id:V.sekolah_id,semester_id:Q.semester_id,periode_aktif:Q.nama,q:i.value.searchQuery,page:i.value.page,per_page:i.value.itemsPerPage,sortby:i.value.sortby,sortbydesc:i.value.sortbydesc}}))).data;q.value=e.value.data.data,$.value=e.value.data.total}catch(r){console.error(r)}finally{S.value=!1}},v=n(!1),F=n(),U=n(!1),D=n({color:null,title:null,text:null}),P=n(!1),c=n({nama_projek:void 0,deskripsi:void 0,no_urut:void 0}),N=n({semester_id:Q.semester_id,user_id:V.user_id,guru_id:V.guru_id,sekolah_id:V.sekolah_id,merdeka:!1}),g=n({tingkat:null,rombongan_belajar_id:null,pembelajaran_id:null}),u=n({rencana_budaya_kerja_id:null,nama_projek:null,deskripsi:null,no_urut:null,sub_elemen:{}}),d=n({rombel:[],mapel:[],tema:[]}),_=n({rombel:!1,mapel:!1,body:!1}),w=n(!1),R=n(!1),A=n(!1),E=n(),te=()=>{E.value="add",v.value=!0,F.value="Tambah Perencanaan Penilaian P5"},K=async r=>{const e={...r,...N.value};await h("/referensi/get-data",{method:"POST",body:e,onResponse({response:p}){let s=p._data;r.data=="rombel"&&(d.value.rombel=s),r.data=="mapel"&&(d.value.mapel=s.mapel,N.value.merdeka=s.merdeka,w.value=!!s.rombel.kunci_nilai),r.data=="budaya-kerja"&&(A.value=!0,d.value.tema=s)}})},le=async r=>{d.value.rombel=[],d.value.mapel=[],g.value.rombongan_belajar_id=null,g.value.pembelajaran_id=null,r&&(_.value.rombel=!0,await K({data:"rombel",aksi:"rencana-p5",tingkat:r}).then(()=>{_.value.rombel=!1}))},oe=async r=>{d.value.mapel=[],g.value.pembelajaran_id=null,r&&(_.value.mapel=!0,await K({data:"mapel",aksi:"tema",rombongan_belajar_id:r}).then(()=>{_.value.mapel=!1}))},re=async r=>{r&&(_.value.body=!0,await K({data:"budaya-kerja"}).then(()=>{_.value.body=!1}))},ne=async r=>{r&&await h("/projek/hapus",{method:"POST",body:{data:"rencana",rencana_budaya_kerja_id:I.value},onResponse({response:e}){let p=e._data;v.value=!1,P.value=!0,D.value=p}})},se=async()=>{await B()},ie=()=>{g.value={tingkat:null,rombongan_belajar_id:null,mata_pelajaran_id:null},c.value={nama_projek:void 0,deskripsi:void 0,no_urut:void 0},u.value={nama_projek:null,deskripsi:null,no_urut:null,sub_elemen:{}},d.value={rombel:[],mapel:[],tema:[]}},z=n({data:"rencana"}),ue=async r=>{if(r){const e={...z.value,...N.value,...g.value,...u.value};await h("/projek/save",{method:"POST",body:e,onResponse({response:p}){let s=p._data;s.errors?c.value=s.errors:(ie(),v.value=!1,P.value=!0,D.value=s)}})}},me=r=>{var e={1:"bg-primary lighten-5",2:"bg-success lighten-5",3:"bg-error lighten-5",4:"bg-warning lighten-5",5:"bg-info lighten-5",6:"bg-secondary"};return e[r]},I=n(),L=async(r,e)=>{I.value=e.rencana_budaya_kerja_id,E.value=r,r=="edit"?(z.value.data="update-rencana",F.value="Edit Perencanaan Penilaian P5",await h("/projek/show",{method:"POST",body:{rencana_budaya_kerja_id:I.value},onResponse({response:p}){let s=p._data;console.log(s),v.value=!0,u.value.rencana_budaya_kerja_id=s.rencana_budaya_kerja_id,u.value.nama_projek=s.nama,u.value.deskripsi=s.deskripsi,u.value.no_urut=s.no_urut,A.value=!0}})):U.value=!0};return(r,e)=>{const p=De,s=je,M=$e("IconBtn"),de=Ve,pe=ye,fe=ke,_e=ve,ce=ge;return y(),H(Ce,{class:"mb-6"},{default:o(()=>[l(Ue,{class:"pb-4"},{append:o(()=>[l(Se,{"prepend-icon":"tabler-plus",onClick:te},{default:o(()=>e[16]||(e[16]=[j(" Tambah Data ")])),_:1})]),default:o(()=>[l(Te,null,{default:o(()=>e[15]||(e[15]=[j("Rencana Penilaian P5")])),_:1})]),_:1}),l(Y),l(we,null,{default:o(()=>[l(T,null,{default:o(()=>[l(f,{cols:"12",md:"4"},{default:o(()=>[l(p,{modelValue:a(i).itemsPerPage,"onUpdate:modelValue":e[0]||(e[0]=t=>a(i).itemsPerPage=t),items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"}]},null,8,["modelValue"])]),_:1}),l(f,{cols:"12",md:"4","offset-md":"4"},{default:o(()=>[l(s,{modelValue:a(i).searchQuery,"onUpdate:modelValue":e[1]||(e[1]=t=>a(i).searchQuery=t),placeholder:"Cari Data"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(Y),l(Re,{items:a(q),"server-items-length":a($),headers:ae,options:a(i),loading:a(S),"loading-text":"Loading...","onUpdate:sortBy":ee},{"item.rombongan_belajar":o(({item:t})=>[j(x(t.pembelajaran.rombongan_belajar.nama),1)]),"item.pembelajaran":o(({item:t})=>[j(x(t.pembelajaran.nama_mata_pelajaran),1)]),"item.actions":o(({item:t})=>[l(M,{onClick:k=>L("edit",t)},{default:o(()=>[l(Z,{activator:"parent",location:"top"},{default:o(()=>e[17]||(e[17]=[j(" Detil Data ")])),_:1}),l(J,{icon:"tabler-pencil"})]),_:2},1032,["onClick"]),l(M,{onClick:k=>L("hapus",t)},{default:o(()=>[l(Z,{activator:"parent",location:"top"},{default:o(()=>e[18]||(e[18]=[j(" Hapus Data ")])),_:1}),l(J,{icon:"tabler-trash",color:"error"})]),_:2},1032,["onClick"])]),bottom:o(()=>[l(de,{page:a(i).page,"onUpdate:page":e[2]||(e[2]=t=>a(i).page=t),"items-per-page":a(i).itemsPerPage,"total-items":a($)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items","server-items-length","options","loading"]),l(_e,{isDialogVisible:a(v),"onUpdate:isDialogVisible":e[12]||(e[12]=t=>b(v)?v.value=t:null),"dialog-title":a(F),errors:a(c),isSubmitBtn:a(A),onConfirm:ue},Be({content:o(()=>[l(T,null,{default:o(()=>[a(E)=="add"?(y(),H(pe,{key:0,form:a(g),"onUpdate:form":e[3]||(e[3]=t=>b(g)?g.value=t:null),errors:a(c),"onUpdate:errors":e[4]||(e[4]=t=>b(c)?c.value=t:null),arrayData:a(d),"onUpdate:arrayData":e[5]||(e[5]=t=>b(d)?d.value=t:null),loading:a(_),"onUpdate:loading":e[6]||(e[6]=t=>b(_)?_.value=t:null),resetForm:a(R),"onUpdate:resetForm":e[7]||(e[7]=t=>b(R)?R.value=t:null),isKunci:a(w),"onUpdate:isKunci":e[8]||(e[8]=t=>b(w)?w.value=t:null),onTingkat:le,onRombongan_belajar_id:oe,onPembelajaran_id:re},null,8,["form","errors","arrayData","loading","resetForm","isKunci"])):X("",!0),l(f,{cols:"12"},{default:o(()=>[l(T,{"no-gutters":""},{default:o(()=>[l(f,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:o(()=>e[19]||(e[19]=[m("label",{class:"v-label text-body-2 text-high-emphasis",for:"nama_projek"},"Nama Projek",-1)])),_:1}),l(f,{cols:"12",md:"9"},{default:o(()=>[l(s,{id:"nama_projek",modelValue:a(u).nama_projek,"onUpdate:modelValue":e[9]||(e[9]=t=>a(u).nama_projek=t),"error-messages":a(c).nama_projek},null,8,["modelValue","error-messages"])]),_:1})]),_:1})]),_:1}),l(f,{cols:"12"},{default:o(()=>[l(T,{"no-gutters":""},{default:o(()=>[l(f,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:o(()=>e[20]||(e[20]=[m("label",{class:"v-label text-body-2 text-high-emphasis",for:"deskripsi"},"Deskripsi Projek",-1)])),_:1}),l(f,{cols:"12",md:"9"},{default:o(()=>[l(fe,{id:"deskripsi",modelValue:a(u).deskripsi,"onUpdate:modelValue":e[10]||(e[10]=t=>a(u).deskripsi=t),"error-messages":a(c).deskripsi},null,8,["modelValue","error-messages"])]),_:1})]),_:1})]),_:1}),l(f,{cols:"12"},{default:o(()=>[l(T,{"no-gutters":""},{default:o(()=>[l(f,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:o(()=>e[21]||(e[21]=[m("label",{class:"v-label text-body-2 text-high-emphasis",for:"no_urut"},"Nomor Urut",-1)])),_:1}),l(f,{cols:"12",md:"9"},{default:o(()=>[l(s,{id:"no_urut",modelValue:a(u).no_urut,"onUpdate:modelValue":e[11]||(e[11]=t=>a(u).no_urut=t),"error-messages":a(c).no_urut},null,8,["modelValue","error-messages"])]),_:1})]),_:1})]),_:1})]),_:1}),a(_).body?(y(),C("div",Ke,[l(Fe,{size:60,indeterminate:"",color:"error",class:"my-10"})])):X("",!0)]),_:2},[a(d).tema.length?{name:"table",fn:o(()=>[l(Ae,null,{default:o(()=>[e[22]||(e[22]=m("thead",null,[m("tr",null,[m("th",{class:"text-center"},"#"),m("th",{class:"text-center"},"Dimensi"),m("th",{class:"text-center"},"Elemen"),m("th",{class:"text-center"},"Sub Elemen")])],-1)),m("tbody",null,[(y(!0),C(O,null,W(a(d).tema,t=>(y(),C(O,null,[(y(!0),C(O,null,W(t.elemen_budaya_kerja,k=>(y(),C("tr",{class:Ne(me(t.budaya_kerja_id))},[m("td",Ie,[l(Ee,{modelValue:a(u).sub_elemen[k.elemen_id],"onUpdate:modelValue":be=>a(u).sub_elemen[k.elemen_id]=be,value:`${t.budaya_kerja_id}#${k.elemen_id}`},null,8,["modelValue","onUpdate:modelValue","value"])]),m("td",Qe,x(t.aspek),1),m("td",Oe,x(k.elemen),1),m("td",qe,x(k.deskripsi),1)],2))),256))],64))),256))])]),_:1})]),key:"0"}:void 0]),1032,["isDialogVisible","dialog-title","errors","isSubmitBtn"]),l(ce,{isDialogVisible:a(U),"onUpdate:isDialogVisible":e[13]||(e[13]=t=>b(U)?U.value=t:null),isNotifVisible:a(P),"onUpdate:isNotifVisible":e[14]||(e[14]=t=>b(P)?P.value=t:null),"confirmation-question":"Apakah Anda yakin?","confirmation-text":"Tindakan ini tidak dapat dikembalikan!","confirm-color":a(D).color,"confirm-title":a(D).title,"confirm-msg":a(D).text,onConfirm:ne,onClose:se},null,8,["isDialogVisible","isNotifVisible","confirm-color","confirm-title","confirm-msg"])]),_:1})}}};export{$a as default};
