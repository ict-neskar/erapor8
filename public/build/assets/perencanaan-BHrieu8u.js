import{d as T,a as F,t as Fe}from"./mixins-D9sK_GNK.js";import{_ as $e}from"./ConfirmDialog-CoWyGp8W.js";import{_ as Se}from"./DefaultDialog-DnI3gh9-.js";import{_ as Ke}from"./ProfileSiswa-CNtxoAVM.js";import{i as Re,_ as Be}from"./id-CJwX8H7G.js";import{_ as Ie}from"./TablePagination-DutCKv4V.js";import{_ as Ne}from"./ProfilePtk-BFQU04Uj.js";import{_ as Ae}from"./AppTextField-bfe1muJ5.js";import{_ as Ee}from"./AppSelect-C873-ZzL.js";import{u as Oe,c as Qe}from"./createUrl-DDCDdC1v.js";import{$ as j}from"./api-zDHFqD3S.js";import{V as ze,a as qe,c as Le,b as Ge}from"./VCard-DP6R80QM.js";import{V as X}from"./VDivider-AdngBwQk.js";import{V as He}from"./VSpacer-CP4B24Uh.js";import{r as s,G as Je,w as Z,c as b,b as t,e as l,m as a,a2 as $,a as Me,o as k,t as h,d as o,aa as oe,v as A,$ as se,f as E,am as Ye,y as f,F as O,h as We}from"./main-BbIknAU_.js";import{V as Xe}from"./VDataTableServer-CQcYZykg.js";import{V as re}from"./VTooltip-BUhMNqPw.js";import{a as d,V as v}from"./VRow-BRHNHyL4.js";import{V as ue}from"./VTable-D6I1NIoz.js";import{V as de}from"./VCheckbox-BctaVWuJ.js";import"./VDialog-AuNDjXN_.js";import"./VOverlay-CegGukY1.js";import"./forwardRefs-DWGaNmQL.js";import"./scopeId-Cm6oLMEy.js";import"./VImg-C0bob0hg.js";import"./DialogCloseBtn-BgUVzq6p.js";import"./VAvatar-DhWlB6rZ.js";import"./VField-CiROKIcN.js";import"./VLabel-BKB7GbBW.js";import"./_commonjsHelpers-Cpj98o6Y.js";/* empty css                   */import"./VSelect-B8TBIhr3.js";import"./VList-CU7bhzU4.js";import"./ssrBoot-DItPKqse.js";import"./VMenu-RccmEXkB.js";import"./VSelectionControl-BTie8rgs.js";import"./VChip-L5Rr2CRm.js";import"./VSlideGroup-BPY7Rwgf.js";import"./index-BxkgbwWS.js";/* empty css              */import"./filter-DNqhOXQ6.js";const Ze={class:"me-3 d-flex gap-3"},ea={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},aa={style:{"inline-size":"15.625rem"}},ta={key:0,class:"text-center"},la={key:0,class:"text-center"},na={class:"text-center"},ia={class:"text-center"},Ja={__name:"perencanaan",setup(oa){const me=s({locale:Re.Indonesian,altFormat:"j F Y",altInput:!0}),g=s({page:1,itemsPerPage:10,searchQuery:"",sortby:"updated_at",sortbydesc:"DESC"}),ge=[{key:"paket_ukk",title:"Paket Kompetensi",sortable:!1},{key:"guru_internal",title:"Penguji Internal",sortable:!1},{key:"guru_eksternal",title:"Penguji Eksternal",sortable:!1},{key:"pd_count",title:"Jml PD",sortable:!1,align:"center"},{key:"actions",title:"Aksi",align:"center",sortable:!1,nowrap:!0}],ee=s([]),Q=s(0),z=s(!1);Je(async()=>{await q()}),Z(g,async()=>{await q()},{deep:!0}),Z(()=>g.value.searchQuery,()=>{g.value.page=1});const pe=i=>{var e,r;g.value.sortby=(e=i[0])==null?void 0:e.key,g.value.sortbydesc=(r=i[0])==null?void 0:r.order},q=async()=>{z.value=!0;try{let e=(await Oe(Qe("/ukk",{query:{user_id:T.user_id,guru_id:T.guru_id,sekolah_id:T.sekolah_id,semester_id:F.semester_id,periode_aktif:F.nama,q:g.value.searchQuery,page:g.value.page,per_page:g.value.itemsPerPage,sortby:g.value.sortby,sortbydesc:g.value.sortbydesc}}))).data;ee.value=e.value.data.data,Q.value=e.value.data.total}catch(i){console.error(i)}finally{z.value=!1}},S=s(!1),w=s({color:null,title:null,text:null});s({tingkat:null,rombongan_belajar_id:null,pembelajaran_id:null});const C=s(!1),K=s(!1),D=s(!1),R=s(!1),L=s(!1),V=s(!1),G=s(""),U={semester_id:F.semester_id,user_id:T.user_id,guru_id:T.guru_id,sekolah_id:T.sekolah_id,periode_aktif:F.nama},u=s({tingkat:null,rombongan_belajar_id:null,jurusan_id:null,penguji_internal:null,penguji_eksternal:null,paket_ukk_id:null,tanggal:null,selected:[]}),c=s({tingkat:null,rombongan_belajar_id:null,penguji_internal:null,penguji_eksternal:null,paket_ukk_id:null,tanggal:null}),_=s(),ae=s(),H=s(),B=s(),te=async(i,e)=>{H.value=e.rencana_ukk_id,_.value=i,i=="detil"?(G.value="Detil Perencanaan Penilaian UKK",await j("/ukk/show",{method:"POST",body:{rencana_ukk_id:H.value},onResponse({response:r}){let p=r._data;V.value=!0,B.value=p.rencana,y.value=p.data_siswa}})):(S.value=!0,ae.value="Tindakan ini tidak dapat dikembalikan!")},J=s([]),M=s([]),Y=s([]),W=s([]),y=s([]),x=s(!1),ke=()=>{x.value?u.value.selected=y.value.map(i=>`${i.peserta_didik_id}#${i.anggota_rombel.anggota_rombel_id}`):u.value.selected=[]},I=s(!1);Z(()=>u.value.selected,i=>{i.length===y.value.length?x.value=!0:(I.value=!0,x.value=!1)});const _e=s(),fe=()=>{_.value="add",V.value=!0,G.value="Tambah Perencanaan Penilaian UKK"},ce=async i=>{i&&await j("/ukk/hapus",{method:"POST",body:{data:"rencana",rencana_ukk_id:H.value},onResponse({response:e}){let r=e._data;V.value=!1,C.value=!0,w.value=r}})},be=async()=>{await q()},ve=()=>{u.value={tingkat:null,rombongan_belajar_id:null,jurusan_id:null,penguji_internal:null,penguji_eksternal:null,paket_ukk_id:null,tanggal:null,selected:[]},c.value={tingkat:null,rombongan_belajar_id:null,penguji_internal:null,penguji_eksternal:null,paket_ukk_id:null,tanggal:null},J.value=[],M.value=[],Y.value=[],W.value=[],y.value=[],x.value=!1},Ve=async i=>{if(i){const r={...{data:"rencana"},...U,...u.value};await j("/ukk/save",{method:"POST",body:r,onResponse({response:p}){let m=p._data;m.errors?c.value=m.errors:(ve(),V.value=!1,C.value=!0,w.value=m)}})}},ye=async i=>{if(i){K.value=!0;const r={...{data:"rombel",aksi:"rencana-ukk",jenis_rombel:1},...U,...u.value};await j("/referensi/get-data",{method:"POST",body:r,onResponse({response:p}){let m=p._data;J.value=m,K.value=!1}})}},xe=async i=>{if(i){D.value=!0;const r={...{data:"penguji-ukk"},...U,...u.value};await j("/referensi/get-data",{method:"POST",body:r,onResponse({response:p}){let m=p._data;u.value.jurusan_id=m.rombel.jurusan_sp.jurusan_id,M.value=m.internal,Y.value=m.eksternal,D.value=!1}})}},Pe=async i=>{if(i){R.value=!0;const r={...{data:"paket-ukk"},...U,...u.value};await j("/referensi/get-data",{method:"POST",body:r,onResponse({response:p}){let m=p._data;W.value=m,R.value=!1}})}},je=async i=>{if(i){L.value=!0;const r={...{data:"siswa-ukk"},...U,...u.value};await j("/referensi/get-data",{method:"POST",body:r,onResponse({response:p}){let m=p._data;_e.value=m.rencana_ukk,y.value=m.data_siswa,L.value=!1}})}},De=i=>{var e="";if(i.nilai_ukk&&i.nilai_ukk.nilai){var r=i.nilai_ukk.nilai;r>=70?e="Kompeten":e="Belum Kompeten"}return e},le=i=>{var e=null;return i.nilai_ukk.nilai&&(e=`/cetak/sertifikat/${i.nilai_ukk.anggota_rombel_id}/${i.nilai_ukk.rencana_ukk_id}`),e};return(i,e)=>{const r=Ee,p=Ae,m=Ne,ne=Me("IconBtn"),Te=Ie,he=Be,we=Ke,Ce=Se,Ue=$e;return k(),b("section",null,[t(ze,{class:"mb-6"},{default:l(()=>[t(qe,{class:"pb-4"},{default:l(()=>[t(Le,null,{default:l(()=>e[15]||(e[15]=[h("Rencana Penilaian UKK")])),_:1})]),_:1}),t(X),t(Ge,{class:"d-flex flex-wrap gap-4"},{default:l(()=>[o("div",Ze,[t(r,{modelValue:a(g).itemsPerPage,"onUpdate:modelValue":e[0]||(e[0]=n=>a(g).itemsPerPage=n),items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"}],style:{"inline-size":"6.25rem"}},null,8,["modelValue"])]),t(He),o("div",ea,[o("div",aa,[t(p,{modelValue:a(g).searchQuery,"onUpdate:modelValue":e[1]||(e[1]=n=>a(g).searchQuery=n),placeholder:"Cari Data"},null,8,["modelValue"])]),t(oe,{"prepend-icon":"tabler-plus",onClick:fe},{default:l(()=>e[16]||(e[16]=[h(" Tambah Data ")])),_:1})])]),_:1}),t(X),t(Xe,{items:a(ee),"server-items-length":a(Q),headers:ge,options:a(g),loading:a(z),"loading-text":"Loading...","onUpdate:sortBy":pe},{"item.paket_ukk":l(({item:n})=>[h(A(n.paket_ukk.nama_paket_id),1)]),"item.guru_internal":l(({item:n})=>[t(m,{item:n.guru_internal},null,8,["item"])]),"item.guru_eksternal":l(({item:n})=>[t(m,{item:n.guru_eksternal},null,8,["item"])]),"item.actions":l(({item:n})=>[t(ne,{onClick:P=>te("detil",n)},{default:l(()=>[t(re,{activator:"parent",location:"top"},{default:l(()=>e[17]||(e[17]=[h(" Detil Data ")])),_:1}),t(se,{icon:"tabler-file-search"})]),_:2},1032,["onClick"]),t(ne,{onClick:P=>te("hapus",n)},{default:l(()=>[t(re,{activator:"parent",location:"top"},{default:l(()=>e[18]||(e[18]=[h(" Hapus Data ")])),_:1}),t(se,{icon:"tabler-trash",color:"error"})]),_:2},1032,["onClick"])]),bottom:l(()=>[t(Te,{page:a(g).page,"onUpdate:page":e[2]||(e[2]=n=>a(g).page=n),"items-per-page":a(g).itemsPerPage,"total-items":a(Q)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items","server-items-length","options","loading"])]),_:1}),t(Ce,{isDialogVisible:a(V),"onUpdate:isDialogVisible":e[12]||(e[12]=n=>$(V)?V.value=n:null),"dialog-title":a(G),errors:a(c),isSubmitBtn:a(_)=="add",onConfirm:Ve},{content:l(()=>[a(_)=="add"?(k(),E(v,{key:0},{default:l(()=>[t(d,{cols:"12"},{default:l(()=>[t(v,{"no-gutters":""},{default:l(()=>[t(d,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>e[19]||(e[19]=[o("label",{class:"v-label text-body-2 text-high-emphasis",for:"semester_id"},"Tahun Pelajaran",-1)])),_:1}),t(d,{cols:"12",md:"9"},{default:l(()=>[t(p,{id:"semester_id",value:("$semester"in i?i.$semester:a(F)).nama,disabled:""},null,8,["value"])]),_:1})]),_:1})]),_:1}),t(d,{cols:"12"},{default:l(()=>[t(v,{"no-gutters":""},{default:l(()=>[t(d,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>e[20]||(e[20]=[o("label",{class:"v-label text-body-2 text-high-emphasis",for:"tingkat"},"Tingkat Kelas",-1)])),_:1}),t(d,{cols:"12",md:"9"},{default:l(()=>[t(r,{modelValue:a(u).tingkat,"onUpdate:modelValue":[e[3]||(e[3]=n=>a(u).tingkat=n),ye],placeholder:"== Pilih Tingkat kelas ==",items:"tingkatKelas"in i?i.tingkatKelas:a(Fe),clearable:"","clear-icon":"tabler-x","error-messages":a(c).tingkat},null,8,["modelValue","items","error-messages"])]),_:1})]),_:1})]),_:1}),t(d,{cols:"12"},{default:l(()=>[t(v,{"no-gutters":""},{default:l(()=>[t(d,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>e[21]||(e[21]=[o("label",{class:"v-label text-body-2 text-high-emphasis",for:"rombongan_belajar_id"},"Rombongan Belajar",-1)])),_:1}),t(d,{cols:"12",md:"9"},{default:l(()=>[t(r,{modelValue:a(u).rombongan_belajar_id,"onUpdate:modelValue":[e[4]||(e[4]=n=>a(u).rombongan_belajar_id=n),xe],placeholder:"== Pilih Rombongan Belajar == ",items:a(J),clearable:"","clear-icon":"tabler-x","item-value":"rombongan_belajar_id","item-title":"nama",loading:a(K),disabled:a(K),"error-messages":a(c).rombongan_belajar_id},null,8,["modelValue","items","loading","disabled","error-messages"])]),_:1})]),_:1})]),_:1}),t(d,{cols:"12"},{default:l(()=>[t(v,{"no-gutters":""},{default:l(()=>[t(d,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>e[22]||(e[22]=[o("label",{class:"v-label text-body-2 text-high-emphasis",for:"penguji_internal"},"Penguji Internal",-1)])),_:1}),t(d,{cols:"12",md:"9"},{default:l(()=>[t(r,{modelValue:a(u).penguji_internal,"onUpdate:modelValue":e[5]||(e[5]=n=>a(u).penguji_internal=n),placeholder:"== Pilih Penguji Internal ==",items:a(M),clearable:"","clear-icon":"tabler-x","item-value":"guru_id","item-title":"nama_lengkap",loading:a(D),disabled:a(D),"error-messages":a(c).penguji_internal},null,8,["modelValue","items","loading","disabled","error-messages"])]),_:1})]),_:1})]),_:1}),t(d,{cols:"12"},{default:l(()=>[t(v,{"no-gutters":""},{default:l(()=>[t(d,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>e[23]||(e[23]=[o("label",{class:"v-label text-body-2 text-high-emphasis",for:"penguji_eksternal"},"Penguji Eksternal",-1)])),_:1}),t(d,{cols:"12",md:"9"},{default:l(()=>[t(r,{modelValue:a(u).penguji_eksternal,"onUpdate:modelValue":e[6]||(e[6]=n=>a(u).penguji_eksternal=n),placeholder:"== Pilih Penguji Eksternal ==",items:a(Y),clearable:"","clear-icon":"tabler-x","item-value":"guru_id","item-title":"nama_lengkap",loading:a(D),disabled:a(D),"error-messages":a(c).penguji_eksternal},null,8,["modelValue","items","loading","disabled","error-messages"])]),_:1})]),_:1})]),_:1}),t(d,{cols:"12"},{default:l(()=>[t(v,{"no-gutters":""},{default:l(()=>[t(d,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>e[24]||(e[24]=[o("label",{class:"v-label text-body-2 text-high-emphasis",for:"tanggal"},"Tanggal Sertifikat",-1)])),_:1}),t(d,{cols:"12",md:"9"},{default:l(()=>[t(he,{modelValue:a(u).tanggal,"onUpdate:modelValue":[e[7]||(e[7]=n=>a(u).tanggal=n),Pe],placeholder:"== Pilih Tanggal Sertifikat ==",config:a(me)},null,8,["modelValue","config"])]),_:1})]),_:1})]),_:1}),t(d,{cols:"12"},{default:l(()=>[t(v,{"no-gutters":""},{default:l(()=>[t(d,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>e[25]||(e[25]=[o("label",{class:"v-label text-body-2 text-high-emphasis",for:"paket_ukk_id"},"Paket Kompetensi",-1)])),_:1}),t(d,{cols:"12",md:"9"},{default:l(()=>[t(r,{modelValue:a(u).paket_ukk_id,"onUpdate:modelValue":[e[8]||(e[8]=n=>a(u).paket_ukk_id=n),je],placeholder:"== Pilih Paket Kompetensi ==",items:a(W),clearable:"","clear-icon":"tabler-x","item-value":"paket_ukk_id","item-title":"nama_paket_id",loading:a(R),disabled:a(R),"error-messages":a(c).paket_ukk_id},null,8,["modelValue","items","loading","disabled","error-messages"])]),_:1})]),_:1})]),_:1}),a(L)?(k(),E(d,{key:0,cols:"12",class:"text-center"},{default:l(()=>[t(Ye,{size:60,indeterminate:"",color:"error",class:"my-10"})]),_:1})):f("",!0)]),_:1})):f("",!0)]),table:l(()=>[a(_)=="detil"?(k(),E(ue,{key:0,class:"text-no-wrap"},{default:l(()=>{var n,P,N,ie;return[o("tbody",null,[o("tr",null,[e[26]||(e[26]=o("td",null,"Paket UKK",-1)),o("td",null,A((P=(n=a(B))==null?void 0:n.paket_ukk)==null?void 0:P.nama_paket_id),1)]),o("tr",null,[e[27]||(e[27]=o("td",null,"Penguji Internal",-1)),o("td",null,[t(m,{item:(N=a(B))==null?void 0:N.guru_internal},null,8,["item"])])]),o("tr",null,[e[28]||(e[28]=o("td",null,"Penguji Eksternal",-1)),o("td",null,[t(m,{item:(ie=a(B))==null?void 0:ie.guru_eksternal},null,8,["item"])])])])]}),_:1})):f("",!0),a(y).length?(k(),b(O,{key:1},[t(X),t(ue,{class:"text-no-wrap","fixed-header":!0},{default:l(()=>[o("thead",null,[o("tr",null,[a(_)=="add"?(k(),b("th",ta,[t(de,{indeterminate:a(I),"onUpdate:indeterminate":e[9]||(e[9]=n=>$(I)?I.value=n:null),modelValue:a(x),"onUpdate:modelValue":e[10]||(e[10]=n=>$(x)?x.value=n:null),onChange:ke},null,8,["indeterminate","modelValue"])])):f("",!0),e[32]||(e[32]=o("th",null,"Nama Peserta Didik",-1)),a(_)=="detil"?(k(),b(O,{key:1},[e[29]||(e[29]=o("th",{class:"text-center"},"Nilai",-1)),e[30]||(e[30]=o("th",{class:"text-center"},"Kesimpulan",-1)),e[31]||(e[31]=o("th",{class:"text-center"},"Cetak",-1))],64)):f("",!0)])]),o("tbody",null,[(k(!0),b(O,null,We(a(y),n=>{var P;return k(),b("tr",null,[a(_)=="add"?(k(),b("td",la,[t(de,{modelValue:a(u).selected,"onUpdate:modelValue":e[11]||(e[11]=N=>a(u).selected=N),value:`${n.peserta_didik_id}#${n.anggota_rombel.anggota_rombel_id}`},null,8,["modelValue","value"])])):f("",!0),o("td",null,[t(we,{item:n},null,8,["item"])]),a(_)=="detil"?(k(),b(O,{key:1},[o("td",na,A((P=n.nilai_ukk)==null?void 0:P.nilai),1),o("td",null,A(De(n)),1),o("td",ia,[le(n)?(k(),E(oe,{key:0,"prepend-icon":"tabler-printer",color:"success",size:"small",href:le(n),target:"_blank"},{default:l(()=>e[33]||(e[33]=[h("Cetak")])),_:2},1032,["href"])):f("",!0)])],64)):f("",!0)])}),256))])]),_:1})],64)):f("",!0)]),_:1},8,["isDialogVisible","dialog-title","errors","isSubmitBtn"]),t(Ue,{isDialogVisible:a(S),"onUpdate:isDialogVisible":e[13]||(e[13]=n=>$(S)?S.value=n:null),isNotifVisible:a(C),"onUpdate:isNotifVisible":e[14]||(e[14]=n=>$(C)?C.value=n:null),"confirmation-question":"Apakah Anda yakin?","confirmation-text":a(ae),"confirm-color":a(w).color,"confirm-title":a(w).title,"confirm-msg":a(w).text,onConfirm:ce,onClose:be},null,8,["isDialogVisible","isNotifVisible","confirmation-text","confirm-color","confirm-title","confirm-msg"])])}}};export{Ja as default};
