import{d as K,a as B,t as pa}from"./mixins-Do01Tvpi.js";import{_ as ga}from"./ConfirmDialog-DEtJ9YHf.js";import{_ as _a}from"./DefaultDialog-iXQyE0U7.js";import{i as fa,_ as ba}from"./id-DRok9x4B.js";import{_ as ka}from"./TablePagination-tXgFpqyX.js";import{_ as ca}from"./AppTextField-BO6w-NjC.js";import{_ as va}from"./AppAutocomplete-DAT5lBen.js";import{_ as Va}from"./AppSelect-B2PHoo-x.js";import{u as ya,c as xa}from"./createUrl-BXcv10L8.js";import{$ as N}from"./api-CbnF2F_N.js";import{V as Pa,a as ja,c as Da,b as ha}from"./VCard-DkQKJDRB.js";import{r as p,G as Ta,w as J,c as G,b as a,e as t,m as l,a2 as R,F as H,a as Ca,o as C,aa as Y,t as k,v as A,$ as w,d as b,f as z,h as wa,y as W}from"./main-BpzOKNoA.js";import{V as X}from"./VDivider-Dhg7eMF0.js";import{V as g,a as o}from"./VRow-eEekKE2Y.js";import{V as Ua}from"./VDataTableServer-Dpmy7Q46.js";import{V as Sa}from"./VTooltip-DsU2JCUN.js";import{V as Ia}from"./VMenu-BjIWR5X6.js";import{V as $a,a as Z,b as aa}from"./VList-CxLNrE2t.js";import{V as Ka}from"./VCheckbox-J6a3qD8G.js";import"./VDialog-BIu7mksy.js";import"./VOverlay-CaqnmWII.js";import"./forwardRefs-DWGaNmQL.js";import"./scopeId-D8AFld2n.js";import"./VImg-BbE4AfBU.js";import"./DialogCloseBtn-DDowJWAj.js";import"./VField-ColkkmFo.js";import"./VLabel-DSCxQ7R6.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./VSelect-BAXzc1tN.js";import"./VSelectionControl-C62c-rz1.js";import"./VAvatar-Ddpywjbl.js";import"./VChip-DVAuZVH0.js";import"./VSlideGroup-Bx8gxucL.js";import"./filter-D7lmOnkH.js";import"./index-BxkgbwWS.js";/* empty css              */import"./VTable-DuVTcngC.js";import"./ssrBoot-CeJZM__3.js";const Ve={__name:"perencanaan",setup(Ba){const r=p({itemsPerPage:10,searchQuery:null,page:1,sortby:"updated_at",sortbydesc:"DESC",rombongan_belajar_id:null}),ea=n=>{var e,f;r.value.sortby=(e=n[0])==null?void 0:e.key,r.value.sortbydesc=(f=n[0])==null?void 0:f.order},L=p([]),U=p(0),u=p({table:!1,rombel:!1,dudi:!1,akt_pd:!1}),la=p([]),ta=[{key:"rombongan_belajar",title:"Kelas",sortable:!1},{key:"dudi",title:"DUDI",sortable:!1,align:"center"},{key:"pks",title:"PKS",sortable:!1,align:"center"},{key:"tanggal_mulai_str",title:"Tanggal Mulai",sortable:!0,align:"center"},{key:"tanggal_selesai_str",title:"Tanggal Selesai",sortable:!1,align:"center"},{key:"pd_pkl_count",title:"JML Peserta",sortable:!1,align:"center"},{key:"actions",title:"Aksi",sortable:!1,align:"center"}];Ta(async()=>{await S()}),J(r,async()=>{await S()},{deep:!0}),J(()=>r.value.searchQuery,()=>{r.value.page=1});const c=p({user_id:K.user_id,guru_id:K.guru_id,sekolah_id:K.sekolah_id,semester_id:B.semester_id,periode_aktif:B.nama}),S=async()=>{u.value.table=!0;try{let e=(await ya(xa("/praktik-kerja-lapangan",{query:{user_id:c.value.user_id,guru_id:c.value.guru_id,sekolah_id:c.value.sekolah_id,semester_id:c.value.semester_id,periode_aktif:c.value.nama,q:r.value.searchQuery,page:r.value.page,per_page:r.value.itemsPerPage,sortby:r.value.sortby,sortbydesc:r.value.sortbydesc}}))).data;L.value=e.value.data.data,U.value=e.value.data.total}catch(n){console.error(n)}finally{u.value.table=!1}},i=p({aksi:null,pkl_id:null,tingkat:null,rombongan_belajar_id:null,dudi_id:null,akt_pd_id:null,tanggal_mulai:null,tanggal_selesai:null,instruktur:null,nip:null,tp_id:[]}),_=p({tingkat:null,rombongan_belajar_id:null,dudi_id:null,akt_pd_id:null,tanggal_mulai:null,tanggal_selesai:null,instruktur:null}),m=p({rombel:[],dudi:[],akt_pd:[],tp:[]}),j=p(!1),v=p(!1),y=p(!1),D=p(!1),x=p({color:null,title:null,text:null}),h=p(),ia=()=>{i.value.aksi="add",v.value=!0,h.value="Tambah Perencanaan Penilaian PKL"},I=async(n,e)=>{i.value.aksi=n,i.value.pkl_id=e.pkl_id,n=="hapus"?D.value=!0:await P({data:"detil"}).then(()=>{v.value=!0}),n=="edit"&&(h.value="Edit Perencanaan Penilaian PKL"),n=="detil"&&(h.value="Detil Perencanaan Penilaian PKL")},$=()=>{i.value={aksi:null,pkl_id:null,tingkat:null,rombongan_belajar_id:null,dudi_id:null,akt_pd_id:null,tanggal_mulai:null,tanggal_selesai:null,instruktur:null,nip:null,tp_id:[]},_.value={tingkat:null,rombongan_belajar_id:null,dudi_id:null,akt_pd_id:null,tanggal_mulai:null,tanggal_selesai:null,instruktur:null},m.value={rombel:[],dudi:[],akt_pd:[],tp:[]},j.value=!1},sa=async n=>{if(n){const e={...c.value,...i.value};await N("/praktik-kerja-lapangan/save",{method:"POST",body:e,onResponse({response:f}){let d=f._data;d.errors?_.value=d.errors:($(),v.value=!1,y.value=!0,x.value=d)}})}else $()},P=async n=>{const e={...n,...c.value,...i.value};await N("/praktik-kerja-lapangan/get-data",{method:"POST",body:e,async onResponse({response:f}){let d=f._data;n.data=="rombel"&&(m.value.rombel=d),n.data=="dudi"&&(m.value.dudi=d),n.data=="akt-pd"&&(m.value.akt_pd=d),n.data=="tp"&&(m.value.tp=d,d.length&&(j.value=!0)),n.data=="detil"&&(i.value.tingkat=d.rombongan_belajar.tingkat,i.value.tanggal_mulai=d.tanggal_mulai,i.value.tanggal_selesai=d.tanggal_selesai,i.value.instruktur=d.instruktur,i.value.nip=d.nip,d.tp_pkl.forEach(V=>{i.value.tp_id.push(V.tp_id)}),j.value=!0,await F(d.rombongan_belajar.tingkat),i.value.rombongan_belajar_id=d.rombongan_belajar_id,await M(d.rombongan_belajar_id),i.value.dudi_id=d.dudi.dudi_id,await E(d.dudi.dudi_id),i.value.akt_pd_id=d.akt_pd_id,await Q(d.akt_pd_id))}})},F=async n=>{i.value.rombongan_belajar_id=null,i.value.dudi_id=null,i.value.akt_pd_id=null,m.value.rombel=[],m.value.dudi=[],m.value.akt_pd=[],n&&(u.value.rombel=!0,await P({data:"rombel",tingkat:n}).then(()=>{u.value.rombel=!1}))},M=async n=>{i.value.dudi_id=null,i.value.akt_pd_id=null,m.value.dudi=[],m.value.akt_pd=[],n&&(u.value.dudi=!0,await P({data:"dudi",tingkat:n}).then(()=>{u.value.dudi=!1}))},E=async n=>{i.value.akt_pd_id=null,m.value.tp=[],n&&(u.value.akt_pd=!0,await P({data:"akt-pd",tingkat:n}).then(()=>{u.value.akt_pd=!1}))},Q=async n=>{n&&(u.value.body=!0,await P({data:"tp",tingkat:n}).then(()=>{u.value.body=!1}))},q=p({locale:fa.Indonesian,altFormat:"j F Y",altInput:!0}),na=async n=>{n&&await N("/praktik-kerja-lapangan/save",{method:"POST",body:{aksi:"hapus",pkl_id:pklID.value},onResponse({response:e}){let f=e._data;v.value=!1,y.value=!0,x.value=f}})},oa=async()=>{await S().then(()=>{$()})};return(n,e)=>{const f=Va,d=va,V=ca,da=Ca("IconBtn"),ra=ka,O=ba,ua=_a,ma=ga;return C(),G(H,null,[a(Pa,{class:"mb-6"},{default:t(()=>[a(ja,{class:"pb-4"},{append:t(()=>[a(Y,{"prepend-icon":"tabler-plus",onClick:ia},{default:t(()=>e[17]||(e[17]=[k(" Tambah Data ")])),_:1})]),default:t(()=>[a(Da,null,{default:t(()=>e[16]||(e[16]=[k("Rencana Penilaian PKL")])),_:1})]),_:1}),a(X),a(ha,null,{default:t(()=>[a(g,null,{default:t(()=>[a(o,{cols:"12",md:"4"},{default:t(()=>[a(f,{modelValue:l(r).itemsPerPage,"onUpdate:modelValue":e[0]||(e[0]=s=>l(r).itemsPerPage=s),items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"}]},null,8,["modelValue"])]),_:1}),a(o,{cols:"12",md:"4"},{default:t(()=>[a(d,{modelValue:l(r).rombongan_belajar_id,"onUpdate:modelValue":e[1]||(e[1]=s=>l(r).rombongan_belajar_id=s),items:l(la),placeholder:"== Filter Rombel ==","item-value":"rombongan_belajar_id","item-title":"nama"},null,8,["modelValue","items"])]),_:1}),a(o,{cols:"12",md:"4"},{default:t(()=>[a(V,{modelValue:l(r).searchQuery,"onUpdate:modelValue":e[2]||(e[2]=s=>l(r).searchQuery=s),placeholder:"Cari Data"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(X),a(Ua,{items:l(L),"server-items-length":l(U),headers:ta,options:l(r),loading:l(u).table,"loading-text":"Loading...","onUpdate:sortBy":ea},{"item.rombongan_belajar":t(({item:s})=>[k(A(s.rombongan_belajar.nama),1)]),"item.dudi":t(({item:s})=>[k(A(s.akt_pd.dudi.nama),1)]),"item.pks":t(({item:s})=>[k(A(s.akt_pd.judul_akt_pd),1)]),"item.actions":t(({item:s})=>[a(da,{onClick:T=>I("detil",s)},{default:t(()=>[a(Sa,{activator:"parent",location:"top"},{default:t(()=>e[18]||(e[18]=[k(" Detil Data ")])),_:1}),a(w,{icon:"tabler-search"})]),_:2},1032,["onClick"]),a(Y,{icon:"",variant:"text",color:"medium-emphasis"},{default:t(()=>[a(w,{icon:"tabler-dots-vertical"}),a(Ia,{activator:"parent"},{default:t(()=>[a($a,null,{default:t(()=>[a(Z,{onClick:T=>I("edit",s)},{prepend:t(()=>[a(w,{icon:"tabler-pencil"})]),default:t(()=>[a(aa,null,{default:t(()=>e[19]||(e[19]=[k("Ubah Data")])),_:1})]),_:2},1032,["onClick"]),a(Z,{onClick:T=>I("hapus",s)},{prepend:t(()=>[a(w,{icon:"tabler-trash"})]),default:t(()=>[a(aa,null,{default:t(()=>e[20]||(e[20]=[k("Hapus Data")])),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),bottom:t(()=>[a(ra,{page:l(r).page,"onUpdate:page":e[3]||(e[3]=s=>l(r).page=s),"items-per-page":l(r).itemsPerPage,"total-items":l(U)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items","server-items-length","options","loading"])]),_:1}),a(ua,{isDialogVisible:l(v),"onUpdate:isDialogVisible":e[13]||(e[13]=s=>R(v)?v.value=s:null),"dialog-title":l(h),errors:l(_),isSubmitBtn:l(i).aksi=="add"||l(i).aksi=="edit",onConfirm:sa},{content:t(()=>[a(g,null,{default:t(()=>[a(o,{cols:"12"},{default:t(()=>[a(g,{"no-gutters":""},{default:t(()=>[a(o,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:t(()=>e[21]||(e[21]=[b("label",{class:"v-label text-body-2 text-high-emphasis",for:"semester_id"},"Tahun Pelajaran",-1)])),_:1}),a(o,{cols:"12",md:"9"},{default:t(()=>[a(V,{id:"semester_id",value:("$semester"in n?n.$semester:l(B)).nama,disabled:""},null,8,["value"])]),_:1})]),_:1})]),_:1}),a(o,{cols:"12"},{default:t(()=>[a(g,{"no-gutters":""},{default:t(()=>[a(o,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:t(()=>e[22]||(e[22]=[b("label",{class:"v-label text-body-2 text-high-emphasis",for:"tingkat"},"Tingkat Kelas",-1)])),_:1}),a(o,{cols:"12",md:"9"},{default:t(()=>[a(d,{modelValue:l(i).tingkat,"onUpdate:modelValue":[e[4]||(e[4]=s=>l(i).tingkat=s),F],placeholder:"== Pilih Tingkat kelas ==",items:"tingkatKelas"in n?n.tingkatKelas:l(pa),clearable:"","clear-icon":"tabler-x","error-messages":l(_).tingkat,disabled:l(i).aksi=="detil"},null,8,["modelValue","items","error-messages","disabled"])]),_:1})]),_:1})]),_:1}),a(o,{cols:"12"},{default:t(()=>[a(g,{"no-gutters":""},{default:t(()=>[a(o,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:t(()=>e[23]||(e[23]=[b("label",{class:"v-label text-body-2 text-high-emphasis",for:"rombongan_belajar_id"},"Rombongan Belajar",-1)])),_:1}),a(o,{cols:"12",md:"9"},{default:t(()=>[a(d,{modelValue:l(i).rombongan_belajar_id,"onUpdate:modelValue":[e[5]||(e[5]=s=>l(i).rombongan_belajar_id=s),M],placeholder:"== Pilih Rombongan Belajar == ",items:l(m).rombel,clearable:"","clear-icon":"tabler-x","item-value":"rombongan_belajar_id","item-title":"nama",loading:l(u).rombel,disabled:l(u).rombel||l(i).aksi=="detil","error-messages":l(_).rombongan_belajar_id},null,8,["modelValue","items","loading","disabled","error-messages"])]),_:1})]),_:1})]),_:1}),a(o,{cols:"12"},{default:t(()=>[a(g,{"no-gutters":""},{default:t(()=>[a(o,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:t(()=>e[24]||(e[24]=[b("label",{class:"v-label text-body-2 text-high-emphasis",for:"dudi_id"},"DUDI",-1)])),_:1}),a(o,{cols:"12",md:"9"},{default:t(()=>[a(d,{modelValue:l(i).dudi_id,"onUpdate:modelValue":[e[6]||(e[6]=s=>l(i).dudi_id=s),E],placeholder:"== Pilih DUDI == ",items:l(m).dudi,clearable:"","clear-icon":"tabler-x","item-value":"dudi_id","item-title":"nama",loading:l(u).dudi,disabled:l(u).dudi||l(i).aksi=="detil","error-messages":l(_).dudi_id},null,8,["modelValue","items","loading","disabled","error-messages"])]),_:1})]),_:1})]),_:1}),a(o,{cols:"12"},{default:t(()=>[a(g,{"no-gutters":""},{default:t(()=>[a(o,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:t(()=>e[25]||(e[25]=[b("label",{class:"v-label text-body-2 text-high-emphasis",for:"akt_pd_id"},"Perjanjian Kerja Sama (PKS)",-1)])),_:1}),a(o,{cols:"12",md:"9"},{default:t(()=>[a(d,{modelValue:l(i).akt_pd_id,"onUpdate:modelValue":[e[7]||(e[7]=s=>l(i).akt_pd_id=s),Q],placeholder:"== Pilih Perjanjian Kerja Sama (PKS) == ",items:l(m).akt_pd,clearable:"","clear-icon":"tabler-x","item-value":"akt_pd_id","item-title":"judul_akt_pd",loading:l(u).akt_pd,disabled:l(u).akt_pd||l(i).aksi=="detil","error-messages":l(_).akt_pd_id},null,8,["modelValue","items","loading","disabled","error-messages"])]),_:1})]),_:1})]),_:1}),a(o,{cols:"12"},{default:t(()=>[a(g,{"no-gutters":""},{default:t(()=>[a(o,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:t(()=>e[26]||(e[26]=[b("label",{class:"v-label text-body-2 text-high-emphasis",for:"tanggal_mulai"},"Tanggal Mulai",-1)])),_:1}),a(o,{cols:"12",md:"9"},{default:t(()=>[a(O,{modelValue:l(i).tanggal_mulai,"onUpdate:modelValue":e[8]||(e[8]=s=>l(i).tanggal_mulai=s),placeholder:"== Pilih Tanggal Mulai ==",config:l(q),"error-messages":l(_).tanggal_mulai,disabled:l(i).aksi=="detil"},null,8,["modelValue","config","error-messages","disabled"])]),_:1})]),_:1})]),_:1}),a(o,{cols:"12"},{default:t(()=>[a(g,{"no-gutters":""},{default:t(()=>[a(o,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:t(()=>e[27]||(e[27]=[b("label",{class:"v-label text-body-2 text-high-emphasis",for:"tanggal_mulai"},"Tanggal Selesai",-1)])),_:1}),a(o,{cols:"12",md:"9"},{default:t(()=>[a(O,{modelValue:l(i).tanggal_selesai,"onUpdate:modelValue":e[9]||(e[9]=s=>l(i).tanggal_selesai=s),placeholder:"== Pilih Tanggal Selesai ==",config:l(q),"error-messages":l(_).tanggal_selesai,disabled:l(i).aksi=="detil"},null,8,["modelValue","config","error-messages","disabled"])]),_:1})]),_:1})]),_:1}),a(o,{cols:"12"},{default:t(()=>[a(g,{"no-gutters":""},{default:t(()=>[a(o,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:t(()=>e[28]||(e[28]=[b("label",{class:"v-label text-body-2 text-high-emphasis",for:"instruktur"},"Instruktur",-1)])),_:1}),a(o,{cols:"12",md:"9"},{default:t(()=>[a(V,{modelValue:l(i).instruktur,"onUpdate:modelValue":e[10]||(e[10]=s=>l(i).instruktur=s),placeholder:"Nama Instruktur","error-messages":l(_).instruktur,disabled:l(i).aksi=="detil"},null,8,["modelValue","error-messages","disabled"])]),_:1})]),_:1})]),_:1}),a(o,{cols:"12"},{default:t(()=>[a(g,{"no-gutters":""},{default:t(()=>[a(o,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:t(()=>e[29]||(e[29]=[b("label",{class:"v-label text-body-2 text-high-emphasis",for:"nip"},"NIP",-1)])),_:1}),a(o,{cols:"12",md:"9"},{default:t(()=>[a(V,{modelValue:l(i).nip,"onUpdate:modelValue":e[11]||(e[11]=s=>l(i).nip=s),placeholder:"NIP Instruktur (Jika ada)",disabled:l(i).aksi=="detil"},null,8,["modelValue","disabled"])]),_:1})]),_:1})]),_:1}),l(j)?(C(),z(o,{key:0,cols:"12"},{default:t(()=>[a(g,{"no-gutters":""},{default:t(()=>[a(o,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:t(()=>e[30]||(e[30]=[b("label",{class:"v-label text-body-2 text-high-emphasis",for:"tp"},"Tujuan Pembelajaran",-1)])),_:1}),a(o,{cols:"12",md:"9"},{default:t(()=>[l(m).tp?(C(!0),G(H,{key:0},wa(l(m).tp,s=>(C(),z(Ka,{key:s.tp_id,modelValue:l(i).tp_id,"onUpdate:modelValue":e[12]||(e[12]=T=>l(i).tp_id=T),label:s.deskripsi,value:s.tp_id,disabled:l(i).aksi=="detil"},null,8,["modelValue","label","value","disabled"]))),128)):W("",!0)]),_:1})]),_:1})]),_:1})):W("",!0)]),_:1})]),_:1},8,["isDialogVisible","dialog-title","errors","isSubmitBtn"]),a(ma,{isDialogVisible:l(D),"onUpdate:isDialogVisible":e[14]||(e[14]=s=>R(D)?D.value=s:null),isNotifVisible:l(y),"onUpdate:isNotifVisible":e[15]||(e[15]=s=>R(y)?y.value=s:null),"confirmation-question":"Apakah Anda yakin?","confirmation-text":"Tindakan ini tidak dapat dikembalikan!","confirm-color":l(x).color,"confirm-title":l(x).title,"confirm-msg":l(x).text,onConfirm:na,onClose:oa},null,8,["isDialogVisible","isNotifVisible","confirm-color","confirm-title","confirm-msg"])],64)}}};export{Ve as default};
