import{r as f}from"./validators-CXK_eVNV.js";import{r as s,G as J,c as N,b as o,e as n,m as l,a2 as M,o as m,f as g,am as O,ap as E,aa as Z,t as G,d as j,$ as z}from"./main-WcaAB0Vb.js";import{_ as H}from"./AlertDialog-D8L9rZ88.js";import{_ as Y}from"./AppTextField-CpIb7EwY.js";import{i as Q,_ as X}from"./id-C4wjfVLN.js";import{_ as ee}from"./AppSelect-D2mvpW-q.js";import{u as ae,c as le}from"./createUrl-5K3jXwP3.js";import{d as R,a as B}from"./mixins-CyMBM5fU.js";import{$ as F}from"./api-bn4q6wV9.js";import{V as oe,b as I}from"./VCard-B6efkknt.js";import{V as te}from"./VDivider-DIWjfe5J.js";import{V as re}from"./VForm-Ceyv7-oM.js";import{V as h,a as i}from"./VRow-e-Ng4Tme.js";import{V as ne}from"./VImg-BR-W7-GF.js";import{V as _}from"./VFileInput-BxfRpVfA.js";import"./VDialog-B8hMcs5D.js";import"./VOverlay-Baakzd79.js";import"./forwardRefs-DWGaNmQL.js";import"./scopeId-UpMB3NtI.js";import"./VLabel-6jXlAgoN.js";/* empty css                   */import"./VField-Bv5GDULG.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./VSelect-D68HqIbk.js";import"./VList-BTYRvNWn.js";import"./ssrBoot-Dq8dOG3X.js";import"./VAvatar-C5PogN-2.js";import"./VMenu-BI4mPtMf.js";import"./VSelectionControl-D1_dFLIC.js";import"./VChip-LzakvH-4.js";import"./VSlideGroup-aRldGfCL.js";import"./index-BxkgbwWS.js";/* empty css              */const Le={__name:"umum",setup(ie){const c=s(),e=s({semester_id:null,tanggal_rapor:null,tanggal_rapor_kelas_akhir:null,zona:null,kepala_sekolah:null,jabatan:null,rombel_4_tahun:[],url_dapodik:null,token_dapodik:null,photo:null,bg_login:null,ttd_kepsek:null,ttd_tinggi:null,ttd_lebar:null});J(async()=>{await V()});const S=s([]),T=s([]),U=s([]),y=s(!0),k=s(!1),b=s({color:"",title:"",text:""}),K=s(),D=s(),V=async()=>{try{let a=(await ae(le("/setting",{query:{sekolah_id:R.sekolah_id,semester_id:B.semester_id}}))).data.value;S.value=a.semester,T.value=a.data_guru,U.value=a.data_rombel,K.value=a.bg_login,D.value=a.ttd_kepsek,e.value.semester_id=a.semester_id,e.value.tanggal_rapor=a.tanggal_rapor,e.value.tanggal_rapor_kelas_akhir=a.tanggal_rapor_kelas_akhir,e.value.zona=a.zona,e.value.kepala_sekolah=a.kepala_sekolah,e.value.jabatan=a.jabatan,e.value.rombel_4_tahun=a.rombel_4_tahun,e.value.url_dapodik=a.url_dapodik,e.value.token_dapodik=a.token_dapodik,e.value.ttd_tinggi=a.ttd_tinggi,e.value.ttd_lebar=a.ttd_lebar,a.logo_sekolah&&(P.value=a.logo_sekolah)}catch(t){console.error(t)}finally{y.value=!1}},$=s([{value:"Asia/Jakarta",title:"Waktu Indonesia Barat (WIB)"},{value:"Asia/Makassar",title:"Waktu Indonesia Tengah (WITA)"},{value:"Asia/Jayapura",title:"Waktu Indonesia Timur (WIT)"}]),w=s([{value:"Kepala Sekolah",title:"Kepala Sekolah"},{value:"Plt. Kepala Sekolah",title:"PLT Kepala Sekolah"},{value:"Plh. Kepala Sekolah",title:"PLH Kepala Sekolah"}]),P=s("/images/logo/tutwuri.png"),x=()=>{var t;(t=c.value)==null||t.validate().then(({valid:a})=>{a&&C()})},u=s({jabatan:void 0,semester_id:void 0,zona:void 0,photo:void 0,bg_login:void 0,ttd_kepsek:void 0,ttd_lebar:void 0,ttd_tinggi:void 0}),C=async()=>{const t=new FormData;t.append("photo",e.value.photo?e.value.photo:""),t.append("bg_login",e.value.bg_login?e.value.bg_login:""),t.append("ttd_kepsek",e.value.ttd_kepsek?e.value.ttd_kepsek:""),t.append("ttd_lebar",e.value.ttd_lebar?e.value.ttd_lebar:""),t.append("ttd_tinggi",e.value.ttd_tinggi?e.value.ttd_tinggi:""),t.append("semester_id",e.value.semester_id),t.append("sekolah_id",R.sekolah_id),t.append("semester_aktif",B.semester_id),t.append("tanggal_rapor_pts",e.value.tanggal_rapor_pts?e.value.tanggal_rapor_pts:""),t.append("tanggal_rapor",e.value.tanggal_rapor?e.value.tanggal_rapor:""),t.append("tanggal_rapor_kelas_akhir",e.value.tanggal_rapor_kelas_akhir?e.value.tanggal_rapor_kelas_akhir:""),t.append("zona",e.value.zona?e.value.zona:""),t.append("kepala_sekolah",e.value.kepala_sekolah?e.value.kepala_sekolah:""),t.append("jabatan",e.value.jabatan?e.value.jabatan:""),t.append("rombel_4_tahun",JSON.stringify(e.value.rombel_4_tahun)),t.append("url_dapodik",e.value.url_dapodik?e.value.url_dapodik:""),t.append("token_dapodik",e.value.token_dapodik?e.value.token_dapodik:""),await F("/setting/update",{method:"POST",body:t,onResponse({request:a,response:p,options:v}){let d=p._data;d.errors?u.value=d.errors:(k.value=!0,b.value={color:d.color,title:d.title,text:d.text})}})},L=()=>{V(),e.value.photo=null,e.value.bg_login=null},q=s({locale:Q.Indonesian,altFormat:"j F Y",altInput:!0}),A=async t=>{await F("/setting/reset-setting",{method:"POST",body:{data:t},onResponse(){V()}})};return(t,a)=>{const p=ee,v=X,d=Y,W=H;return m(),N("section",null,[o(oe,{title:"Pengaturan Umum"},{default:n(()=>[o(te),l(y)?(m(),g(I,{key:0,class:"text-center"},{default:n(()=>[o(O,{size:60,indeterminate:"",color:"error"})]),_:1})):(m(),g(I,{key:1},{default:n(()=>[o(re,{ref_key:"refVForm",ref:c,onSubmit:E(x,["prevent"])},{default:n(()=>[o(h,null,{default:n(()=>[o(i,{cols:"7"},{default:n(()=>[o(h,null,{default:n(()=>[o(i,{cols:"12"},{default:n(()=>[o(p,{modelValue:l(e).semester_id,"onUpdate:modelValue":a[0]||(a[0]=r=>l(e).semester_id=r),items:l(S),rules:["requiredValidator"in t?t.requiredValidator:l(f)],placeholder:"== Pilih Semester ==",label:"Periode Aktif",name:"semester_id","item-title":"nama","item-value":"semester_id",require:""},null,8,["modelValue","items","rules"])]),_:1}),o(i,{cols:"12"},{default:n(()=>[o(v,{modelValue:l(e).tanggal_rapor,"onUpdate:modelValue":a[1]||(a[1]=r=>l(e).tanggal_rapor=r),label:"Tanggal Rapor Semester",placeholder:"== Pilih Tanggal Rapor Semester ==",config:l(q)},null,8,["modelValue","config"])]),_:1}),o(i,{cols:"12"},{default:n(()=>[o(v,{modelValue:l(e).tanggal_rapor_kelas_akhir,"onUpdate:modelValue":a[2]||(a[2]=r=>l(e).tanggal_rapor_kelas_akhir=r),label:"Tanggal Rapor Kelas Akhir",placeholder:"== Pilih Tanggal Rapor Kelas Akhir ==",config:l(q)},null,8,["modelValue","config"])]),_:1}),o(i,{cols:"12"},{default:n(()=>[o(p,{modelValue:l(e).zona,"onUpdate:modelValue":a[3]||(a[3]=r=>l(e).zona=r),items:l($),rules:["requiredValidator"in t?t.requiredValidator:l(f)],placeholder:"== Pilih Zona Waktu ==",label:"Zona Waktu",name:"semester_id",require:""},null,8,["modelValue","items","rules"])]),_:1}),o(i,{cols:"12"},{default:n(()=>[o(p,{modelValue:l(e).kepala_sekolah,"onUpdate:modelValue":a[4]||(a[4]=r=>l(e).kepala_sekolah=r),items:l(T),rules:["requiredValidator"in t?t.requiredValidator:l(f)],placeholder:"== Pilih Kepala Sekolah ==",label:"Kepala Sekolah",name:"semester_id","item-title":"nama_lengkap","item-value":"guru_id",require:""},null,8,["modelValue","items","rules"])]),_:1}),o(i,{cols:"12"},{default:n(()=>[o(p,{modelValue:l(e).jabatan,"onUpdate:modelValue":a[5]||(a[5]=r=>l(e).jabatan=r),items:l(w),rules:["requiredValidator"in t?t.requiredValidator:l(f)],placeholder:"== Pilih Semester ==",label:"Jabatan Kepala Sekolah",name:"jabatan",require:""},null,8,["modelValue","items","rules"])]),_:1}),o(i,{cols:"12"},{default:n(()=>[o(p,{modelValue:l(e).rombel_4_tahun,"onUpdate:modelValue":a[6]||(a[6]=r=>l(e).rombel_4_tahun=r),chips:"",multiple:"","closable-chips":"",items:l(U),placeholder:"== Pilih Rombel 4 Tahun ==",label:"Rombel 4 Tahun",name:"rombel_4_tahun","item-title":"nama","item-value":"rombongan_belajar_id",require:""},null,8,["modelValue","items"])]),_:1}),o(i,{cols:"12"},{default:n(()=>[o(d,{modelValue:l(e).url_dapodik,"onUpdate:modelValue":a[7]||(a[7]=r=>l(e).url_dapodik=r),label:"URL Dapodik",placeholder:"Contoh: http://localhost:5774 (tanpa garis miring di akhir!)"},null,8,["modelValue"])]),_:1}),o(i,{cols:"12"},{default:n(()=>[o(d,{modelValue:l(e).token_dapodik,"onUpdate:modelValue":a[8]||(a[8]=r=>l(e).token_dapodik=r),label:"Token Web Services Dapodik",placeholder:"Token Web Services Dapodik"},null,8,["modelValue"])]),_:1}),o(i,{cols:"12",class:"d-flex gap-4"},{default:n(()=>[o(Z,{type:"submit"},{default:n(()=>a[19]||(a[19]=[G(" Simpan ")])),_:1})]),_:1})]),_:1})]),_:1}),o(i,{cols:"5"},{default:n(()=>[o(h,null,{default:n(()=>[o(i,{cols:"12"},{default:n(()=>[o(ne,{alt:"Logo Sekolah",src:l(P),cover:"",class:"w-100 mx-auto mb-10"},null,8,["src"]),o(_,{modelValue:l(e).photo,"onUpdate:modelValue":a[9]||(a[9]=r=>l(e).photo=r),"error-messages":l(u).photo,accept:"image/*",label:"Unggah Logo Sekolah"},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),o(i,{cols:"12"},{default:n(()=>[a[20]||(a[20]=j("label",{class:"v-label text-body-2 text-high-emphasis",for:"bg_login"},"Kustom Background (Laman Login & Register)",-1)),l(K)?(m(),g(_,{key:0,id:"bg_login",modelValue:l(e).bg_login,"onUpdate:modelValue":a[11]||(a[11]=r=>l(e).bg_login=r),"error-messages":l(u).bg_login,accept:"image/*",label:"Unggah Kustom Background"},{append:n(()=>[o(z,{icon:"tabler-trash",color:"error",size:"26",onClick:a[10]||(a[10]=r=>A("bg_login"))})]),_:1},8,["modelValue","error-messages"])):(m(),g(_,{key:1,id:"bg_login",modelValue:l(e).bg_login,"onUpdate:modelValue":a[12]||(a[12]=r=>l(e).bg_login=r),"error-messages":l(u).bg_login,accept:"image/*",label:"Unggah Kustom Background"},null,8,["modelValue","error-messages"]))]),_:1}),o(i,{cols:"12"},{default:n(()=>[a[21]||(a[21]=j("label",{class:"v-label text-body-2 text-high-emphasis",for:"ttd_kepsek"},"Scan TTD Kepala Sekolah",-1)),l(D)?(m(),g(_,{key:0,id:"ttd_kepsek",modelValue:l(e).ttd_kepsek,"onUpdate:modelValue":a[14]||(a[14]=r=>l(e).ttd_kepsek=r),"error-messages":l(u).ttd_kepsek,accept:"image/*",label:"Unggah Scan TTD Kepala Sekolah"},{append:n(()=>[o(z,{icon:"tabler-trash",color:"error",size:"26",onClick:a[13]||(a[13]=r=>A("ttd_kepsek"))})]),_:1},8,["modelValue","error-messages"])):(m(),g(_,{key:1,id:"ttd_kepsek",modelValue:l(e).ttd_kepsek,"onUpdate:modelValue":a[15]||(a[15]=r=>l(e).ttd_kepsek=r),"error-messages":l(u).ttd_kepsek,accept:"image/*",label:"Unggah Scan TTD Kepala Sekolah"},null,8,["modelValue","error-messages"]))]),_:1}),o(i,{cols:"12"},{default:n(()=>[o(d,{modelValue:l(e).ttd_tinggi,"onUpdate:modelValue":a[16]||(a[16]=r=>l(e).ttd_tinggi=r),label:"Ukuran Tinggi Scan TTD Kepala Sekolah",placeholder:"Ukuran Tinggi Scan TTD Kepala Sekolah","error-messages":l(u).ttd_tinggi},null,8,["modelValue","error-messages"])]),_:1}),o(i,{cols:"12"},{default:n(()=>[o(d,{modelValue:l(e).ttd_lebar,"onUpdate:modelValue":a[17]||(a[17]=r=>l(e).ttd_lebar=r),label:"Ukuran Lebar Scan TTD Kepala Sekolah",placeholder:"Ukuran Lebar Scan TTD Kepala Sekolah","error-messages":l(u).ttd_lebar},null,8,["modelValue","error-messages"])]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1}))]),_:1}),o(W,{isDialogVisible:l(k),"onUpdate:isDialogVisible":a[18]||(a[18]=r=>M(k)?k.value=r:null),"confirm-color":l(b).color,"confirm-title":l(b).title,"confirm-msg":l(b).text,onConfirm:L},null,8,["isDialogVisible","confirm-color","confirm-title","confirm-msg"])])}}};export{Le as default};
