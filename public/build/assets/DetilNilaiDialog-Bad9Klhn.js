import{_ as q}from"./AlertDialog-CuzkofM7.js";import{_ as P}from"./DialogCloseBtn-EZZA6T1w.js";import{$}from"./api-Bkbcc4ec.js";import{V as T,a as I,c as M,b as z}from"./VCard-CswHtBsG.js";import{V as w}from"./VDivider-DBczu0Ow.js";import{V as F}from"./VTable-CFJBDt5I.js";import{r as x,o as i,f as y,e as m,m as n,y as u,b as o,t as d,v as l,d as e,c as s,F as p,h as K,aa as C,a2 as O}from"./main-4ibPTuoX.js";import{V as R}from"./VDialog-BkAb0UEZ.js";const U={key:0},E={class:"text-center"},G={class:"text-center"},L={class:"text-center"},H={key:0,class:"text-center"},ae={__name:"DetilNilaiDialog",props:{isDialogVisible:{type:Boolean,required:!0},itemData:{type:Object,required:!0},titleDetilNilai:{type:String,required:!0},merdeka:{type:Boolean,required:!0},isPpa:{type:Boolean,required:!0},dataSiswa:{type:Array,required:!0},subMapel:{type:Number,default:()=>0}},emits:["update:isDialogVisible","refresh"],setup(r,{emit:B}){const g=r,V=b=>{h("update:isDialogVisible",b)},h=B,c=x(!1),f=x(!1),_=x({color:"",title:"",text:""}),A=async()=>{c.value=!0,console.log("generateNilai"),await $("/dashboard/generate-nilai",{method:"POST",body:{pembelajaran_id:g.itemData.pembelajaran_id,mata_pelajaran_id:g.itemData.mata_pelajaran_id,rombongan_belajar_id:g.itemData.rombongan_belajar_id},onResponse({request:b,response:t,options:D}){let k=t._data;f.value=!0,_.value={color:k.color,title:k.title,text:k.text}}})},j=()=>{c.value=!1,h("refresh")};return(b,t)=>{const D=P,k=q;return i(),y(R,{"model-value":g.isDialogVisible,"onUpdate:modelValue":V,"max-width":"100%",scrollable:"",persistent:"","content-class":"scrollable-dialog"},{default:m(()=>[n(c)?u("",!0):(i(),y(D,{key:0,onClick:t[0]||(t[0]=a=>V(!1))})),o(T,null,{default:m(()=>[o(I,{class:"pb-5"},{default:m(()=>[o(M,null,{default:m(()=>[d(l(r.titleDetilNilai),1)]),_:1})]),_:1}),o(w),o(F,null,{default:m(()=>[e("thead",null,[r.merdeka||r.isPpa?(i(),s("tr",U,t[3]||(t[3]=[e("th",{class:"text-center"},"No",-1),e("th",{class:"text-center"},"Nama",-1),e("th",{class:"text-center"},"NISN",-1),e("th",{class:"text-center"},"Agama",-1),e("th",{class:"text-center"},"Nilai Akhir",-1),e("th",{class:"text-center"},"Capaian Kompetensi",-1)]))):(i(),s(p,{key:1},[t[4]||(t[4]=e("tr",null,[e("th",{class:"text-center align-middle",rowspan:"2"},"No"),e("th",{class:"text-center align-middle",rowspan:"2"},"Nama"),e("th",{class:"text-center align-middle",rowspan:"2"},"NISN"),e("th",{class:"text-center align-middle",rowspan:"2"},"Agama"),e("th",{class:"text-center align-middle",colspan:"2"},"Nilai Pengetahuan"),e("th",{class:"text-center align-middle",colspan:"2"},"Nilai Keterampilan")],-1)),t[5]||(t[5]=e("tr",null,[e("th",{class:"text-center"},"Angka"),e("th",{class:"text-center"},"Predikat"),e("th",{class:"text-center"},"Angka"),e("th",{class:"text-center"},"Predikat")],-1))],64))]),e("tbody",null,[r.dataSiswa.length?(i(!0),s(p,{key:0},K(r.dataSiswa,(a,S)=>{var N,v;return i(),s("tr",null,[e("td",E,l(S+1),1),e("td",null,l(a.nama),1),e("td",G,l(a.nisn),1),e("td",L,l(a.agama.nama),1),r.merdeka||r.isPpa?(i(),s("td",H,[r.merdeka?(i(),s(p,{key:0},[d(l((N=a.nilai_akhir_kurmer)==null?void 0:N.nilai),1)],64)):(i(),s(p,{key:1},[d(l((v=a.nilai_akhir_pengetahuan)==null?void 0:v.nilai),1)],64))])):u("",!0),e("td",null,[a.deskripsi_mapel?(i(),s(p,{key:0},[a.deskripsi_mapel.deskripsi_pengetahuan&&a.deskripsi_mapel.deskripsi_keterampilan?(i(),s(p,{key:0},[d(l(a.deskripsi_mapel.deskripsi_pengetahuan)+" ",1),t[6]||(t[6]=e("hr",null,null,-1)),d(" "+l(a.deskripsi_mapel.deskripsi_keterampilan),1)],64)):u("",!0),a.deskripsi_mapel.deskripsi_pengetahuan&&!a.deskripsi_mapel.deskripsi_keterampilan?(i(),s(p,{key:1},[d(l(a.deskripsi_mapel.deskripsi_pengetahuan),1)],64)):u("",!0),!a.deskripsi_mapel.deskripsi_pengetahuan&&a.deskripsi_mapel.deskripsi_keterampilan?(i(),s(p,{key:2},[d(l(a.deskripsi_mapel.deskripsi_keterampilan),1)],64)):u("",!0)],64)):u("",!0)])])}),256)):u("",!0)])]),_:1}),o(w),o(z,{class:"d-flex justify-end flex-wrap gap-3 pt-5 overflow-visible"},{default:m(()=>[o(C,{onClick:t[1]||(t[1]=a=>b.$emit("update:isDialogVisible",!1)),size:"small",color:"secondary",loading:n(c),disabled:n(c)},{default:m(()=>t[7]||(t[7]=[d("Tutup")])),_:1},8,["loading","disabled"]),r.subMapel?(i(),y(C,{key:0,onClick:A,size:"small",loading:n(c),disabled:n(c)},{default:m(()=>t[8]||(t[8]=[d(" Generate Nilai")])),_:1},8,["loading","disabled"])):u("",!0)]),_:1})]),_:1}),o(k,{isDialogVisible:n(f),"onUpdate:isDialogVisible":t[2]||(t[2]=a=>O(f)?f.value=a:null),"confirm-color":n(_).color,"confirm-title":n(_).title,"confirm-msg":n(_).text,onConfirm:j},null,8,["isDialogVisible","confirm-color","confirm-title","confirm-msg"])]),_:1},8,["model-value"])}}};export{ae as _};
