import{b as w,c as A}from"./mixins-CKlf8GuV.js";import{C}from"./vue3-perfect-scrollbar-C4jVyOcS.js";import{a3 as $,a4 as D,a5 as R,a6 as T,a7 as E,b as t,j as N,a8 as a,r as F,m as s,o as l,f as u,e,d as c,v as m,t as d,c as v,F as _,h as b,a9 as S,$ as z,q as j,aa as q,y as G,ab as M}from"./main-BUumBu6a.js";import{u as U}from"./useAbility--A34N2KX.js";import{$ as H}from"./api-DGas9VfV.js";import{V as h}from"./VAvatar-Ba-Ggnm6.js";import{V as k}from"./VImg-D2Juqgex.js";import{V as J}from"./VMenu-CW6Pdemc.js";import{V as K,a as y,c as P,b as O}from"./VList-DzyT1C46.js";import{V}from"./VBadge-DfuK0S5y.js";import{V as Q}from"./VDivider-BnEsdsgF.js";import"./index-BxkgbwWS.js";import"./VOverlay-Bb4CDEq4.js";import"./forwardRefs-DWGaNmQL.js";import"./scopeId-CDzN2yrl.js";import"./ssrBoot-BYz6_xqb.js";const W=$({start:Boolean,end:Boolean,...D(),...R()},"VListItemAction"),X=T()({name:"VListItemAction",props:W(),setup(r,p){let{slots:n}=p;return E(()=>t(r.tag,{class:["v-list-item-action",{"v-list-item-action--start":r.start,"v-list-item-action--end":r.end},r.class],style:r.style},n)),{}}}),Y={class:"d-flex gap-2 align-center"},Z={class:"text-h6 font-weight-medium"},ee={class:"px-4 py-2"},ye={__name:"UserProfile",setup(r){N();const p=U(),n=a("userData"),I=M("erapor"),f=F(w),L=i=>{f.value=i};I.on(L);const x=async()=>{await H("/auth/logout",{method:"GET",async onResponse(){n.value=null,a("sekolah").value=null,a("semester").value=null,a("roles").value=null,a("accessToken").value=null,a("languages").value=null,a("userData").value=null,a("userAbilityRules").value=null,a("profilePhotoPath").value=null,p.update([]),window.location.replace("/login")},onResponseError({response:i}){console.log(i._data.errors)}})},B=[{type:"divider"},{type:"navItem",icon:"tabler-user",title:"Profile",to:{name:"profile"}},{type:"divider"}];return(i,g)=>s(n)?(l(),u(V,{key:0,dot:"",bordered:"",location:"bottom right","offset-x":"1","offset-y":"2",color:"success"},{default:e(()=>[t(h,{class:"cursor-pointer",color:"primary",variant:"tonal"},{default:e(()=>[t(k,{src:s(f)},null,8,["src"]),t(J,{activator:"parent",width:"240",location:"bottom end",offset:"12px"},{default:e(()=>[t(K,null,{default:e(()=>[t(y,null,{default:e(()=>[c("div",Y,[t(X,null,{default:e(()=>[t(V,{dot:"",location:"bottom right","offset-x":"3","offset-y":"3",color:"success",bordered:""},{default:e(()=>[t(h,{color:"primary",variant:"tonal"},{default:e(()=>[t(k,{src:s(f)},null,8,["src"])]),_:1})]),_:1})]),_:1}),c("div",null,[c("h6",Z,m(s(n).name),1),t(P,{class:"text-disabled"},{default:e(()=>[d(m(s(n).email),1)]),_:1})])])]),_:1}),t(y,null,{default:e(()=>[(l(!0),v(_,null,b("$roles"in i?i.$roles:s(A),o=>(l(),u(P,{key:o},{default:e(()=>[d(m(o),1)]),_:2},1024))),128))]),_:1}),t(s(C),{options:{wheelPropagation:!1}},{default:e(()=>[(l(),v(_,null,b(B,o=>(l(),v(_,{key:o.title},[o.type==="navItem"?(l(),u(y,{key:0,to:o.to},S({prepend:e(()=>[t(z,{icon:o.icon,size:"22"},null,8,["icon"])]),default:e(()=>[t(O,null,{default:e(()=>[d(m(o.title),1)]),_:2},1024)]),_:2},[o.badgeProps?{name:"append",fn:e(()=>[t(V,j({rounded:"sm",class:"me-3",ref_for:!0},o.badgeProps),null,16)]),key:"0"}:void 0]),1032,["to"])):(l(),u(Q,{key:1,class:"my-2"}))],64))),64)),c("div",ee,[t(q,{block:"",size:"small",color:"error","append-icon":"tabler-logout",onClick:x},{default:e(()=>g[0]||(g[0]=[d(" Logout ")])),_:1})])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):G("",!0)}};export{ye as default};
