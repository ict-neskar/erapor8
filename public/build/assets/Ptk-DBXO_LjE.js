import{_ as W}from"./AlertDialog-nRwOaxER.js";import{_ as O}from"./DialogCloseBtn-B69SY-1b.js";import{_ as X}from"./TablePagination-AEAhli5C.js";import{_ as Y}from"./AppTextField-BYuq6zq8.js";import{_ as Z}from"./AppSelect-DlsWZOle.js";import{r as p,G as ee,w as N,o as le,f as ae,e as l,b as e,t as x,v as y,d,m as o,aa as D,a2 as U,ao as te}from"./main-Dl0rUCYh.js";import{u as A,c as S}from"./createUrl-BlayIOuc.js";import{d as B,a as L}from"./mixins-1QYt5fru.js";import{$ as se}from"./api-CiS_WuT0.js";import{a as I,c as R,b as w,V as j}from"./VCard-cOUOYXWj.js";import{V as k}from"./VDivider-DE02SI82.js";import{V as oe}from"./VSpacer-BeSAieZB.js";import{V as de}from"./VDataTableServer-CpOXaHh_.js";import{V as ie}from"./VAvatar-AahfVeEd.js";import{V as re}from"./VImg-DiBI_SCk.js";import{V as ne}from"./VDialog-DALwxD56.js";import{V as ue}from"./VForm-C8sZwdRj.js";import{V as n,a as s}from"./VRow-BWoXzrFX.js";const me={class:"d-flex gap-2 align-center"},pe={class:"d-flex align-center flex-wrap gap-4"},fe={class:"d-flex align-center gap-x-4"},ge={class:"d-flex flex-column"},ce={class:"text-base"},_e={class:"text-sm"},Be={__name:"Ptk",props:{titleCard:{type:String,required:!0},data:{type:String,required:!0}},setup(C){const q=C,G=[{title:"Nama",key:"nama",sortable:!0},{title:"NIK",key:"nik",align:"center",sortable:!0},{title:"L/P",key:"jenis_kelamin",align:"center",sortable:!0},{title:"Tempat, Tanggal Lahir",key:"tempat_tanggal_lahir",sortable:!1},{title:"detil",key:"detil",align:"center",sortable:!1}],i=p({page:1,itemsPerPage:10,searchQuery:"",sortby:"nama",sortbydesc:"ASC"}),V=p(!1),K=p([]),_=p(0),Q=m=>{var t,f;i.value.sortby=(t=m[0])==null?void 0:t.key,i.value.sortbydesc=(f=m[0])==null?void 0:f.order},P=async()=>{V.value=!0;try{let t=(await A(S("/referensi/ptk",{query:{jenis_gtk:q.data,sekolah_id:B.sekolah_id,semester_id:L.semester_id,periode_aktif:L.nama,q:i.value.searchQuery,page:i.value.page,per_page:i.value.itemsPerPage,sortby:i.value.sortby,sortbydesc:i.value.sortbydesc}}))).data.value;K.value=t.data.data,_.value=t.data.total}catch(m){console.error(m)}finally{V.value=!1}};ee(async()=>{await P()}),N(i,async()=>{await P()},{deep:!0}),N(()=>i.value.searchQuery,()=>{i.value.page=1});const g=p(!1),b=p(!1),v=p({color:null,title:null,text:null}),h=p([]),$=p(""),u=p({}),c=p({guru_id:null,gelar_depan:null,gelar_belakang:null,sekolah_id:B.sekolah_id}),z=async m=>{c.value.guru_id=m,h.value[m]=!0;try{let f=(await A(S(`/referensi/ptk/detil/${m}`))).data.value;$.value=`Detil PTK (${f.ptk.nama_lengkap})`,u.value=f.ptk,c.value.gelar_depan=f.ptk.gelar_depan,c.value.gelar_belakang=f.ptk.gelar_belakang}catch(t){console.error(t)}finally{h.value[m]=!1,g.value=!0}},F=async()=>{await se("/referensi/ptk/update",{method:"POST",body:c.value,onResponse({request:m,response:t,options:f}){let r=t._data;g.value=!1,v.value=r,b.value=!0}})},E=async()=>{await P()};return(m,t)=>{const f=Z,r=Y,H=X,J=O,M=W;return le(),ae(j,{class:"mb-6"},{default:l(()=>[e(I,{class:"pb-4"},{default:l(()=>[e(R,null,{default:l(()=>[x(y(C.titleCard),1)]),_:1})]),_:1}),e(k),e(w,{class:"d-flex flex-wrap gap-4"},{default:l(()=>[d("div",me,[e(f,{modelValue:o(i).itemsPerPage,"onUpdate:modelValue":t[0]||(t[0]=a=>o(i).itemsPerPage=a),items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"}],style:{"inline-size":"15.5rem"}},null,8,["modelValue"])]),e(oe),d("div",pe,[e(r,{modelValue:o(i).searchQuery,"onUpdate:modelValue":t[1]||(t[1]=a=>o(i).searchQuery=a),placeholder:"Cari data",style:{"inline-size":"15.625rem"}},null,8,["modelValue"])])]),_:1}),e(k),e(de,{page:o(i).page,"onUpdate:page":t[3]||(t[3]=a=>o(i).page=a),"items-per-page":o(i).itemsPerPage,"items-per-page-options":[{value:10,title:"10"},{value:20,title:"20"},{value:50,title:"50"}],items:o(K),"server-items-length":o(_),"items-length":o(_),headers:G,"items-per-page-text":"Item",class:"text-no-wrap",options:o(i),loading:o(V),"loading-text":"Loading...","onUpdate:sortBy":Q},{"item.nama":l(({item:a})=>[d("div",fe,[e(ie,{size:"34",variant:a.photo?void 0:"tonal",color:a.photo?void 0:"success"},{default:l(()=>[e(re,{src:a.photo},null,8,["src"])]),_:2},1032,["variant","color"]),d("div",ge,[d("h6",ce,y(a.nama_lengkap),1),d("div",_e,y(a.email),1)])])]),"item.detil":l(({item:a})=>[e(D,{loading:o(h)[a.guru_id],disabled:o(h)[a.guru_id],color:"warning",icon:"tabler-eye",onClick:T=>z(a.guru_id)},null,8,["loading","disabled","onClick"])]),bottom:l(()=>[e(H,{page:o(i).page,"onUpdate:page":t[2]||(t[2]=a=>o(i).page=a),"items-per-page":o(i).itemsPerPage,"total-items":o(_)},null,8,["page","items-per-page","total-items"])]),_:1},8,["page","items-per-page","items","server-items-length","items-length","options","loading"]),e(ne,{modelValue:o(g),"onUpdate:modelValue":t[8]||(t[8]=a=>U(g)?g.value=a:null),width:"700",scrollable:"","content-class":"scrollable-dialog"},{default:l(()=>[e(J,{onClick:t[4]||(t[4]=a=>g.value=!o(g))}),e(ue,{onSubmit:te(F,["prevent"])},{default:l(()=>[e(j,null,{default:l(()=>[e(I,{class:"pb-5"},{default:l(()=>[e(R,null,{default:l(()=>[x(y(o($)),1)]),_:1})]),_:1}),e(k),e(w,null,{default:l(()=>[e(n,null,{default:l(()=>[e(s,{cols:"12"},{default:l(()=>[e(n,{"no-gutters":""},{default:l(()=>[e(s,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>t[10]||(t[10]=[d("label",{class:"v-label text-body-2 text-high-emphasis",for:"nama"},"Nama Lengkap",-1)])),_:1}),e(s,{cols:"12",md:"9"},{default:l(()=>{var a;return[e(r,{id:"nama",value:(a=o(u))==null?void 0:a.nama_lengkap,placeholder:"Nama Lengkap","persistent-placeholder":"",disabled:""},null,8,["value"])]}),_:1})]),_:1})]),_:1}),e(s,{cols:"12"},{default:l(()=>[e(n,{"no-gutters":""},{default:l(()=>[e(s,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>t[11]||(t[11]=[d("label",{class:"v-label text-body-2 text-high-emphasis",for:"gelar_depan"},"Gelar Depan",-1)])),_:1}),e(s,{cols:"12",md:"9"},{default:l(()=>[e(r,{id:"gelar_depan",modelValue:o(c).gelar_depan,"onUpdate:modelValue":t[5]||(t[5]=a=>o(c).gelar_depan=a),placeholder:"Gelar Depan","persistent-placeholder":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(s,{cols:"12"},{default:l(()=>[e(n,{"no-gutters":""},{default:l(()=>[e(s,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>t[12]||(t[12]=[d("label",{class:"v-label text-body-2 text-high-emphasis",for:"gelar_belakang"},"Gelar Belakang",-1)])),_:1}),e(s,{cols:"12",md:"9"},{default:l(()=>[e(r,{id:"gelar_belakang",modelValue:o(c).gelar_belakang,"onUpdate:modelValue":t[6]||(t[6]=a=>o(c).gelar_belakang=a),placeholder:"Gelar Belakang","persistent-placeholder":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(s,{cols:"12"},{default:l(()=>[e(n,{"no-gutters":""},{default:l(()=>[e(s,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>t[13]||(t[13]=[d("label",{class:"v-label text-body-2 text-high-emphasis",for:"nuptk"},"NUPTK",-1)])),_:1}),e(s,{cols:"12",md:"9"},{default:l(()=>{var a;return[e(r,{id:"nama",value:(a=o(u))==null?void 0:a.nuptk,placeholder:"NUPTK","persistent-placeholder":"",disabled:""},null,8,["value"])]}),_:1})]),_:1})]),_:1}),e(s,{cols:"12"},{default:l(()=>[e(n,{"no-gutters":""},{default:l(()=>[e(s,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>t[14]||(t[14]=[d("label",{class:"v-label text-body-2 text-high-emphasis",for:"nip"},"NIP",-1)])),_:1}),e(s,{cols:"12",md:"9"},{default:l(()=>{var a;return[e(r,{id:"nama",value:(a=o(u))==null?void 0:a.nip,placeholder:"NIP","persistent-placeholder":"",disabled:""},null,8,["value"])]}),_:1})]),_:1})]),_:1}),e(s,{cols:"12"},{default:l(()=>[e(n,{"no-gutters":""},{default:l(()=>[e(s,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>t[15]||(t[15]=[d("label",{class:"v-label text-body-2 text-high-emphasis",for:"nik"},"NIK",-1)])),_:1}),e(s,{cols:"12",md:"9"},{default:l(()=>{var a;return[e(r,{id:"nama",value:(a=o(u))==null?void 0:a.nik,placeholder:"NIK","persistent-placeholder":"",disabled:""},null,8,["value"])]}),_:1})]),_:1})]),_:1}),e(s,{cols:"12"},{default:l(()=>[e(n,{"no-gutters":""},{default:l(()=>[e(s,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>t[16]||(t[16]=[d("label",{class:"v-label text-body-2 text-high-emphasis",for:"jenis_kelamin"},"Jenis Kelamin",-1)])),_:1}),e(s,{cols:"12",md:"9"},{default:l(()=>{var a;return[e(r,{id:"nama",value:(a=o(u))==null?void 0:a.jenis_kelamin_str,placeholder:"Jenis Kelamin","persistent-placeholder":"",disabled:""},null,8,["value"])]}),_:1})]),_:1})]),_:1}),e(s,{cols:"12"},{default:l(()=>[e(n,{"no-gutters":""},{default:l(()=>[e(s,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>t[17]||(t[17]=[d("label",{class:"v-label text-body-2 text-high-emphasis",for:"tempat_lahir"},"Tempat Lahir",-1)])),_:1}),e(s,{cols:"12",md:"9"},{default:l(()=>{var a;return[e(r,{id:"nama",value:(a=o(u))==null?void 0:a.tempat_lahir,placeholder:"Tempat Lahir","persistent-placeholder":"",disabled:""},null,8,["value"])]}),_:1})]),_:1})]),_:1}),e(s,{cols:"12"},{default:l(()=>[e(n,{"no-gutters":""},{default:l(()=>[e(s,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>t[18]||(t[18]=[d("label",{class:"v-label text-body-2 text-high-emphasis",for:"tanggal_lahir_indo"},"Tanggal Lahir",-1)])),_:1}),e(s,{cols:"12",md:"9"},{default:l(()=>{var a;return[e(r,{id:"nama",value:(a=o(u))==null?void 0:a.tanggal_lahir_indo,placeholder:"Tanggal Lahir","persistent-placeholder":"",disabled:""},null,8,["value"])]}),_:1})]),_:1})]),_:1}),e(s,{cols:"12"},{default:l(()=>[e(n,{"no-gutters":""},{default:l(()=>[e(s,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>t[19]||(t[19]=[d("label",{class:"v-label text-body-2 text-high-emphasis",for:"agama_id"},"Agama",-1)])),_:1}),e(s,{cols:"12",md:"9"},{default:l(()=>{var a,T;return[e(r,{id:"nama",value:(T=(a=o(u))==null?void 0:a.agama)==null?void 0:T.nama,placeholder:"Agama","persistent-placeholder":"",disabled:""},null,8,["value"])]}),_:1})]),_:1})]),_:1}),e(s,{cols:"12"},{default:l(()=>[e(n,{"no-gutters":""},{default:l(()=>[e(s,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>t[20]||(t[20]=[d("label",{class:"v-label text-body-2 text-high-emphasis",for:"alamat"},"Alamat",-1)])),_:1}),e(s,{cols:"12",md:"9"},{default:l(()=>{var a;return[e(r,{id:"nama",value:(a=o(u))==null?void 0:a.alamat,placeholder:"Alamat","persistent-placeholder":"",disabled:""},null,8,["value"])]}),_:1})]),_:1})]),_:1}),e(s,{cols:"12"},{default:l(()=>[e(n,{"no-gutters":""},{default:l(()=>[e(s,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>t[21]||(t[21]=[d("label",{class:"v-label text-body-2 text-high-emphasis",for:"rt"},"RT",-1)])),_:1}),e(s,{cols:"12",md:"9"},{default:l(()=>{var a;return[e(r,{id:"nama",value:(a=o(u))==null?void 0:a.rt,placeholder:"RT","persistent-placeholder":"",disabled:""},null,8,["value"])]}),_:1})]),_:1})]),_:1}),e(s,{cols:"12"},{default:l(()=>[e(n,{"no-gutters":""},{default:l(()=>[e(s,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>t[22]||(t[22]=[d("label",{class:"v-label text-body-2 text-high-emphasis",for:"rw"},"RW",-1)])),_:1}),e(s,{cols:"12",md:"9"},{default:l(()=>{var a;return[e(r,{id:"nama",value:(a=o(u))==null?void 0:a.rw,placeholder:"RW","persistent-placeholder":"",disabled:""},null,8,["value"])]}),_:1})]),_:1})]),_:1}),e(s,{cols:"12"},{default:l(()=>[e(n,{"no-gutters":""},{default:l(()=>[e(s,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>t[23]||(t[23]=[d("label",{class:"v-label text-body-2 text-high-emphasis",for:"desa_kelurahan"},"Desa/Kelurahan",-1)])),_:1}),e(s,{cols:"12",md:"9"},{default:l(()=>{var a;return[e(r,{id:"nama",value:(a=o(u))==null?void 0:a.desa_kelurahan,placeholder:"Desa/Kelurahan","persistent-placeholder":"",disabled:""},null,8,["value"])]}),_:1})]),_:1})]),_:1}),e(s,{cols:"12"},{default:l(()=>[e(n,{"no-gutters":""},{default:l(()=>[e(s,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>t[24]||(t[24]=[d("label",{class:"v-label text-body-2 text-high-emphasis",for:"kecamatan"},"Kecamatan",-1)])),_:1}),e(s,{cols:"12",md:"9"},{default:l(()=>{var a;return[e(r,{id:"nama",value:(a=o(u))==null?void 0:a.kecamatan,placeholder:"Kecamatan","persistent-placeholder":"",disabled:""},null,8,["value"])]}),_:1})]),_:1})]),_:1}),e(s,{cols:"12"},{default:l(()=>[e(n,{"no-gutters":""},{default:l(()=>[e(s,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>t[25]||(t[25]=[d("label",{class:"v-label text-body-2 text-high-emphasis",for:"kode_pos"},"Kodepos",-1)])),_:1}),e(s,{cols:"12",md:"9"},{default:l(()=>{var a;return[e(r,{id:"nama",value:(a=o(u))==null?void 0:a.kode_pos,placeholder:"Kodepos","persistent-placeholder":"",disabled:""},null,8,["value"])]}),_:1})]),_:1})]),_:1}),e(s,{cols:"12"},{default:l(()=>[e(n,{"no-gutters":""},{default:l(()=>[e(s,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>t[26]||(t[26]=[d("label",{class:"v-label text-body-2 text-high-emphasis",for:"no_hp"},"Telp/HP",-1)])),_:1}),e(s,{cols:"12",md:"9"},{default:l(()=>{var a;return[e(r,{id:"nama",value:(a=o(u))==null?void 0:a.no_hp,placeholder:"Telp/HP","persistent-placeholder":"",disabled:""},null,8,["value"])]}),_:1})]),_:1})]),_:1}),e(s,{cols:"12"},{default:l(()=>[e(n,{"no-gutters":""},{default:l(()=>[e(s,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>t[27]||(t[27]=[d("label",{class:"v-label text-body-2 text-high-emphasis",for:"email"},"Email",-1)])),_:1}),e(s,{cols:"12",md:"9"},{default:l(()=>{var a;return[e(r,{id:"nama",value:(a=o(u))==null?void 0:a.email,placeholder:"Email","persistent-placeholder":"",disabled:""},null,8,["value"])]}),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(k),e(w,{class:"d-flex justify-end flex-wrap gap-3 pt-5 overflow-visible"},{default:l(()=>[e(D,{color:"secondary",variant:"tonal",onClick:t[7]||(t[7]=a=>g.value=!1)},{default:l(()=>t[28]||(t[28]=[x(" Tutup ")])),_:1}),e(D,{type:"submit"},{default:l(()=>t[29]||(t[29]=[x(" Perbaharui ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(M,{isDialogVisible:o(b),"onUpdate:isDialogVisible":t[9]||(t[9]=a=>U(b)?b.value=a:null),"confirm-color":o(v).color,"confirm-title":o(v).title,"confirm-msg":o(v).text,onConfirm:E},null,8,["isDialogVisible","confirm-color","confirm-title","confirm-msg"])]),_:1})}}};export{Be as _};
