import{r as i,c as b,d as r,b as a,m as o,e as s,x as T,a as C,o as L,M as f,H as c,v as R,ap as S,aa as B,t as M,$ as P}from"./main-BpmS5yjl.js";import{r as x,e as A}from"./validators-CXK_eVNV.js";import{_ as H}from"./AppTextField-BYQvWqvk.js";import{a as I,V,b as N}from"./VNodeRenderer-B8YiQcgB.js";import{l as _}from"./index-DXg9WRV2.js";import{$ as O}from"./api-CqoQuUrQ.js";import{V as $,a as F,c as j,b as h}from"./VCard-CHmpSx-c.js";import{V as q}from"./VForm-BtS5s1QD.js";import{V as E,a as m}from"./VRow-BacuoGYF.js";import"./VLabel-D6Y69236.js";import"./VImg-1iDcvPVu.js";/* empty css                   */import"./VField-Cktymv3Q.js";import"./forwardRefs-DWGaNmQL.js";import"./index-BxkgbwWS.js";import"./VAvatar-CwdAusxZ.js";/* empty css              */const K={class:"auth-wrapper d-flex align-center justify-center pa-4"},z={class:"position-relative my-sm-16"},D={class:"app-logo"},U=["src"],G={class:"app-logo-title"},pa={__name:"index",setup(J){const l=i({email:"",password:"",password_confirmation:"",token:""}),d=i({email:void 0,password:void 0,password_confirmation:void 0,token:void 0}),u=i(),n=i(!1),v=()=>{var e;console.log("resetPassword"),(e=u.value)==null||e.validate().then(({valid:t})=>{t&&k()})},k=async()=>{d.value={email:void 0,password:void 0,password_confirmation:void 0,token:void 0},n.value=!0;try{const e=await O("/auth/reset-password",{method:"POST",body:{email:l.value.email,password:l.value.password,password_confirmation:l.value.password_confirmation,token:l.value.token},onResponseError({response:t}){d.value=t._data.errors,n.value=!1}});g()}catch(e){n.value=!1,console.error(e)}finally{n.value=!1}},g=()=>{_("Kami telah mengirimkan tautan reset password melalui email Anda!",{closeOnClick:!1,autoClose:5e3,position:_.POSITION.TOP_RIGHT,dangerouslyHTMLString:!0})};return(e,t)=>{const p=C("RouterLink"),w=H;return L(),b("div",K,[r("div",z,[a(o(V),{nodes:("h"in e?e.h:o(f))("div",{innerHTML:o(I)}),class:"text-primary auth-v1-top-shape d-none d-sm-block"},null,8,["nodes"]),a(o(V),{nodes:("h"in e?e.h:o(f))("div",{innerHTML:o(N)}),class:"text-primary auth-v1-bottom-shape d-none d-sm-block"},null,8,["nodes"]),a($,{class:T(["auth-card",e.$vuetify.display.smAndUp?"pa-6":"pa-0"]),"max-width":"460"},{default:s(()=>[a(F,{class:"justify-center"},{default:s(()=>[a(j,null,{default:s(()=>[a(p,{to:"/"},{default:s(()=>[r("div",D,[r("img",{src:o(c).app.logo,height:"28"},null,8,U),r("h1",G,R(o(c).app.title),1)])]),_:1})]),_:1})]),_:1}),a(h,null,{default:s(()=>t[1]||(t[1]=[r("h4",{class:"text-h4 mb-1"}," Lupa Password? ðŸ”’ ",-1),r("p",{class:"mb-0"}," Masukkan email Anda dan kami akan mengirimkan instruksi untuk mengatur ulang password Anda ",-1)])),_:1}),a(h,null,{default:s(()=>[a(q,{ref_key:"refVForm",ref:u,onSubmit:S(v,["prevent"])},{default:s(()=>[a(E,null,{default:s(()=>[a(m,{cols:"12"},{default:s(()=>[a(w,{modelValue:o(l).email,"onUpdate:modelValue":t[0]||(t[0]=y=>o(l).email=y),autofocus:"",label:"Email",type:"email",rules:["requiredValidator"in e?e.requiredValidator:o(x),"emailValidator"in e?e.emailValidator:o(A)],"error-messages":o(d).email},null,8,["modelValue","rules","error-messages"])]),_:1}),a(m,{cols:"12"},{default:s(()=>[a(B,{block:"",type:"submit",loading:o(n),disabled:o(n)},{default:s(()=>t[2]||(t[2]=[M(" Kirim Link Reset ")])),_:1},8,["loading","disabled"])]),_:1}),a(m,{cols:"12"},{default:s(()=>[a(p,{class:"d-flex align-center justify-center",to:{name:"login"}},{default:s(()=>[a(P,{icon:"tabler-chevron-left",size:"20",class:"me-1 flip-in-rtl"}),t[3]||(t[3]=r("span",null,"Kembali ke laman login",-1))]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1},8,["class"])])])}}};export{pa as default};
