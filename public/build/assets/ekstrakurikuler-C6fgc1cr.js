import{_ as L}from"./AnggotaRombelDialog-b4o1AD4m.js";import{_ as Q}from"./TablePagination-BGwk3hCt.js";import{_ as h}from"./AppTextField-BTba3qr2.js";import{_ as j}from"./AppSelect-Cd9HFhsW.js";import{u as N,c as q}from"./createUrl-Ck_LlMGD.js";import{d as I,a as z}from"./mixins-B3UHDqO3.js";import{$ as F}from"./api-KcMzrp4S.js";import{V as G,a as K,c as M,b as O}from"./VCard-2_qp3Vvc.js";import{V as A}from"./VDivider-DOshNxjC.js";import{V as H,a as x}from"./VRow-90jB0EEo.js";import{V as J}from"./VDataTableServer-B7CylN9o.js";import{V as W}from"./VBadge-BirkVGUH.js";import{r as i,G as X,w as C,c as Y,b as l,e as r,m as t,a2 as _,o as Z,t as f,v as ee,aa as $,$ as ae}from"./main-BLR2YNPc.js";import"./ConfirmDialog-FUvEvqZ3.js";import"./VDialog-Hzphy_2H.js";import"./VOverlay-CiGj4qAf.js";import"./forwardRefs-DWGaNmQL.js";import"./scopeId-LkyyTvVZ.js";import"./VImg-C5whf5xb.js";import"./VToolbarItems-XF6Fjyj2.js";import"./VSpacer-C30FMztp.js";/* empty css              */import"./VAvatar-BZJqyIb4.js";import"./VTable-DC5yuf29.js";import"./VLabel-QfOIbUGb.js";/* empty css                   */import"./VField-BZSU_Yhz.js";import"./VSelect-DTXlVIl9.js";import"./VList-DhBNZzgQ.js";import"./ssrBoot-Cfszeb4X.js";import"./VMenu-IOUSI9rL.js";import"./VSelectionControl-Cco01M7z.js";import"./VChip-CM7CTnjc.js";import"./VSlideGroup-CtUoo4jB.js";import"./index-BxkgbwWS.js";import"./filter-95PybUkX.js";const Ne={__name:"ekstrakurikuler",setup(te){const o=i({page:1,itemsPerPage:10,searchQuery:"",selectedRole:null,sortby:"nama_ekskul",sortbydesc:"ASC"}),w=[{title:"Nama Ekstrakurikuler",key:"nama_ekskul"},{title:"Nama Pembina",key:"guru",sortable:!1},{title:"Prasarana",key:"alamat_ekskul"},{title:"Anggota Ekskul",key:"anggota",align:"center",sortable:!1},{title:"Aksi",key:"sinkron",align:"center",sortable:!1}],y=i([]),k=i(0),b=i(!1);X(async()=>{await V()}),C(o,async()=>{await V()},{deep:!0}),C(()=>o.value.searchQuery,()=>{o.value.page=1});const T=s=>{var e,n;o.value.sortby=(e=s[0])==null?void 0:e.key,o.value.sortbydesc=(n=s[0])==null?void 0:n.order},V=async()=>{b.value=!0;try{let e=(await N(q("/referensi/ekstrakurikuler",{query:{sekolah_id:I.sekolah_id,semester_id:z.semester_id,q:o.value.searchQuery,page:o.value.page,per_page:o.value.itemsPerPage,sortby:o.value.sortby,sortbydesc:o.value.sortbydesc}}))).data;y.value=e.value.data.data,k.value=e.value.data.total}catch(s){console.error(s)}finally{b.value=!1}},m=i(!1),u=i(!1),D=i(""),d=i([]),g=i(),p=i([]),S=async s=>{g.value=s,p.value[s]=!0,u.value=!0,g.value=s,m.value=!0,await F("/referensi/rombongan-belajar/anggota-rombel",{method:"POST",body:{rombongan_belajar_id:g.value},onResponse({request:e,response:n,options:P}){let c=n._data;D.value=`Anggota Ekstrakurikuler Kelas ${c.rombel.nama}`,d.value=c.data,u.value=!1,p.value[s]=!1}})},v=i([]),U=async s=>{v.value[s]=!0,console.log(s)},B=async()=>{getAnggota(g.value)};return(s,e)=>{const n=j,P=h,c=Q,R=L;return Z(),Y("section",null,[l(G,{class:"mb-6"},{default:r(()=>[l(K,{class:"pb-4"},{default:r(()=>[l(M,null,{default:r(()=>e[6]||(e[6]=[f("Data Ekstrakurikuler")])),_:1})]),_:1}),l(A),l(O,null,{default:r(()=>[l(H,null,{default:r(()=>[l(x,{cols:"12",md:"4",class:"d-flex align-items-center"},{default:r(()=>[l(n,{modelValue:t(o).itemsPerPage,"onUpdate:modelValue":e[0]||(e[0]=a=>t(o).itemsPerPage=a),items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"}]},null,8,["modelValue"])]),_:1}),l(x,{cols:"12",md:"4","offset-md":"4",class:"d-flex gap-4"},{default:r(()=>[l(P,{modelValue:t(o).searchQuery,"onUpdate:modelValue":e[1]||(e[1]=a=>t(o).searchQuery=a),placeholder:"Cari Data"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(A),l(J,{class:"text-no-wrap",items:t(y),"server-items-length":t(k),headers:w,options:t(o),loading:t(b),"loading-text":"Loading...","onUpdate:sortBy":T},{"item.guru":r(({item:a})=>[f(ee(a.guru.nama_lengkap),1)]),"item.anggota":r(({item:a})=>[l(W,{content:a.rombongan_belajar.anggota_rombel_count,color:"success"},{default:r(()=>[l($,{loading:t(p)[a.rombongan_belajar_id],disabled:t(p)[a.rombongan_belajar_id],onClick:E=>S(a.rombongan_belajar_id),size:"x-small"},{default:r(()=>e[7]||(e[7]=[f(" Detil ")])),_:2},1032,["loading","disabled","onClick"])]),_:2},1032,["content"])]),"item.sinkron":r(({item:a})=>[l($,{color:"error",onClick:E=>U(a.ekstrakurikuler_id),size:"x-small",loading:t(v)[a.ekstrakurikuler_id],disabled:t(v)[a.ekstrakurikuler_id]},{default:r(()=>[l(ae,{start:"",icon:"tabler-refresh"}),e[8]||(e[8]=f("Sinkron Anggta "))]),_:2},1032,["onClick","loading","disabled"])]),bottom:r(()=>[l(c,{page:t(o).page,"onUpdate:page":e[2]||(e[2]=a=>t(o).page=a),"items-per-page":t(o).itemsPerPage,"total-items":t(k)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items","server-items-length","options","loading"])]),_:1}),l(R,{isDialogVisible:t(m),"onUpdate:isDialogVisible":e[3]||(e[3]=a=>_(m)?m.value=a:null),isLoading:t(u),"onUpdate:isLoading":e[4]||(e[4]=a=>_(u)?u.value=a:null),"dialog-title":t(D),listData:t(d),"onUpdate:listData":e[5]||(e[5]=a=>_(d)?d.value=a:null),onRefresh:B},null,8,["isDialogVisible","isLoading","dialog-title","listData"])])}}};export{Ne as default};
