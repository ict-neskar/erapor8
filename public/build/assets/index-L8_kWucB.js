import{_ as z}from"./ConfirmDialog-D2Ym9elI.js";import{_ as E}from"./TablePagination-DmP15-SC.js";import{_ as F}from"./AppTextField-BkZ8OLsx.js";import{_ as K}from"./AppSelect-DwS2KVgh.js";import{u as O,c as G}from"./createUrl-C1_Sm4N7.js";import{d as y,a as H}from"./mixins-CKlf8GuV.js";import{$ as L}from"./api-DGas9VfV.js";import{V as M,a as J,c as W,b as h}from"./VCard-BpJLDfhD.js";import{V as C}from"./VDivider-BnEsdsgF.js";import{V as X}from"./VSpacer-xEwlP4UK.js";import{r,G as Y,w as S,c as w,b as t,e as i,m as s,a2 as B,a as Z,o as V,t as n,F as ee,d as p,aa as ae,v as d,$ as N,f as te}from"./main-BUumBu6a.js";import{V as ie}from"./VDataTableServer-ndkNIZXv.js";import{V as oe}from"./VAvatar-Ba-Ggnm6.js";import{V as se}from"./VImg-D2Juqgex.js";import{V as le}from"./VChip-BQa_6tD-.js";import{V as T}from"./VTooltip-CEfZsqvI.js";import{V as re}from"./VAlert-CuD5NV7H.js";import"./VDialog-BEKtFyZX.js";import"./VOverlay-Bb4CDEq4.js";import"./forwardRefs-DWGaNmQL.js";import"./scopeId-CDzN2yrl.js";import"./VLabel-BS4UTjHC.js";/* empty css                   */import"./VField-BQoKA9XH.js";import"./VSelect-CUZzVBlY.js";import"./VList-DzyT1C46.js";import"./ssrBoot-BYz6_xqb.js";import"./VMenu-CW6Pdemc.js";import"./VSelectionControl-C5g1YuyM.js";import"./index-BxkgbwWS.js";/* empty css              */import"./VTable-BUsnUoL5.js";import"./filter-Bl82YR7N.js";import"./VSlideGroup-DCwY19Ye.js";const ne={class:"me-3 d-flex gap-3"},pe={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},me={style:{"inline-size":"15.625rem"}},de={class:"d-flex align-center gap-x-4"},ue={class:"d-flex flex-column"},ce={class:"text-base"},fe={class:"text-sm"},We={__name:"index",setup(_e){const o=r({page:1,itemsPerPage:10,searchQuery:"",selectedRole:null,sortby:"updated_at",sortbydesc:"DESC"}),$=[{title:"Nama PD",key:"nama_pd",sortable:!1,nowrap:!0},{title:"Kelas",key:"rombel",sortable:!1,nowrap:!0},{title:"Dimensi Sikap",key:"dimensi_sikap",sortable:!1},{title:"Elemen Sikap",key:"elemen_sikap",sortable:!1},{key:"opsi_sikap",title:"Opsi Sikap",sortable:!1,align:"center"},{key:"deskripsi",title:"Uraian Sikap",sortable:!1},{title:"Aksi",key:"aksi",align:"center",sortable:!1,nowrap:!0}],x=r([]),g=r(0),k=r(!1);Y(async()=>{await b()}),S(o,async()=>{await b()},{deep:!0}),S(()=>o.value.searchQuery,()=>{o.value.page=1});const U=l=>{var e,_;o.value.sortby=(e=l[0])==null?void 0:e.key,o.value.sortbydesc=(_=l[0])==null?void 0:_.order},D=r(),b=async()=>{k.value=!0;try{let e=(await O(G("/penilaian/nilai-sikap",{query:{user_id:y.user_id,guru_id:y.guru_id,sekolah_id:y.sekolah_id,semester_id:H.semester_id,q:o.value.searchQuery,page:o.value.page,per_page:o.value.itemsPerPage,sortby:o.value.sortby,sortbydesc:o.value.sortbydesc}}))).data;x.value=e.value.data.data,g.value=e.value.data.total,D.value=e.value.kurtilas}catch(l){console.error(l)}finally{k.value=!1}},u=r(!1),c=r(!1),f=r({color:"",title:"",text:""}),v=r(),A=(l,e)=>{v.value=l,u.value=!0,console.log(e,l)},I=async()=>{await L("/penilaian/destroy",{method:"POST",body:{data:"nilai-sikap",id:v.value},onResponse({response:l}){let e=l._data;v.value=void 0,c.value=!0,f.value=e}})},j=async()=>{await b()};return(l,e)=>{const _=K,Q=F,P=Z("IconBtn"),R=E,q=z;return V(),w("section",null,[t(M,{class:"mb-6"},{default:i(()=>[t(J,{class:"pb-4"},{default:i(()=>[t(W,null,{default:i(()=>e[5]||(e[5]=[n("Penilaian Sikap")])),_:1})]),_:1}),t(C),s(D)?(V(),w(ee,{key:0},[t(h,{class:"d-flex flex-wrap gap-4"},{default:i(()=>[p("div",ne,[t(_,{modelValue:s(o).itemsPerPage,"onUpdate:modelValue":e[0]||(e[0]=a=>s(o).itemsPerPage=a),items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"}],style:{"inline-size":"6.25rem"}},null,8,["modelValue"])]),t(X),p("div",pe,[p("div",me,[t(Q,{modelValue:s(o).searchQuery,"onUpdate:modelValue":e[1]||(e[1]=a=>s(o).searchQuery=a),placeholder:"Cari Data"},null,8,["modelValue"])]),t(ae,{"prepend-icon":"tabler-plus",to:{name:"nilai-akademik-nilai-sikap-input-nilai"}},{default:i(()=>e[6]||(e[6]=[n(" Input Nilai ")])),_:1})])]),_:1}),t(C),t(ie,{items:s(x),"server-items-length":s(g),headers:$,options:s(o),loading:s(k),"loading-text":"Loading...","onUpdate:sortBy":U},{"item.nama_pd":i(({item:a})=>[p("div",de,[t(oe,{size:"34",variant:a.anggota_rombel.peserta_didik.photo?void 0:"tonal",color:a.anggota_rombel.peserta_didik.photo?void 0:"success"},{default:i(()=>[t(se,{src:a.anggota_rombel.peserta_didik.photo},null,8,["src"])]),_:2},1032,["variant","color"]),p("div",ue,[p("h6",ce,d(a.anggota_rombel.peserta_didik.nama),1),p("div",fe,d(a.anggota_rombel.peserta_didik.nisn),1)])])]),"item.rombel":i(({item:a})=>[n(d(a.anggota_rombel.rombongan_belajar.nama),1)]),"item.dimensi_sikap":i(({item:a})=>{var m;return[n(d((m=a.budaya_kerja)==null?void 0:m.aspek),1)]}),"item.elemen_sikap":i(({item:a})=>{var m;return[n(d((m=a.elemen_budaya_kerja)==null?void 0:m.elemen),1)]}),"item.opsi_sikap":i(({item:a})=>[t(le,{color:a.opsi_id?"success":"error"},{default:i(()=>[n(d(a.opsi_id?"Positif":"Negatif"),1)]),_:2},1032,["color"])]),"item.aksi":i(({item:a})=>[t(P,{to:{name:"nilai-akademik-nilai-sikap-id",params:{id:a.nilai_budaya_kerja_id}}},{default:i(()=>[t(T,{activator:"parent",location:"top"},{default:i(()=>e[7]||(e[7]=[n(" Ubah Data ")])),_:1}),t(N,{icon:"tabler-pencil"})]),_:2},1032,["to"]),t(P,{onClick:m=>A(a.nilai_budaya_kerja_id,"hapus")},{default:i(()=>[t(T,{activator:"parent",location:"top"},{default:i(()=>e[8]||(e[8]=[n(" Hapus Data ")])),_:1}),t(N,{icon:"tabler-trash"})]),_:2},1032,["onClick"])]),bottom:i(()=>[t(R,{page:s(o).page,"onUpdate:page":e[2]||(e[2]=a=>s(o).page=a),"items-per-page":s(o).itemsPerPage,"total-items":s(g)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items","server-items-length","options","loading"])],64)):(V(),te(h,{key:1},{default:i(()=>[t(re,{color:"error",variant:"tonal"},{default:i(()=>e[9]||(e[9]=[n(" Penilaian Sikap hanya bagi Satuan Pendidikan yang memiliki Rombongan Belajar Kurikulum 2013! ")])),_:1})]),_:1}))]),_:1}),t(q,{isDialogVisible:s(u),"onUpdate:isDialogVisible":e[3]||(e[3]=a=>B(u)?u.value=a:null),isNotifVisible:s(c),"onUpdate:isNotifVisible":e[4]||(e[4]=a=>B(c)?c.value=a:null),"confirmation-question":"Apakah Anda yakin?","confirmation-text":"Tindakan ini tidak dapat dikembalikan!","confirm-color":s(f).color,"confirm-title":s(f).title,"confirm-msg":s(f).text,onConfirm:I,onClose:j},null,8,["isDialogVisible","isNotifVisible","confirm-color","confirm-title","confirm-msg"])])}}};export{We as default};
