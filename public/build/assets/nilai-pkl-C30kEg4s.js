import{_ as D}from"./TablePagination-BRD4F1BT.js";import{_ as T}from"./AppTextField-Bdwte880.js";import{_ as C}from"./AppSelect-DFrAhbhb.js";import{d as _,a as b}from"./mixins-BjVJEZvR.js";import{u as w,c as x}from"./createUrl-8zoAcX36.js";import{V as S,c as U,a as j,b as Q}from"./VCard-CswHtBsG.js";import{V as $}from"./VDivider-DBczu0Ow.js";import{V as B,a as v}from"./VRow-C9aDKUvo.js";import{V as M}from"./VDataTableServer-BXGcUj1U.js";import{r as m,G as A,w as y,f as K,e as o,o as L,b as s,t as u,m as t,v as g}from"./main-4ibPTuoX.js";import"./VLabel-B0eCB5jg.js";import"./VImg-B9UUOYt7.js";/* empty css                   */import"./VField-DDWomVtf.js";import"./forwardRefs-DWGaNmQL.js";import"./VSelect-CJIVueWh.js";import"./VList-DRMF5v6F.js";import"./ssrBoot-CGBhTCaE.js";import"./VAvatar-DuOErqu_.js";import"./VOverlay-Dt1Dy2Gr.js";import"./scopeId-DgdHYkHx.js";import"./VMenu-HPtXLDMp.js";import"./VSelectionControl-Dw3cA4UE.js";import"./VChip-ClHLREYK.js";import"./VSlideGroup-DECG9arN.js";import"./index-BxkgbwWS.js";/* empty css              */import"./VTable-CFJBDt5I.js";import"./filter-CCPSJzNa.js";const ce={__name:"nilai-pkl",setup(q){const e=m({itemsPerPage:10,searchQuery:null,page:1,sortby:"updated_at",sortbydesc:"DESC",rombongan_belajar_id:null}),k=i=>{var a,n;e.value.sortby=(a=i[0])==null?void 0:a.key,e.value.sortbydesc=(n=i[0])==null?void 0:n.order};m([]);const c=m([]),d=m(0),p=m(!1),V=[{key:"kelas",title:"Kelas",sortable:!1},{key:"dudi",title:"DUDI",sortable:!1},{key:"pks",title:"PKS",sortable:!1},{key:"tanggal_mulai_str",title:"Tanggal Mulai",sortable:!0,align:"center"},{key:"tanggal_selesai_str",title:"Tanggal Selesai",sortable:!1,align:"center"},{key:"pd_pkl_count",title:"JML Peserta",sortable:!1,align:"center"}];A(async()=>{await f()}),y(e,async()=>{await f()},{deep:!0}),y(()=>e.value.searchQuery,()=>{e.value.page=1});const l=m({user_id:_.user_id,guru_id:_.guru_id,sekolah_id:_.sekolah_id,semester_id:b.semester_id,periode_aktif:b.nama,data:"nilai-pkl"}),f=async()=>{p.value=!0;try{let a=(await w(x("/monitoring",{query:{user_id:l.value.user_id,guru_id:l.value.guru_id,sekolah_id:l.value.sekolah_id,semester_id:l.value.semester_id,periode_aktif:l.value.nama,data:l.value.data,q:e.value.searchQuery,page:e.value.page,per_page:e.value.itemsPerPage,sortby:e.value.sortby,sortbydesc:e.value.sortbydesc,rombongan_belajar_id:e.value.rombongan_belajar_id}}))).data.value;c.value=a.data,d.value=a.total}catch(i){console.error(i)}finally{p.value=!1}};return(i,a)=>{const n=C,P=T,h=D;return L(),K(S,{class:"mb-6"},{default:o(()=>[s(j,{class:"pb-4"},{default:o(()=>[s(U,null,{default:o(()=>a[3]||(a[3]=[u("Monitoring Â» Penilaian PKL")])),_:1})]),_:1}),s($),s(Q,null,{default:o(()=>[s(B,null,{default:o(()=>[s(v,{cols:"12",md:"4"},{default:o(()=>[s(n,{modelValue:t(e).itemsPerPage,"onUpdate:modelValue":a[0]||(a[0]=r=>t(e).itemsPerPage=r),items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"}]},null,8,["modelValue"])]),_:1}),s(v,{cols:"12",md:"4","offset-md":"4"},{default:o(()=>[s(P,{modelValue:t(e).searchQuery,"onUpdate:modelValue":a[1]||(a[1]=r=>t(e).searchQuery=r),placeholder:"Cari Data"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),s(M,{items:t(c),"server-items-length":t(d),headers:V,options:t(e),loading:t(p),"loading-text":"Loading...","onUpdate:sortBy":k},{"item.kelas":o(({item:r})=>[u(g(r.rombongan_belajar.nama),1)]),"item.dudi":o(({item:r})=>[u(g(r.dudi.nama_dudi),1)]),"item.pks":o(({item:r})=>[u(g(r.dudi.judul_mou),1)]),bottom:o(()=>[s(h,{page:t(e).page,"onUpdate:page":a[2]||(a[2]=r=>t(e).page=r),"items-per-page":t(e).itemsPerPage,"total-items":t(d)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items","server-items-length","options","loading"])]),_:1})}}};export{ce as default};
