import{_ as tt}from"./AnggotaRombelDialog-DMwFpxs1.js";import{_ as et}from"./TablePagination-BRD4F1BT.js";import{_ as at}from"./AppTextField-Bdwte880.js";import{_ as lt}from"./AppSelect-DFrAhbhb.js";import{u as st,c as ot}from"./createUrl-8zoAcX36.js";import{d as nt,a as J}from"./mixins-BjVJEZvR.js";import{$ as K}from"./api-Bkbcc4ec.js";import{V as z,a as P,c as T,b as B}from"./VCard-CswHtBsG.js";import{V as it}from"./VDialog-BkAb0UEZ.js";import{V as _}from"./VDivider-DBczu0Ow.js";import{V as rt,a as E}from"./VRow-C9aDKUvo.js";import{V as ut}from"./VDataTableServer-BXGcUj1U.js";import{r,G as dt,w as G,c as m,b as e,e as s,m as o,a2 as A,o as d,t as p,v as i,aa as I,$ as O,d as a,F as V,h as U,f as mt}from"./main-4ibPTuoX.js";import{V as N}from"./VTable-CFJBDt5I.js";import{V as pt,a as gt,b as ft,c as ct}from"./VList-DRMF5v6F.js";import{V as _t}from"./VAvatar-DuOErqu_.js";import"./ConfirmDialog-BLscZHWo.js";import"./VToolbarItems-BQumWoZg.js";import"./VImg-B9UUOYt7.js";import"./VSpacer-DBg6JrlZ.js";/* empty css              */import"./VLabel-B0eCB5jg.js";/* empty css                   */import"./VField-DDWomVtf.js";import"./forwardRefs-DWGaNmQL.js";import"./VSelect-CJIVueWh.js";import"./VOverlay-Dt1Dy2Gr.js";import"./scopeId-DgdHYkHx.js";import"./VMenu-HPtXLDMp.js";import"./VSelectionControl-Dw3cA4UE.js";import"./VChip-ClHLREYK.js";import"./VSlideGroup-DECG9arN.js";import"./index-BxkgbwWS.js";import"./filter-CCPSJzNa.js";import"./ssrBoot-CGBhTCaE.js";const vt={key:1},bt={class:"text-center"},yt={class:"text-center"},kt={key:1},le={__name:"dudi",setup(Vt){const n=r({page:1,itemsPerPage:10,searchQuery:"",selectedRole:null,sortby:"nama",sortbydesc:"ASC"}),H=[{title:"Nama",key:"nama"},{title:"Bidang Usaha",key:"nama_bidang_usaha"},{title:"Alamat",key:"alamat_jalan"},{title:"Jml Aktifitas",key:"aktifitas",align:"center",sortable:!1},{title:"Aksi",key:"aksi",align:"center",sortable:!1}],R=r([]),C=r(0),$=r(!1);dt(async()=>{await h()}),G(n,async()=>{await h()},{deep:!0}),G(()=>n.value.searchQuery,()=>{n.value.page=1});const W=u=>{var t,c;n.value.sortby=(t=u[0])==null?void 0:t.key,n.value.sortbydesc=(c=u[0])==null?void 0:c.order},h=async()=>{$.value=!0;try{let t=(await st(ot("/referensi/dudi",{query:{sekolah_id:nt.sekolah_id,q:n.value.searchQuery,page:n.value.page,per_page:n.value.itemsPerPage,sortby:n.value.sortby,sortbydesc:n.value.sortbydesc}}))).data;R.value=t.value.data.data,C.value=t.value.data.total}catch(u){console.error(u)}finally{$.value=!1}},x=r(!1),y=r(!1),j=r(""),D=r([]),L=r(),F=async u=>{L.value=u,y.value=!0,x.value=!0,await K("/referensi/dudi/anggota-prakerin",{method:"POST",body:{akt_pd_id:L.value,semester_id:J.semester_id},onResponse({request:t,response:c,options:S}){let b=c._data;j.value="Anggota Aktifitas Prakerin",D.value=b,y.value=!1}})},w=r([]),k=r(!1),Q=r(),f=r(),q=r(),M=async u=>{q.value=u,w.value[u]=!0,await K("/referensi/dudi/detil-dudi",{method:"POST",body:{dudi_id:u,semester_id:J.semester_id},onResponse({request:t,response:c,options:S}){let b=c._data;w.value[u]=!1,Q.value=`Informasi DUDI ${b.nama}`,f.value=b,k.value=!0}})},X=async()=>{await F(L.value)},Y=async()=>[await M(q.value)];return(u,t)=>{const c=lt,S=at,b=et,Z=tt;return d(),m("section",null,[e(z,{class:"mb-6"},{default:s(()=>[e(P,{class:"pb-4"},{default:s(()=>[e(T,null,{default:s(()=>t[8]||(t[8]=[p("Data Ekstrakurikuler")])),_:1})]),_:1}),e(_),e(B,null,{default:s(()=>[e(rt,null,{default:s(()=>[e(E,{cols:"12",md:"4",class:"d-flex align-items-center"},{default:s(()=>[e(c,{modelValue:o(n).itemsPerPage,"onUpdate:modelValue":t[0]||(t[0]=l=>o(n).itemsPerPage=l),items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"}]},null,8,["modelValue"])]),_:1}),e(E,{cols:"12",md:"4","offset-md":"4",class:"d-flex gap-4"},{default:s(()=>[e(S,{modelValue:o(n).searchQuery,"onUpdate:modelValue":t[1]||(t[1]=l=>o(n).searchQuery=l),placeholder:"Cari Data"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(_),e(ut,{class:"text-no-wrap",items:o(R),"server-items-length":o(C),headers:H,options:o(n),loading:o($),"loading-text":"Loading...","onUpdate:sortBy":W},{"item.aktifitas":s(({item:l})=>[p(i(l.akt_pd_count),1)]),"item.aksi":s(({item:l})=>[e(I,{color:"error",onClick:g=>M(l.dudi_id),size:"x-small",loading:o(w)[l.dudi_id],disabled:o(w)[l.dudi_id]},{default:s(()=>[e(O,{start:"",icon:"tabler-eye"}),t[9]||(t[9]=p("Detil "))]),_:2},1032,["onClick","loading","disabled"])]),bottom:s(()=>[e(b,{page:o(n).page,"onUpdate:page":t[2]||(t[2]=l=>o(n).page=l),"items-per-page":o(n).itemsPerPage,"total-items":o(C)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items","server-items-length","options","loading"])]),_:1}),e(it,{modelValue:o(k),"onUpdate:modelValue":t[4]||(t[4]=l=>A(k)?k.value=l:null),scrollable:"",width:"100%","content-class":"scrollable-dialog"},{default:s(()=>[e(z,null,{default:s(()=>[e(P,{class:"pb-5"},{default:s(()=>[e(T,null,{default:s(()=>[p(i(o(Q)),1)]),_:1})]),_:1}),e(_),e(B,{style:{padding:"0"}},{default:s(()=>[e(N,{class:"text-no-wrap"},{default:s(()=>{var l,g,v;return[a("tbody",null,[a("tr",null,[t[10]||(t[10]=a("td",null,"Nama",-1)),a("td",null,i((l=o(f))==null?void 0:l.nama),1)]),a("tr",null,[t[11]||(t[11]=a("td",null,"Bidang Usaha",-1)),a("td",null,i((g=o(f))==null?void 0:g.nama_bidang_usaha),1)]),a("tr",null,[t[12]||(t[12]=a("td",null,"Alamat",-1)),a("td",null,i((v=o(f))==null?void 0:v.alamat_jalan),1)])])]}),_:1}),e(_),e(P,{class:"pb-5"},{default:s(()=>[e(T,null,{default:s(()=>t[13]||(t[13]=[p("MoU")])),_:1})]),_:1}),e(_),e(N,{class:"text-no-wrap"},{default:s(()=>[t[15]||(t[15]=a("thead",null,[a("tr",null,[a("th",{class:"text-center"},"Nomor MoU"),a("th",{class:"text-center"},"Judul MoU"),a("th",{class:"text-center"},"Periode Kerja Sama"),a("th",{class:"text-center"},"Narahubung"),a("th",{class:"text-center"},"Telp. Narahubung")])],-1)),a("tbody",null,[o(f).mou.length?(d(!0),m(V,{key:0},U(o(f).mou,l=>(d(),m("tr",null,[a("td",null,i(l.nomor_mou),1),a("td",null,i(l.judul_mou),1),a("td",null,i(l.tanggal_mulai)+" s/d "+i(l.tanggal_selesai),1),a("td",null,i(l.contact_person),1),a("td",null,i(l.telp_cp),1)]))),256)):(d(),m("tr",vt,t[14]||(t[14]=[a("td",{class:"text-center",colspan:"5"},"Tidak ada data untuk ditampilkan",-1)])))])]),_:1}),e(_),e(P,{class:"pb-5"},{default:s(()=>[e(T,null,{default:s(()=>t[16]||(t[16]=[p("Aktifitas Peserta Didik")])),_:1})]),_:1}),e(_),e(N,{class:"text-no-wrap"},{default:s(()=>[t[19]||(t[19]=a("thead",null,[a("tr",null,[a("th",{class:"text-center"},"Nama Kegiatan"),a("th",{class:"text-center"},"SK Tugas"),a("th",{class:"text-center"},"Guru Pembimbing"),a("th",{class:"text-center"},"Jml PD"),a("th",{class:"text-center"},"Aksi")])],-1)),a("tbody",null,[o(f).mou.length?(d(!0),m(V,{key:0},U(o(f).mou,l=>(d(),m(V,null,[(d(!0),m(V,null,U(l.akt_pd,g=>(d(),m("tr",null,[a("td",null,i(g.judul_akt_pd),1),a("td",null,i(g.sk_tugas),1),a("td",null,[e(pt,{lines:"two"},{default:s(()=>[(d(!0),m(V,null,U(g.bimbing_pd,v=>(d(),mt(gt,null,{prepend:s(()=>[e(_t,{image:v.guru.photo},null,8,["image"])]),default:s(()=>[e(ft,null,{default:s(()=>[p(i(v.guru.nama_lengkap),1)]),_:2},1024),e(ct,{class:"mt-1"},{default:s(()=>[p(i(v.guru.email),1)]),_:2},1024)]),_:2},1024))),256))]),_:2},1024)]),a("td",bt,i(g.anggota_akt_pd_count),1),a("td",yt,[e(I,{color:"error",onClick:v=>F(g.akt_pd_id),size:"x-small"},{default:s(()=>[e(O,{start:"",icon:"tabler-eye"}),t[17]||(t[17]=p("Detil "))]),_:2},1032,["onClick"])])]))),256))],64))),256)):(d(),m("tr",kt,t[18]||(t[18]=[a("td",{class:"text-center",colspan:"5"},"Tidak ada data untuk ditampilkan",-1)])))])]),_:1})]),_:1}),e(_),e(B,{class:"d-flex justify-end flex-wrap gap-3 pt-5 overflow-visible"},{default:s(()=>[e(I,{color:"secondary",variant:"tonal",onClick:t[3]||(t[3]=l=>k.value=!1)},{default:s(()=>t[20]||(t[20]=[p(" Tutup ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(Z,{isDialogVisible:o(x),"onUpdate:isDialogVisible":t[5]||(t[5]=l=>A(x)?x.value=l:null),isLoading:o(y),"onUpdate:isLoading":t[6]||(t[6]=l=>A(y)?y.value=l:null),"dialog-title":o(j),listData:o(D),"onUpdate:listData":t[7]||(t[7]=l=>A(D)?D.value=l:null),onRefresh:X,onClose:Y},null,8,["isDialogVisible","isLoading","dialog-title","listData"])])}}};export{le as default};
