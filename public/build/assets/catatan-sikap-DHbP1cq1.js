import{_ as B}from"./ConfirmDialog-D2Ym9elI.js";import{V as E}from"./VTextarea-B6eEthks.js";import{V as S}from"./VTable-BUsnUoL5.js";import{o as e,f as k,e as s,d as a,c as u,F as y,h as T,v as c,b as r,G as R,r as p,t as h,m as i,am as G,ap as P,aa as U,a2 as j}from"./main-BUumBu6a.js";import{_ as A}from"./ProfileSiswa-BPofQdjj.js";import{d as C,a as N}from"./mixins-CKlf8GuV.js";import{u as K,c as W}from"./createUrl-C1_Sm4N7.js";import{$ as M}from"./api-DGas9VfV.js";import{V as z,c as I,a as L,b as D}from"./VCard-BpJLDfhD.js";import{V as H}from"./VDivider-BnEsdsgF.js";import{V as J}from"./VAlert-CuD5NV7H.js";import{V as Q}from"./VForm-DjKeRf84.js";import"./VDialog-BEKtFyZX.js";import"./VOverlay-Bb4CDEq4.js";import"./forwardRefs-DWGaNmQL.js";import"./scopeId-CDzN2yrl.js";import"./VImg-D2Juqgex.js";/* empty css                   */import"./VField-BQoKA9XH.js";import"./VLabel-BS4UTjHC.js";import"./VAvatar-Ba-Ggnm6.js";import"./index-BxkgbwWS.js";const X={style:{"border-bottom":"none !important"}},Y={class:"py-2",style:{"border-bottom":"none !important"}},Z={__name:"TableCatatanWalas",props:{arrayData:{type:Object,required:!0},form:{type:Object,required:!0},siswa:{type:Object,required:!0}},setup(V){const o=V;return(n,l)=>(e(),k(S,null,{default:s(()=>[l[0]||(l[0]=a("thead",null,[a("tr",null,[a("th",{class:"text-center",width:"30%"},"Dimensi Sikap"),a("th",{class:"text-center",width:"70%"},"Catatan Sikap")])],-1)),a("tbody",null,[(e(!0),u(y,null,T(o.arrayData.budaya,(d,f)=>(e(),u("tr",null,[a("td",X,c(d.aspek),1),a("td",Y,[r(E,{label:"Ketik catatan disini...",modelValue:o.form.uraian_sikap[o.siswa.anggota_rombel.anggota_rombel_id+"#"+d.budaya_kerja_id],"onUpdate:modelValue":b=>o.form.uraian_sikap[o.siswa.anggota_rombel.anggota_rombel_id+"#"+d.budaya_kerja_id]=b},null,8,["modelValue","onUpdate:modelValue"])])]))),256))])]),_:1}))}},aa={__name:"TableCatatanGuru",props:{siswa:{type:Object,required:!0}},setup(V){return(o,n)=>(e(),k(S,null,{default:s(()=>[n[0]||(n[0]=a("thead",null,[a("tr",null,[a("th",null,"Nama Guru"),a("th",null,"Dimensi Sikap"),a("th",null,"Elemen Sikap"),a("th",null,"Catatan Sikap"),a("th",null,"Opsi Sikap")])],-1)),a("tbody",null,[(e(!0),u(y,null,T(V.siswa.anggota_rombel.nilai_budaya_kerja_guru,l=>(e(),u("tr",null,[a("td",null,c(l.guru.nama_lengkap),1),a("td",null,c(l.budaya_kerja.aspek),1),a("td",null,c(l.elemen_budaya_kerja.elemen),1),a("td",null,c(l.deskripsi),1),a("td",null,c(l.opsi_id===1?"Positif":"Negatif"),1)]))),256))])]),_:1}))}},ta={rowspan:"2"},ea={key:0,class:"px-0 py-0",style:{"padding-inline-end":"0px !important"}},la={key:1},ra={class:"px-0 py-0",style:{"padding-inline-end":"0px !important","padding-inline-start":"0px !important"}},Sa={__name:"catatan-sikap",setup(V){R(async()=>{await $()});const o=p(!1),n=p({user_id:C.user_id,guru_id:C.guru_id,sekolah_id:C.sekolah_id,semester_id:N.semester_id,periode_aktif:N.nama,aksi:"catatan-sikap"}),l=p({merdeka:!1,uraian_sikap:{}}),d=p({siswa:[],budaya:[]}),f=p(!1),b=p(!1),v=p(!1),w=p({color:null,title:null,text:null}),$=async()=>{o.value=!0;try{let t=(await K(W("/walas",{query:{user_id:n.value.user_id,guru_id:n.value.guru_id,sekolah_id:n.value.sekolah_id,semester_id:n.value.semester_id,periode_aktif:n.value.nama,aksi:n.value.aksi}}))).data.value;l.value.merdeka=t.merdeka,d.value.siswa=t.data_siswa,d.value.budaya=t.budaya_kerja,t.data_siswa.forEach(_=>{_.anggota_rombel.all_catatan_budaya_kerja.forEach(x=>{l.value.uraian_sikap[_.anggota_rombel.anggota_rombel_id+"#"+x.budaya_kerja_id]=x.catatan})})}catch(g){console.error(g)}finally{o.value=!1}},F=async()=>{f.value=!0;const g={...n.value,...l.value};await M("/walas/save",{method:"POST",body:g,onResponseError({response:t}){console.log("ERROR:",t._data.errors),f.value=!1},onResponse({response:t}){f.value=!1;let _=t._data;_.errors||(v.value=!0,w.value=_)}})};return(g,t)=>{const _=A,x=aa,O=Z,q=B;return e(),k(z,null,{default:s(()=>[r(L,{class:"pb-4"},{default:s(()=>[r(I,null,{default:s(()=>t[2]||(t[2]=[h("Catatan Sikap")])),_:1})]),_:1}),r(H),i(o)?(e(),k(D,{key:0,class:"text-center"},{default:s(()=>[r(G,{size:60,indeterminate:"",color:"error",class:"my-10"})]),_:1})):(e(),u(y,{key:1},[i(l).merdeka?(e(),k(D,{key:0},{default:s(()=>[r(J,{color:"error",class:"text-center my-4",variant:"tonal"},{default:s(()=>t[3]||(t[3]=[a("h2",{class:"mt-4 mb-4"},"Fitur ditutup!",-1),a("p",null,[h("Fitur Catatan Sikap hanya untuk "),a("strong",null,"Kurikulum 2013")],-1)])),_:1})]),_:1})):(e(),k(Q,{key:1,onSubmit:P(F,["prevent"])},{default:s(()=>[r(S,null,{default:s(()=>[t[5]||(t[5]=a("thead",null,[a("tr",null,[a("th",null,"Nama Peserta Didik"),a("th",null,"Catatan Sikap dari Guru")])],-1)),a("tbody",null,[(e(!0),u(y,null,T(i(d).siswa,m=>(e(),u(y,null,[a("tr",null,[a("td",ta,[r(_,{item:m},null,8,["item"])]),m.anggota_rombel.nilai_budaya_kerja_guru.length?(e(),u("td",ea,[r(x,{siswa:m},null,8,["siswa"])])):(e(),u("td",la,"Tidak ada catatan sikap dari guru"))]),a("tr",null,[a("td",ra,[t[4]||(t[4]=a("h2",{class:"text-center"},"Catatan Sikap Wali Kelas",-1)),r(O,{arrayData:i(d),form:i(l),siswa:m},null,8,["arrayData","form","siswa"])])])],64))),256))])]),_:1}),r(D,{class:"d-flex justify-end flex-wrap gap-3 pt-5 overflow-visible"},{default:s(()=>[r(U,{variant:"elevated",type:"submit",loading:i(f),disabled:i(f)},{default:s(()=>t[6]||(t[6]=[h(" Simpan ")])),_:1},8,["loading","disabled"])]),_:1})]),_:1}))],64)),r(q,{isDialogVisible:i(b),"onUpdate:isDialogVisible":t[0]||(t[0]=m=>j(b)?b.value=m:null),isNotifVisible:i(v),"onUpdate:isNotifVisible":t[1]||(t[1]=m=>j(v)?v.value=m:null),"confirmation-question":"Apakah Anda yakin?","confirmation-text":"Tindakan ini tidak dapat dikembalikan!","confirm-color":i(w).color,"confirm-title":i(w).title,"confirm-msg":i(w).text},null,8,["isDialogVisible","isNotifVisible","confirm-color","confirm-title","confirm-msg"])]),_:1})}}};export{Sa as default};
