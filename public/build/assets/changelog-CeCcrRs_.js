import{u as G,c as S}from"./createUrl-jHsYqGLm.js";import{V as z,a as F,c as W,b as h}from"./VCard-CHmpSx-c.js";import{V as B}from"./VDivider-gWeRf3Xl.js";import{V as q,a as E,b as D,c as R}from"./VTabs-1395zX7C.js";import{G as j,r,c as m,b as t,e as l,o,a9 as J,m as n,d as s,v as p,t as _,a2 as T,F as N,h as M,f as b,am as A,an as K,aa as H,y as O,$ as Q}from"./main-BpmS5yjl.js";import{V as X}from"./VTable-DH5oZuZ_.js";import"./index-BxkgbwWS.js";import"./VAvatar-CwdAusxZ.js";import"./VImg-1iDcvPVu.js";import"./forwardRefs-DWGaNmQL.js";import"./scopeId-DiP191uI.js";import"./ssrBoot-C9ygE__7.js";import"./VSlideGroup-ZqIn0ESw.js";const Y={class:"text-disabled text-subtitle-2"},Z=["innerHTML"],ee={key:0,class:"text-center"},ae={class:"text-center"},te={class:"py-2"},le=["innerHTML"],se={class:"text-center"},ne={key:1},ke={__name:"changelog",setup(oe){j(async()=>{await k()});const i=r("changelog"),g=r(!1),C=r(),f=r([]),d=r({page:1,perPage:10}),y=r(),k=async()=>{var c,e,a;g.value=!0;try{let u=(await G(S(`/setting/${i.value}`,{query:{page:d.value.page,per_page:d.value.perPage}}))).data.value;if(y.value=u==null?void 0:u.lastPullDate,i.value=="changelog")C.value=u.data;else{f.value=u==null?void 0:u.data;const V=u.headers.Link;V.length&&(w.value=!((c=V[0])!=null&&c.includes("first"))||!((e=V[0])!=null&&e.includes("prev")),L.value=!((a=V[0])!=null&&a.includes("last")))}}catch(v){console.error(v)}finally{g.value=!1}},I=async()=>{await k()},U=[{name:"changelog",icon:"tabler-brand-google-play",title:"Aplikasi"},{name:"github",icon:"tabler-brand-github",title:"Github"}],$=c=>c.replace(/\n/g,"<br />"),x=r("next"),w=r(!0),L=r(!1),P=async c=>{c=="next"?d.value.page=d.value.page+1:d.value.page=d.value.page-1,await k()};return(c,e)=>(o(),m("div",null,[t(z,null,{default:l(()=>[t(F,{class:"pb-4"},J({default:l(()=>[t(W,null,{default:l(()=>e[5]||(e[5]=[_("Daftar Perubahan Aplikasi")])),_:1})]),_:2},[n(y)?{name:"append",fn:l(()=>[s("span",Y,"Git Pull terakhir: "+p(n(y)),1)]),key:"0"}:void 0]),1024),t(B),t(q,{modelValue:n(i),"onUpdate:modelValue":[e[0]||(e[0]=a=>T(i)?i.value=a:null),I],grow:"",stacked:""},{default:l(()=>[(o(),m(N,null,M(U,a=>t(R,{key:a.name,value:a.name},{default:l(()=>[t(Q,{icon:a.icon,class:"mb-2"},null,8,["icon"]),s("span",null,p(a.title),1)]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"]),t(E,{modelValue:n(i),"onUpdate:modelValue":e[4]||(e[4]=a=>T(i)?i.value=a:null)},{default:l(()=>[t(D,{value:"changelog"},{default:l(()=>[n(g)?(o(),b(h,{key:0,class:"text-center"},{default:l(()=>[t(A,{size:60,indeterminate:"",color:"error",class:"my-10"})]),_:1})):(o(),b(h,{key:1},{default:l(()=>[s("span",{innerHTML:n(C)},null,8,Z)]),_:1}))]),_:1}),t(D,{value:"github"},{default:l(()=>[n(g)?(o(),m("div",ee,[t(A,{size:60,indeterminate:"",color:"error",class:"my-10"})])):(o(),b(X,{key:1},{default:l(()=>[e[7]||(e[7]=s("thead",null,[s("tr",null,[s("th",{class:"text-center"},"No"),s("th",null,"Date"),s("th",null,"Commit"),s("th",{class:"text-center"},"Author")])],-1)),s("tbody",null,[n(f).length?(o(!0),m(N,{key:0},M(n(f),(a,v)=>(o(),m("tr",null,[s("td",ae,p(v+1+10*n(d).page-10),1),s("td",null,p(new Date(a.commit.author.date).toLocaleString("id-ID",{hour12:!1,day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"})),1),s("td",te,[s("span",{innerHTML:$(a.commit.message)},null,8,le)]),s("td",se,p(a.commit.author.name),1)]))),256)):(o(),m("tr",ne,e[6]||(e[6]=[s("td",{colspan:"4",class:"text-center"},"Tidak ada data untuk ditampilkan",-1)])))])]),_:1})),t(B),n(f).length?(o(),b(h,{key:2,class:"text-center"},{default:l(()=>[t(K,{modelValue:n(x),"onUpdate:modelValue":e[3]||(e[3]=a=>T(x)?x.value=a:null),divided:"",class:"navigasi"},{default:l(()=>[t(H,{value:"prev",disabled:n(w),onClick:e[1]||(e[1]=a=>P("prev"))},{default:l(()=>e[8]||(e[8]=[_(" « prev ")])),_:1},8,["disabled"]),t(H,{value:"next",disabled:n(L),onClick:e[2]||(e[2]=a=>P("next"))},{default:l(()=>e[9]||(e[9]=[_(" next » ")])),_:1},8,["disabled"])]),_:1},8,["modelValue"])]),_:1})):O("",!0)]),_:1})]),_:1},8,["modelValue"])]),_:1})]))}};export{ke as default};
