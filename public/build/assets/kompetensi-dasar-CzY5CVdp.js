import{d as u,a as c,t as H,g as De}from"./mixins-BjVJEZvR.js";import{_ as je}from"./ConfirmDialog-BLscZHWo.js";import{_ as xe}from"./DefaultDialog-CYi92FSp.js";import{_ as he}from"./AppTextarea-snCWz2ji.js";import{_ as we}from"./TablePagination-BRD4F1BT.js";import{_ as Te}from"./AppTextField-Bdwte880.js";import{_ as Pe}from"./AppSelect-DFrAhbhb.js";import{u as Ce,c as Ke}from"./createUrl-8zoAcX36.js";import{$ as w}from"./api-Bkbcc4ec.js";import{V as Ue,a as Re,c as $e,b as J}from"./VCard-CswHtBsG.js";import{V as W}from"./VDivider-DBczu0Ow.js";import{V as v,a as o}from"./VRow-C9aDKUvo.js";import{V as Ae}from"./VSpacer-DBg6JrlZ.js";import{r as m,G as Be,w as X,c as T,b as a,e as t,m as l,a2 as z,a as Fe,o as p,t as _,d as k,aa as Y,v as Z,y as A,f as j,$ as P,F as Se}from"./main-4ibPTuoX.js";import{V as Ne}from"./VDataTableServer-BXGcUj1U.js";import{V as ee}from"./VChip-ClHLREYK.js";import{V as ae}from"./VTooltip-CVIZijLQ.js";import{V as Me}from"./VMenu-HPtXLDMp.js";import{V as Ie,a as le,b as L}from"./VList-DRMF5v6F.js";import"./VDialog-BkAb0UEZ.js";import"./VOverlay-Dt1Dy2Gr.js";import"./forwardRefs-DWGaNmQL.js";import"./scopeId-DgdHYkHx.js";import"./VImg-B9UUOYt7.js";import"./DialogCloseBtn-EZZA6T1w.js";import"./VLabel-B0eCB5jg.js";import"./VTextarea-jhTeNlp4.js";/* empty css                   */import"./VField-DDWomVtf.js";import"./VSelect-CJIVueWh.js";import"./VSelectionControl-Dw3cA4UE.js";import"./VAvatar-DuOErqu_.js";import"./index-BxkgbwWS.js";/* empty css              */import"./VTable-CFJBDt5I.js";import"./filter-CCPSJzNa.js";import"./VSlideGroup-DECG9arN.js";import"./ssrBoot-CGBhTCaE.js";const Oe={class:"me-3 d-flex gap-3"},Qe={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},ze={style:{"inline-size":"15.625rem"}},Le={key:0},qe={key:1},Ge={key:2},Ee={key:3},$a={__name:"kompetensi-dasar",setup(He){const n=m({tingkat:null,rombongan_belajar_id:null,pembelajaran_id:null,page:1,itemsPerPage:10,searchQuery:"",sortby:"updated_at",sortbydesc:"DESC"}),te=[{key:"mata_pelajaran_id",title:"Mata Pelajaran"},{key:"id_kompetensi",title:"Kode",align:"center"},{key:"kelas",title:"kelas",align:"center",sortable:!1,nowrap:!0},{key:"kompetensi_dasar",title:"Deskripsi Kompetensi Dasar"},{key:"kurikulum",title:"Kurikulum",align:"center"},{key:"status",title:"Status",sortable:!1,align:"center"},{key:"actions",title:"Aksi",align:"center",sortable:!1,nowrap:!0}],q=m([]),B=m(0),F=m([]),R=m([]),S=m(!1);Be(async()=>{await N()}),X(n,async()=>{await N()},{deep:!0}),X(()=>n.value.searchQuery,()=>{n.value.page=1});const se=i=>{var e,d;n.value.sortby=(e=i[0])==null?void 0:e.key,n.value.sortbydesc=(d=i[0])==null?void 0:d.order},N=async()=>{S.value=!0;try{let e=(await Ce(Ke("/referensi/kompetensi-dasar",{query:{user_id:u.user_id,guru_id:u.guru_id,sekolah_id:u.sekolah_id,semester_id:c.semester_id,periode_aktif:c.nama,tingkat:n.value.tingkat,rombongan_belajar_id:n.value.rombongan_belajar_id,q:n.value.searchQuery,page:n.value.page,per_page:n.value.itemsPerPage,sortby:n.value.sortby,sortbydesc:n.value.sortbydesc}}))).data;q.value=e.value.data.data,B.value=e.value.data.total}catch(i){console.error(i)}finally{S.value=!1}},x=m(!1),C=m({color:null,title:null,text:null}),f=m({tingkat:null,rombongan_belajar_id:null,pembelajaran_id:null}),K=m(!1),V=m(!1),b=m(!1),ie=async i=>{V.value=!0,F.value=[],R.value=[],f.value.rombongan_belajar_id=null,f.value.pembelajaran_id=null,n.value.tingkat=i,i?await w("/referensi/get-data",{method:"POST",body:{data:"rombel",tingkat:i,user_id:u.user_id,guru_id:u.guru_id,sekolah_id:u.sekolah_id,semester_id:c.semester_id,periode_aktif:c.nama},onResponse({response:e}){let d=e._data;V.value=!1,F.value=d}}):V.value=!1},oe=async i=>{R.value=[],b.value=!0,f.value.pembelajaran_id=null,n.value.rombongan_belajar_id=i,i?await w("/referensi/get-data",{method:"POST",body:{data:"mapel",rombongan_belajar_id:i,user_id:u.user_id,guru_id:u.guru_id,sekolah_id:u.sekolah_id,semester_id:c.semester_id,periode_aktif:c.nama},onResponse({response:e}){let d=e._data;b.value=!1,R.value=d.mapel}}):b.value=!1},ne=async i=>{n.value.pembelajaran_id=i},y=m(!1),M=m(""),I=m(!0),r=m({kompetensi_dasar_id:null,semester_id:c.semester_id,user_id:u.user_id,guru_id:u.guru_id,sekolah_id:u.sekolah_id,tingkat:null,rombongan_belajar_id:null,mata_pelajaran_id:null,kompetensi_id:null,id_kompetensi:null,kompetensi_dasar:null,kompetensi_dasar_alias:null}),g=m({tingkat:null,rombongan_belajar_id:null,mata_pelajaran_id:null,kompetensi_id:null,id_kompetensi:null,kompetensi_dasar:null,kompetensi_dasar_alias:null}),G=m([]),E=m([]),re=()=>{I.value=!0,y.value=!0,M.value="Tambah Data Kompetensi Dasar"},de=async i=>{r.value={kompetensi_dasar_id:i.kompetensi_dasar_id,kompetensi_dasar:i.kompetensi_dasar,kompetensi_dasar_alias:i.kompetensi_dasar_alias??i.kompetensi_dasar},I.value=!1,y.value=!0,M.value="Ubah Ringkasan Kompetensi Dasar"},me=async i=>{U.value={kompetensi_dasar_id:i},x.value=!0,$.value="Tindakan ini akan mengembalikan isi deskripsi ke bawaan aplikasi!"},U=m(),ue=async i=>{U.value=i,x.value=!0,$.value="Tindakan ini akan menghapus data ganda Kompetensi Dasar!"},$=m(),pe=async(i,e)=>{U.value={kompetensi_dasar_id:i,aktif:e},x.value=!0,$.value=e?"Tindakan ini akan menonaktifkan data Kompetensi Dasar!":"Tindakan ini akan mengaktifkan data Kompetensi Dasar!"},_e=async i=>{i&&await w("/referensi/kompetensi-dasar/update",{method:"POST",body:U.value,onResponse({response:e}){let d=e._data;U.value=null,y.value=!1,K.value=!0,C.value=d}})},ge=async()=>{await N()},ke=async()=>{await w("/referensi/kompetensi-dasar/save",{method:"POST",body:r.value,onResponse({response:i}){let e=i._data;e.errors?g.value=e.errors:(y.value=!1,K.value=!0,C.value=e,r.value={kompetensi_dasar_id:null,semester_id:c.semester_id,user_id:u.user_id,guru_id:u.guru_id,sekolah_id:u.sekolah_id,tingkat:null,rombongan_belajar_id:null,mata_pelajaran_id:null,kompetensi_id:null,id_kompetensi:null,kompetensi_dasar:null,kompetensi_dasar_alias:null},g.value={tingkat:null,rombongan_belajar_id:null,mata_pelajaran_id:null,kompetensi_id:null,id_kompetensi:null,kompetensi_dasar:null,kompetensi_dasar_alias:null})}})},fe=async i=>{i&&await ke()},be=async i=>{if(i){const d={...{data:"rombel",add_kd:1},...r.value};await w("/referensi/get-data",{method:"POST",body:d,onResponse({response:D}){let h=D._data;G.value=h}})}},ce=async i=>{if(i){const d={...{data:"mapel",add_kd:1},...r.value};await w("/referensi/get-data",{method:"POST",body:d,onResponse({response:D}){let h=D._data;E.value=h.mapel}})}};return(i,e)=>{const d=Pe,D=Te,h=Fe("IconBtn"),ve=we,O=he,Ve=xe,ye=je;return p(),T("section",null,[a(Ue,{class:"mb-6"},{default:t(()=>[a(Re,{class:"pb-4"},{default:t(()=>[a($e,null,{default:t(()=>e[17]||(e[17]=[_("Referensi Kompetensi Dasar")])),_:1})]),_:1}),a(W),a(J,null,{default:t(()=>[a(v,null,{default:t(()=>[a(o,{cols:"12",sm:"4"},{default:t(()=>[a(d,{modelValue:l(f).tingkat,"onUpdate:modelValue":[e[0]||(e[0]=s=>l(f).tingkat=s),ie],placeholder:"== Filter Tingkat ==",items:"tingkatKelas"in i?i.tingkatKelas:l(H),clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","items"])]),_:1}),a(o,{cols:"12",sm:"4"},{default:t(()=>[a(d,{modelValue:l(f).rombongan_belajar_id,"onUpdate:modelValue":[e[1]||(e[1]=s=>l(f).rombongan_belajar_id=s),oe],placeholder:"== Filter Rombel == ",items:l(F),clearable:"","clear-icon":"tabler-x","item-value":"rombongan_belajar_id","item-title":"nama",loading:l(V),disabled:l(V)},null,8,["modelValue","items","loading","disabled"])]),_:1}),a(o,{cols:"12",sm:"4"},{default:t(()=>[a(d,{modelValue:l(f).pembelajaran_id,"onUpdate:modelValue":[e[2]||(e[2]=s=>l(f).pembelajaran_id=s),ne],placeholder:"== Filter Mapel ==",items:l(R),clearable:"","clear-icon":"tabler-x","item-value":"pembelajaran_id","item-title":"nama_mata_pelajaran",loading:l(b),disabled:l(b)},null,8,["modelValue","items","loading","disabled"])]),_:1})]),_:1})]),_:1}),a(J,{class:"d-flex flex-wrap gap-4"},{default:t(()=>[k("div",Oe,[a(d,{modelValue:l(n).itemsPerPage,"onUpdate:modelValue":e[3]||(e[3]=s=>l(n).itemsPerPage=s),items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"}],style:{"inline-size":"6.25rem"}},null,8,["modelValue"])]),a(Ae),k("div",Qe,[k("div",ze,[a(D,{modelValue:l(n).searchQuery,"onUpdate:modelValue":e[4]||(e[4]=s=>l(n).searchQuery=s),placeholder:"Cari Data"},null,8,["modelValue"])]),a(Y,{"prepend-icon":"tabler-plus",onClick:re},{default:t(()=>e[18]||(e[18]=[_(" Tambah Data ")])),_:1})])]),_:1}),a(W),a(Ne,{items:l(q),"server-items-length":l(B),headers:te,options:l(n),loading:l(S),"loading-text":"Loading...","onUpdate:sortBy":se},{"item.mata_pelajaran_id":t(({item:s})=>[_(Z(s.mata_pelajaran.nama),1)]),"item.kelas":t(({item:s})=>[s.kelas_10?(p(),T("span",Le,"10")):A("",!0),s.kelas_11?(p(),T("span",qe," 11")):A("",!0),s.kelas_12?(p(),T("span",Ge," 12")):A("",!0),s.kelas_13?(p(),T("span",Ee," 13")):A("",!0)]),"item.kompetensi_dasar":t(({item:s})=>[_(Z(s.kompetensi_dasar_alias??s.kompetensi_dasar),1)]),"item.status":t(({item:s})=>[s.aktif?(p(),j(ee,{key:0,size:"x-small",color:"success",variant:"elevated"},{default:t(()=>e[19]||(e[19]=[_(" Aktif ")])),_:1})):(p(),j(ee,{key:1,size:"x-small",color:"error",variant:"elevated"},{default:t(()=>e[20]||(e[20]=[_(" Non Aktif ")])),_:1}))]),"item.actions":t(({item:s})=>[a(h,{onClick:Q=>de(s)},{default:t(()=>[a(ae,{activator:"parent",location:"top"},{default:t(()=>e[21]||(e[21]=[_(" Ubah Ringkasan ")])),_:1}),a(P,{icon:"tabler-pencil"})]),_:2},1032,["onClick"]),a(h,{onClick:Q=>me(s.kompetensi_dasar_id)},{default:t(()=>[a(ae,{activator:"parent",location:"top"},{default:t(()=>e[22]||(e[22]=[_(" Reset isi ringkasan ")])),_:1}),a(P,{icon:"tabler-trash"})]),_:2},1032,["onClick"]),a(Y,{icon:"",variant:"text",color:"medium-emphasis"},{default:t(()=>[a(P,{icon:"tabler-dots-vertical"}),a(Me,{activator:"parent"},{default:t(()=>[a(Ie,null,{default:t(()=>[a(le,{onClick:Q=>pe(s.kompetensi_dasar_id,s.aktif)},{prepend:t(()=>[s.aktif?(p(),j(P,{key:0,icon:"tabler-x"})):(p(),j(P,{key:1,icon:"tabler-check"}))]),default:t(()=>[s.aktif?(p(),j(L,{key:0},{default:t(()=>e[23]||(e[23]=[_("Non Aktifkan")])),_:1})):(p(),j(L,{key:1},{default:t(()=>e[24]||(e[24]=[_("Aktifkan")])),_:1}))]),_:2},1032,["onClick"]),a(le,{onClick:Q=>ue(s)},{prepend:t(()=>[a(P,{icon:"tabler-power"})]),default:t(()=>[a(L,null,{default:t(()=>e[25]||(e[25]=[_("Hapus Data Ganda")])),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),bottom:t(()=>[a(ve,{page:l(n).page,"onUpdate:page":e[5]||(e[5]=s=>l(n).page=s),"items-per-page":l(n).itemsPerPage,"total-items":l(B)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items","server-items-length","options","loading"])]),_:1}),a(Ve,{isDialogVisible:l(y),"onUpdate:isDialogVisible":e[14]||(e[14]=s=>z(y)?y.value=s:null),"dialog-title":l(M),errors:l(g),onConfirm:fe},{content:t(()=>[l(I)?(p(),j(v,{key:0},{default:t(()=>[a(o,{cols:"12"},{default:t(()=>[a(v,{"no-gutters":""},{default:t(()=>[a(o,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:t(()=>e[26]||(e[26]=[k("label",{class:"v-label text-body-2 text-high-emphasis",for:"semester_id"},"Tahun Pelajaran",-1)])),_:1}),a(o,{cols:"12",md:"9"},{default:t(()=>[a(D,{id:"semester_id",value:("$semester"in i?i.$semester:l(c)).nama,disabled:""},null,8,["value"])]),_:1})]),_:1})]),_:1}),a(o,{cols:"12"},{default:t(()=>[a(v,{"no-gutters":""},{default:t(()=>[a(o,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:t(()=>e[27]||(e[27]=[k("label",{class:"v-label text-body-2 text-high-emphasis",for:"tingkat"},"Tingkat Kelas",-1)])),_:1}),a(o,{cols:"12",md:"9"},{default:t(()=>[a(d,{modelValue:l(r).tingkat,"onUpdate:modelValue":[e[6]||(e[6]=s=>l(r).tingkat=s),be],placeholder:"== Pilih Tingkat kelas ==",items:"tingkatKelas"in i?i.tingkatKelas:l(H),clearable:"","clear-icon":"tabler-x","error-messages":l(g).tingkat},null,8,["modelValue","items","error-messages"])]),_:1})]),_:1})]),_:1}),a(o,{cols:"12"},{default:t(()=>[a(v,{"no-gutters":""},{default:t(()=>[a(o,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:t(()=>e[28]||(e[28]=[k("label",{class:"v-label text-body-2 text-high-emphasis",for:"rombongan_belajar_id"},"Rombongan Belajar",-1)])),_:1}),a(o,{cols:"12",md:"9"},{default:t(()=>[a(d,{modelValue:l(r).rombongan_belajar_id,"onUpdate:modelValue":[e[7]||(e[7]=s=>l(r).rombongan_belajar_id=s),ce],placeholder:"== Pilih Rombongan Belajar == ",items:l(G),clearable:"","clear-icon":"tabler-x","item-value":"rombongan_belajar_id","item-title":"nama",loading:l(V),disabled:l(V),"error-messages":l(g).rombongan_belajar_id},null,8,["modelValue","items","loading","disabled","error-messages"])]),_:1})]),_:1})]),_:1}),a(o,{cols:"12"},{default:t(()=>[a(v,{"no-gutters":""},{default:t(()=>[a(o,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:t(()=>e[29]||(e[29]=[k("label",{class:"v-label text-body-2 text-high-emphasis",for:"mata_pelajaran_id"},"Mata Pelajaran",-1)])),_:1}),a(o,{cols:"12",md:"9"},{default:t(()=>[a(d,{modelValue:l(r).mata_pelajaran_id,"onUpdate:modelValue":e[8]||(e[8]=s=>l(r).mata_pelajaran_id=s),placeholder:"== Pilih Mata Pelajaran ==",items:l(E),clearable:"","clear-icon":"tabler-x","item-value":"mata_pelajaran_id","item-title":"nama_mata_pelajaran",loading:l(b),disabled:l(b),"error-messages":l(g).mata_pelajaran_id},null,8,["modelValue","items","loading","disabled","error-messages"])]),_:1})]),_:1})]),_:1}),a(o,{cols:"12"},{default:t(()=>[a(v,{"no-gutters":""},{default:t(()=>[a(o,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:t(()=>e[30]||(e[30]=[k("label",{class:"v-label text-body-2 text-high-emphasis",for:"kompetensi_id"},"Aspek Penilaian",-1)])),_:1}),a(o,{cols:"12",md:"9"},{default:t(()=>[a(d,{modelValue:l(r).kompetensi_id,"onUpdate:modelValue":e[9]||(e[9]=s=>l(r).kompetensi_id=s),placeholder:"== Pilih Aspek Penilaian ==",items:"dataKompetensi"in i?i.dataKompetensi:l(De),clearable:"","clear-icon":"tabler-x",loading:l(b),disabled:l(b),"error-messages":l(g).kompetensi_id},null,8,["modelValue","items","loading","disabled","error-messages"])]),_:1})]),_:1})]),_:1}),a(o,{cols:"12"},{default:t(()=>[a(v,{"no-gutters":""},{default:t(()=>[a(o,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:t(()=>e[31]||(e[31]=[k("label",{class:"v-label text-body-2 text-high-emphasis",for:"id_kompetensi"},"Kode Kompetensi Dasar",-1)])),_:1}),a(o,{cols:"12",md:"9"},{default:t(()=>[a(D,{id:"id_kompetensi",modelValue:l(r).id_kompetensi,"onUpdate:modelValue":e[10]||(e[10]=s=>l(r).id_kompetensi=s),placeholder:"3.x untuk pengetahuan, 4.x untuk keterampilan","persistent-placeholder":"","error-messages":l(g).id_kompetensi},null,8,["modelValue","error-messages"])]),_:1})]),_:1})]),_:1}),a(o,{cols:"12"},{default:t(()=>[a(v,{"no-gutters":""},{default:t(()=>[a(o,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:t(()=>e[32]||(e[32]=[k("label",{class:"v-label text-body-2 text-high-emphasis",for:"kompetensi_dasar"},"Deskripsi Kompetensi Dasar",-1)])),_:1}),a(o,{cols:"12",md:"9"},{default:t(()=>[a(O,{modelValue:l(r).kompetensi_dasar,"onUpdate:modelValue":e[11]||(e[11]=s=>l(r).kompetensi_dasar=s),placeholder:"Deskripsi Kompetensi Dasar","auto-grow":"","error-messages":l(g).kompetensi_dasar},null,8,["modelValue","error-messages"])]),_:1})]),_:1})]),_:1})]),_:1})):(p(),T(Se,{key:1},[a(O,{modelValue:l(r).kompetensi_dasar,"onUpdate:modelValue":e[12]||(e[12]=s=>l(r).kompetensi_dasar=s),label:"Deskripsi Kompetensi Dasar Baru",placeholder:"Deskripsi Kompetensi Dasar Mana","auto-grow":"",disabled:""},null,8,["modelValue"]),a(O,{modelValue:l(r).kompetensi_dasar_alias,"onUpdate:modelValue":e[13]||(e[13]=s=>l(r).kompetensi_dasar_alias=s),label:"Deskripsi Kompetensi Dasar Baru",placeholder:"Deskripsi Kompetensi Dasar Baru","auto-grow":"","error-messages":l(g).kompetensi_dasar_alias},null,8,["modelValue","error-messages"])],64))]),_:1},8,["isDialogVisible","dialog-title","errors"]),a(ye,{isDialogVisible:l(x),"onUpdate:isDialogVisible":e[15]||(e[15]=s=>z(x)?x.value=s:null),isNotifVisible:l(K),"onUpdate:isNotifVisible":e[16]||(e[16]=s=>z(K)?K.value=s:null),"confirmation-question":"Apakah Anda yakin?","confirmation-text":l($),"confirm-color":l(C).color,"confirm-title":l(C).title,"confirm-msg":l(C).text,onConfirm:_e,onClose:ge},null,8,["isDialogVisible","isNotifVisible","confirmation-text","confirm-color","confirm-title","confirm-msg"])])}}};export{$a as default};
