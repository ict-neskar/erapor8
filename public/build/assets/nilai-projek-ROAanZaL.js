import{_ as T}from"./TablePagination-BRD4F1BT.js";import{_ as w}from"./ProfilePtk-bRQjrdDT.js";import{_ as $}from"./AppTextField-Bdwte880.js";import{_ as B}from"./AppSelect-DFrAhbhb.js";import{d as c,a as b}from"./mixins-BjVJEZvR.js";import{u as S,c as Q}from"./createUrl-8zoAcX36.js";import{V as U,c as A,a as J,b as E}from"./VCard-CswHtBsG.js";import{V as q}from"./VDivider-DBczu0Ow.js";import{V as F,a as v}from"./VRow-C9aDKUvo.js";import{r as i,G as M,w as y,f as N,e as o,o as R,b as l,t as u,m as r,v as p,aa as z}from"./main-4ibPTuoX.js";import{V as G}from"./VDataTableServer-BXGcUj1U.js";import"./VImg-B9UUOYt7.js";import"./VAvatar-DuOErqu_.js";import"./VLabel-B0eCB5jg.js";/* empty css                   */import"./VField-DDWomVtf.js";import"./forwardRefs-DWGaNmQL.js";import"./VSelect-CJIVueWh.js";import"./VList-DRMF5v6F.js";import"./ssrBoot-CGBhTCaE.js";import"./VOverlay-Dt1Dy2Gr.js";import"./scopeId-DgdHYkHx.js";import"./VMenu-HPtXLDMp.js";import"./VSelectionControl-Dw3cA4UE.js";import"./VChip-ClHLREYK.js";import"./VSlideGroup-DECG9arN.js";import"./index-BxkgbwWS.js";/* empty css              */import"./VTable-CFJBDt5I.js";import"./filter-CCPSJzNa.js";const Pe={__name:"nilai-projek",setup(I){const e=i({itemsPerPage:10,searchQuery:null,page:1,sortby:"updated_at",sortbydesc:"DESC",rombongan_belajar_id:null}),j=s=>{var a,m;e.value.sortby=(a=s[0])==null?void 0:a.key,e.value.sortbydesc=(m=s[0])==null?void 0:m.order};i([]);const g=i([]),d=i(0),_=i(!1),V=[{key:"rombel",title:"Rombel",sortable:!1},{key:"koordinator",title:"Koord Projek",sortable:!1},{key:"tema_count",title:"Jumlah Tema",sortable:!1,align:"center"},{key:"rencana_projek_count",title:"Jumlah Projek",sortable:!1,align:"center"},{key:"aspek_projek_count",title:"Jumlah Sub Elemen",sortable:!1,align:"center"}];M(async()=>{await f()}),y(e,async()=>{await f()},{deep:!0}),y(()=>e.value.searchQuery,()=>{e.value.page=1});const n=i({user_id:c.user_id,guru_id:c.guru_id,sekolah_id:c.sekolah_id,semester_id:b.semester_id,periode_aktif:b.nama,data:"nilai-projek"}),f=async()=>{_.value=!0;try{let a=(await S(Q("/monitoring",{query:{user_id:n.value.user_id,guru_id:n.value.guru_id,sekolah_id:n.value.sekolah_id,semester_id:n.value.semester_id,periode_aktif:n.value.nama,data:n.value.data,q:e.value.searchQuery,page:e.value.page,per_page:e.value.itemsPerPage,sortby:e.value.sortby,sortbydesc:e.value.sortbydesc,rombongan_belajar_id:e.value.rombongan_belajar_id}}))).data.value;g.value=a.data,d.value=a.total}catch(s){console.error(s)}finally{_.value=!1}},k=i([]),P=async s=>{console.log(s)},h=s=>{var a=0;return s.forEach(m=>{a=+m.aspek_budaya_kerja_count}),a};return(s,a)=>{const m=B,C=$,x=w,D=T;return R(),N(U,{class:"mb-6"},{default:o(()=>[l(J,{class:"pb-4"},{default:o(()=>[l(A,null,{default:o(()=>a[3]||(a[3]=[u("Monitoring Â» Penilaian P5")])),_:1})]),_:1}),l(q),l(E,null,{default:o(()=>[l(F,null,{default:o(()=>[l(v,{cols:"12",md:"4"},{default:o(()=>[l(m,{modelValue:r(e).itemsPerPage,"onUpdate:modelValue":a[0]||(a[0]=t=>r(e).itemsPerPage=t),items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"}]},null,8,["modelValue"])]),_:1}),l(v,{cols:"12",md:"4","offset-md":"4"},{default:o(()=>[l(C,{modelValue:r(e).searchQuery,"onUpdate:modelValue":a[1]||(a[1]=t=>r(e).searchQuery=t),placeholder:"Cari Data"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(G,{items:r(g),"server-items-length":r(d),headers:V,options:r(e),loading:r(_),"loading-text":"Loading...","onUpdate:sortBy":j},{"item.rombel":o(({item:t})=>[u(p(t.nama),1)]),"item.tema_count":o(({item:t})=>[u(p(t.projek.tema_count),1)]),"item.koordinator":o(({item:t})=>[l(x,{item:t.projek.guru},null,8,["item"])]),"item.rencana_projek_count":o(({item:t})=>[u(p(t.projek.rencana_projek_count.length),1)]),"item.aspek_projek_count":o(({item:t})=>[u(p(h(t.projek.rencana_projek_count)),1)]),"item.actions":o(({item:t})=>[l(z,{size:"x-small",color:"success",onClick:K=>P(t),loading:r(k)[t.pembelajaran_id],disabled:r(k)[t.pembelajaran_id]},{default:o(()=>a[4]||(a[4]=[u(" Detil ")])),_:2},1032,["onClick","loading","disabled"])]),bottom:o(()=>[l(D,{page:r(e).page,"onUpdate:page":a[2]||(a[2]=t=>r(e).page=t),"items-per-page":r(e).itemsPerPage,"total-items":r(d)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items","server-items-length","options","loading"])]),_:1})}}};export{Pe as default};
