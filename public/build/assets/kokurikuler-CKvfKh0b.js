import{_ as A}from"./ConfirmDialog-BeQZcop1.js";import{_ as B}from"./AppTextarea-BxCpxr5c.js";import{_ as S}from"./ProfileSiswa-BQqhhPWB.js";import{G as U,r as t,f,e as i,o,b as r,t as y,m as a,c as b,am as E,F as w,ap as q,d as s,h as K,y as N,aa as M,a2 as C}from"./main-WcaAB0Vb.js";import{d as x,a as F}from"./mixins-CyMBM5fU.js";import{u as O,c as j}from"./createUrl-5K3jXwP3.js";import{$ as z}from"./api-bn4q6wV9.js";import{V as G,c as I,a as L,b as D}from"./VCard-B6efkknt.js";import{V as H}from"./VDivider-DIWjfe5J.js";import{V as J}from"./VForm-Ceyv7-oM.js";import{V as Q}from"./VTable-Dxydgzys.js";import{V as W}from"./VAlert-CjOr7Ksk.js";import"./VDialog-B8hMcs5D.js";import"./VOverlay-Baakzd79.js";import"./forwardRefs-DWGaNmQL.js";import"./scopeId-UpMB3NtI.js";import"./VImg-BR-W7-GF.js";import"./VLabel-6jXlAgoN.js";import"./VTextarea-7487l8Ls.js";/* empty css                   */import"./VField-Bv5GDULG.js";import"./VAvatar-C5PogN-2.js";import"./index-BxkgbwWS.js";const ye={__name:"kokurikuler",setup(X){U(async()=>{await P()});const V=t({body:!1,table:!1}),l=t({user_id:x.user_id,guru_id:x.guru_id,sekolah_id:x.sekolah_id,semester_id:F.semester_id,periode_aktif:F.nama,aksi:"kokurikuler"}),p=t({uraian_deskripsi:{}}),_=t({siswa:[]}),d=t(!1),v=t(!1),c=t(!1),h=t(!1),k=t({color:null,title:null,text:null});t({dudi_id:null});const P=async()=>{V.value.body=!0;try{let e=(await O(j("/walas",{query:{user_id:l.value.user_id,guru_id:l.value.guru_id,sekolah_id:l.value.sekolah_id,semester_id:l.value.semester_id,periode_aktif:l.value.nama,aksi:l.value.aksi}}))).data.value;_.value.siswa=e.data_siswa,h.value=e.is_new_ppa,e.data_siswa.forEach(n=>{var g;p.value.uraian_deskripsi[n.anggota_rombel.anggota_rombel_id]=((g=n.anggota_rombel.kokurikuler)==null?void 0:g.uraian_deskripsi)??null})}catch(m){console.error(m)}finally{V.value.body=!1}},R=async()=>{d.value=!0;const m={...l.value,...p.value};await z("/walas/save",{method:"POST",body:m,onResponseError({response:e}){console.log("ERROR:",e._data.errors),d.value=!1},onResponse({response:e}){d.value=!1;let n=e._data;n.errors||(c.value=!0,k.value=n)}})};return(m,e)=>{const n=S,g=B,T=A;return o(),f(G,null,{default:i(()=>[r(L,{class:"pb-4"},{default:i(()=>[r(I,null,{default:i(()=>e[2]||(e[2]=[y("Kokurikuler")])),_:1})]),_:1}),a(V).body?(o(),b(w,{key:0},[r(H),r(D,{class:"text-center"},{default:i(()=>[r(E,{size:60,indeterminate:"",color:"error",class:"my-10"})]),_:1})],64)):(o(),b(w,{key:1},[a(h)?(o(),f(J,{key:0,onSubmit:q(R,["prevent"])},{default:i(()=>[a(_).siswa.length?(o(),f(Q,{key:0},{default:i(()=>[e[3]||(e[3]=s("thead",null,[s("tr",null,[s("th",{class:"text-center",width:"30%"},"Nama Peserta Didik"),s("th",{class:"text-center",width:"70%"},"Deskripsi")])],-1)),s("tbody",null,[(o(!0),b(w,null,K(a(_).siswa,u=>(o(),b("tr",null,[s("td",null,[r(n,{item:u},null,8,["item"])]),s("td",null,[r(g,{class:"my-4",modelValue:a(p).uraian_deskripsi[u.anggota_rombel.anggota_rombel_id],"onUpdate:modelValue":$=>a(p).uraian_deskripsi[u.anggota_rombel.anggota_rombel_id]=$},null,8,["modelValue","onUpdate:modelValue"])])]))),256))])]),_:1})):N("",!0),a(_).siswa.length?(o(),f(D,{key:1,class:"d-flex justify-end flex-wrap gap-3 pt-5 overflow-visible"},{default:i(()=>[r(M,{variant:"elevated",type:"submit",loading:a(d),disabled:a(d)},{default:i(()=>e[4]||(e[4]=[y(" Simpan ")])),_:1},8,["loading","disabled"])]),_:1})):N("",!0)]),_:1})):(o(),f(D,{key:1},{default:i(()=>[r(W,{color:"error",class:"text-center my-4",variant:"tonal"},{default:i(()=>e[5]||(e[5]=[s("h2",{class:"mt-4 mb-4"},"Fitur ditutup!",-1),s("p",null,[y("Fitur Kokurikuler hanya untuk "),s("strong",null,"PPA Revisi")],-1)])),_:1})]),_:1}))],64)),r(T,{isDialogVisible:a(v),"onUpdate:isDialogVisible":e[0]||(e[0]=u=>C(v)?v.value=u:null),isNotifVisible:a(c),"onUpdate:isNotifVisible":e[1]||(e[1]=u=>C(c)?c.value=u:null),"confirmation-question":"Apakah Anda yakin?","confirmation-text":"Tindakan ini tidak dapat dikembalikan!","confirm-color":a(k).color,"confirm-title":a(k).title,"confirm-msg":a(k).text},null,8,["isDialogVisible","isNotifVisible","confirm-color","confirm-title","confirm-msg"])]),_:1})}}};export{ye as default};
