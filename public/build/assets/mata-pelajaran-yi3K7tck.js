import{_ as b}from"./TablePagination-CuT8fYlL.js";import{_ as P}from"./AppTextField-Bs0QZCjT.js";import{_ as x}from"./AppSelect-IeufUfg5.js";import{u as h,c as w}from"./createUrl-DlXxruU0.js";import{d as C,a as k}from"./mixins-CH1_8dYy.js";import{V as D,a as T,c as j,b as Q}from"./VCard-BKcbqOld.js";import{V as c}from"./VDivider-77sybySJ.js";import{V as U,a as f}from"./VRow-B2Y-82Sz.js";import{V as $}from"./VDataTableServer-WENEgFWK.js";import{r as i,G as A,w as _,c as B,b as t,e as o,o as M,t as S,m as r}from"./main-BzILoe6Q.js";import"./VLabel-C_XpaR6f.js";import"./VImg-BkaG5Hni.js";/* empty css                   */import"./VField-CO_n7MTs.js";import"./forwardRefs-DWGaNmQL.js";import"./VSelect-DVePslg_.js";import"./VList-BkyGPJyC.js";import"./ssrBoot-BR_DD4Vd.js";import"./VAvatar-fbE-Apsf.js";import"./VOverlay-Dhhe8ByG.js";import"./scopeId-DKd8LGC9.js";import"./VMenu-DHmd1w0v.js";import"./VSelectionControl-vSl6TuP0.js";import"./VChip-DeqJi3l0.js";import"./VSlideGroup-CtoNB_GD.js";import"./index-BxkgbwWS.js";/* empty css              */import"./VTable-Cp-9DvmD.js";import"./filter-Cd3gzlDR.js";const ce={__name:"mata-pelajaran",setup(N){const e=i({page:1,itemsPerPage:10,searchQuery:"",selectedRole:null,sortby:"mata_pelajaran_id",sortbydesc:"ASC"}),g=[{title:"ID Mapel",key:"mata_pelajaran_id"},{title:"Nama Mata Pelajaran",key:"nama"}],d=i([]),p=i(0),n=i(!1);A(async()=>{await u()}),_(e,async()=>{await u()},{deep:!0}),_(()=>e.value.searchQuery,()=>{e.value.page=1});const y=s=>{var a,m;e.value.sortby=(a=s[0])==null?void 0:a.key,e.value.sortbydesc=(m=s[0])==null?void 0:m.order},u=async()=>{n.value=!0;try{let a=(await h(w("/referensi/mata-pelajaran",{query:{sekolah_id:C.sekolah_id,semester_id:k.semester_id,q:e.value.searchQuery,page:e.value.page,per_page:e.value.itemsPerPage,sortby:e.value.sortby,sortbydesc:e.value.sortbydesc}}))).data;d.value=a.value.data.data,p.value=a.value.data.total}catch(s){console.error(s)}finally{n.value=!1}};return(s,a)=>{const m=x,v=P,V=b;return M(),B("section",null,[t(D,{class:"mb-6"},{default:o(()=>[t(T,{class:"pb-4"},{default:o(()=>[t(j,null,{default:o(()=>a[3]||(a[3]=[S("Data Mata Pelajaran")])),_:1})]),_:1}),t(c),t(Q,null,{default:o(()=>[t(U,null,{default:o(()=>[t(f,{cols:"12",md:"4",class:"d-flex align-items-center"},{default:o(()=>[t(m,{modelValue:r(e).itemsPerPage,"onUpdate:modelValue":a[0]||(a[0]=l=>r(e).itemsPerPage=l),items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"}]},null,8,["modelValue"])]),_:1}),t(f,{cols:"12",md:"4","offset-md":"4",class:"d-flex gap-4"},{default:o(()=>[t(v,{modelValue:r(e).searchQuery,"onUpdate:modelValue":a[1]||(a[1]=l=>r(e).searchQuery=l),placeholder:"Cari Data"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(c),t($,{class:"text-no-wrap",items:r(d),"server-items-length":r(p),headers:g,options:r(e),loading:r(n),"loading-text":"Loading...","onUpdate:sortBy":y},{bottom:o(()=>[t(V,{page:r(e).page,"onUpdate:page":a[2]||(a[2]=l=>r(e).page=l),"items-per-page":r(e).itemsPerPage,"total-items":r(p)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items","server-items-length","options","loading"])]),_:1})])}}};export{ce as default};
