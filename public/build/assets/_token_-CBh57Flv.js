import{r,G as M,c as U,d as t,b as s,m as e,e as l,x as L,a2 as _,i as j,j as F,a as I,o as x,M as h,H as C,v as E,ap as H,aa as z,t as K,$ as O}from"./main-BpmS5yjl.js";import{r as b,e as G,c as J}from"./validators-CXK_eVNV.js";import{_ as Q}from"./ConfirmDialog-CY_9uydO.js";import{_ as W}from"./AppTextField-BYQvWqvk.js";import{a as X,V as T,b as Y}from"./VNodeRenderer-B8YiQcgB.js";import{$ as R}from"./api-CqoQuUrQ.js";import{V as Z,a as ee,c as ae,b as D}from"./VCard-CHmpSx-c.js";import{V as oe}from"./VForm-BtS5s1QD.js";import{V as se,a as p}from"./VRow-BacuoGYF.js";import"./VDialog-DmAehLsX.js";import"./VOverlay-yY7p8is2.js";import"./forwardRefs-DWGaNmQL.js";import"./scopeId-DiP191uI.js";import"./VImg-1iDcvPVu.js";import"./VLabel-D6Y69236.js";/* empty css                   */import"./VField-Cktymv3Q.js";import"./index-BxkgbwWS.js";import"./VAvatar-CwdAusxZ.js";/* empty css              */const le={class:"auth-wrapper d-flex align-center justify-center pa-4"},ie={class:"position-relative my-sm-16"},ne={class:"app-logo"},re=["src"],te={class:"app-logo-title"},Ne={__name:"[token]",setup(de){const P=j(),q=F(),i=r({email:"",password:"",password_confirmation:"",token:""}),u=r({email:void 0,password:void 0,password_confirmation:void 0,token:void 0}),y=r(),d=r(!1),N=()=>{var o;console.log("resetPassword"),(o=y.value)==null||o.validate().then(({valid:a})=>{a&&S()})},w=r(!1),f=r(!1),c=r({color:null,title:null,text:null}),g=r(!1),$=()=>{console.log("confirmClose"),g.value||(console.log(g.value),q.replace("/login"))},S=async()=>{u.value={email:void 0,password:void 0,password_confirmation:void 0,token:void 0},d.value=!0;try{const o=await R("/auth/reset-password",{method:"POST",body:{email:i.value.email,password:i.value.password,password_confirmation:i.value.password_confirmation,token:i.value.token},onResponseError({response:a}){u.value=a._data.errors,d.value=!1},onResponse({response:a}){let m=a._data;m.errors||(f.value=!0,c.value=m,g.value=m.error)}})}catch(o){d.value=!1,console.error(o)}finally{d.value=!1}},A=r(),V=r(!1),v=r(!1);return M(async()=>{await R("/auth/get-email",{method:"POST",body:{token:P.params.token},onResponse({response:o}){let a=o._data;A.value=a.token,i.value.email=a.email,i.value.token=a.token}})}),(o,a)=>{const m=I("RouterLink"),k=W,B=Q;return x(),U("div",le,[t("div",ie,[s(e(T),{nodes:("h"in o?o.h:e(h))("div",{innerHTML:e(X)}),class:"text-primary auth-v1-top-shape d-none d-sm-block"},null,8,["nodes"]),s(e(T),{nodes:("h"in o?o.h:e(h))("div",{innerHTML:e(Y)}),class:"text-primary auth-v1-bottom-shape d-none d-sm-block"},null,8,["nodes"]),s(Z,{class:L(["auth-card",o.$vuetify.display.smAndUp?"pa-6":"pa-0"]),"max-width":"460"},{default:l(()=>[s(ee,{class:"justify-center"},{default:l(()=>[s(ae,null,{default:l(()=>[s(m,{to:"/"},{default:l(()=>[t("div",ne,[t("img",{src:e(C).app.logo,height:"28"},null,8,re),t("h1",te,E(e(C).app.title),1)])]),_:1})]),_:1})]),_:1}),s(D,null,{default:l(()=>a[7]||(a[7]=[t("h4",{class:"text-h4 mb-1"}," Lupa Password?  ",-1),t("p",{class:"mb-0"}," Masukkan email Anda dan kami akan mengirimkan instruksi untuk mengatur ulang password Anda ",-1)])),_:1}),s(D,null,{default:l(()=>[s(oe,{ref_key:"refVForm",ref:y,onSubmit:H(N,["prevent"])},{default:l(()=>[s(se,null,{default:l(()=>[s(p,{cols:"12"},{default:l(()=>[s(k,{modelValue:e(i).email,"onUpdate:modelValue":a[0]||(a[0]=n=>e(i).email=n),autofocus:"",label:"Email",type:"email",rules:["requiredValidator"in o?o.requiredValidator:e(b),"emailValidator"in o?o.emailValidator:e(G)],"error-messages":e(u).email,disabled:""},null,8,["modelValue","rules","error-messages"])]),_:1}),s(p,{cols:"12"},{default:l(()=>[s(k,{modelValue:e(i).password,"onUpdate:modelValue":a[1]||(a[1]=n=>e(i).password=n),"error-messages":e(u).password,label:"Password",placeholder:"路路路路路路路路路路路路",type:e(V)?"text":"password",autocomplete:"password","append-inner-icon":e(V)?"tabler-eye-off":"tabler-eye","onClick:appendInner":a[2]||(a[2]=n=>V.value=!e(V)),rules:["requiredValidator"in o?o.requiredValidator:e(b)]},null,8,["modelValue","error-messages","type","append-inner-icon","rules"])]),_:1}),s(p,{cols:"12"},{default:l(()=>[s(k,{modelValue:e(i).password_confirmation,"onUpdate:modelValue":a[3]||(a[3]=n=>e(i).password_confirmation=n),"error-messages":e(u).password_confirmation,label:"Konfirmasi Password",placeholder:"路路路路路路路路路路路路",type:e(v)?"text":"password",autocomplete:"password","append-inner-icon":e(v)?"tabler-eye-off":"tabler-eye","onClick:appendInner":a[4]||(a[4]=n=>v.value=!e(v)),rules:["requiredValidator"in o?o.requiredValidator:e(b),("confirmedValidator"in o?o.confirmedValidator:e(J))(e(i).password_confirmation,e(i).password)]},null,8,["modelValue","error-messages","type","append-inner-icon","rules"])]),_:1}),s(p,{cols:"12"},{default:l(()=>[s(z,{block:"",type:"submit",loading:e(d),disabled:e(d)},{default:l(()=>a[8]||(a[8]=[K(" Simpan ")])),_:1},8,["loading","disabled"])]),_:1}),s(p,{cols:"12"},{default:l(()=>[s(m,{class:"d-flex align-center justify-center",to:{name:"login"}},{default:l(()=>[s(O,{icon:"tabler-chevron-left",size:"20",class:"me-1 flip-in-rtl"}),a[9]||(a[9]=t("span",null,"Kembali ke laman login",-1))]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1},8,["class"])]),s(B,{isDialogVisible:e(w),"onUpdate:isDialogVisible":a[5]||(a[5]=n=>_(w)?w.value=n:null),isNotifVisible:e(f),"onUpdate:isNotifVisible":a[6]||(a[6]=n=>_(f)?f.value=n:null),"confirmation-question":"Apakah Anda yakin?","confirmation-text":"Tindakan ini tidak dapat dikembalikan!","confirm-color":e(c).color,"confirm-title":e(c).title,"confirm-msg":e(c).text,onClose:$},null,8,["isDialogVisible","isNotifVisible","confirm-color","confirm-title","confirm-msg"])])}}};export{Ne as default};
